## üìÑ src/features/auth/ui/Auth.module.css
```
/* –°—Ç–∏–ª–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ */

.authPage {
  min-height: 100vh;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
}

.authCard {
  width: 100%;
  max-width: 400px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
  border-radius: 12px;
  background: white;
}

.authHeader {
  text-align: center;
  margin-bottom: 24px;
}

.authIcon {
  font-size: 48px;
  color: #1890ff;
  margin-bottom: 16px;
}

.authTitle {
  margin: 0;
  font-size: 24px;
  font-weight: 600;
}

.authSubtitle {
  color: #8c8c8c;
  font-size: 14px;
}

.authForm {
  width: 100%;
}

.authToggle {
  text-align: center;
  margin-top: 16px;
}

.authToggleButton {
  padding: 0;
  height: auto;
}

.authInfo {
  margin-top: 24px;
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
@media (max-width: 768px) {
  .authPage {
    padding: 16px;
  }
  
  .authCard {
    padding: 20px !important;
  }
  
  .authIcon {
    font-size: 40px;
  }
  
  .authTitle {
    font-size: 20px;
  }
}```

## üìÑ src/features/auth/ui/index.js
```
export { default as Auth } from './ui/Auth'```

## üìÑ src/features/auth/ui/Auth.jsx
```
import React, { useState } from 'react'
import {
	Form,
	Input,
	Button,
	Card,
	Typography,
	Alert,
	Space,
	Divider,
	Spin,
} from 'antd'
import {
	UserOutlined,
	LockOutlined,
	LoginOutlined,
	UserAddOutlined,
	TrophyOutlined,
} from '@ant-design/icons'
import { supabase } from '../../../shared/api/supabase'
import styles from './Auth.module.css' // ‚Üê –ò–º–ø–æ—Ä—Ç —Å—Ç–∏–ª–µ–π –∏–∑ —Ç–æ–π –∂–µ –ø–∞–ø–∫–∏

const { Title, Text, Paragraph } = Typography

export default function Auth({ onLoginSuccess }) {
	const [form] = Form.useForm()
	const [loading, setLoading] = useState(false)
	const [message, setMessage] = useState({ type: '', text: '' })
	const [isLogin, setIsLogin] = useState(true)

	const handleAuth = async values => {
		const { email, password } = values
		setLoading(true)
		setMessage({ type: '', text: '' })

		try {
			if (isLogin) {
				// –í—Ö–æ–¥
				const { data, error } = await supabase.auth.signInWithPassword({
					email,
					password,
				})

				if (error) throw error

				onLoginSuccess(data.user)
				setMessage({
					type: 'success',
					text: '‚úÖ –í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ!',
				})
			} else {
				// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
				const { data, error } = await supabase.auth.signUp({
					email,
					password,
					options: {
						data: {
							username: email.split('@')[0],
						},
					},
				})

				if (error) throw error

				if (data.user) {
					// –°–æ–∑–¥–∞–µ–º –ø—Ä–æ—Ñ–∏–ª—å —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –∏–º–µ–Ω–µ–º
					const username =
						email.split('@')[0] + Math.floor(Math.random() * 1000)

					await supabase.from('profiles').upsert({
						id: data.user.id,
						username: username,
						visibility_preference: 'public',
						created_at: new Date().toISOString(),
						updated_at: new Date().toISOString(),
					})
				}

				setMessage({
					type: 'success',
					text: '‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ email –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∏ –≤–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É.',
				})
				setIsLogin(true)
				form.resetFields()
			}
		} catch (error) {
			console.error('–û—à–∏–±–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:', error)
			setMessage({
				type: 'error',
				text: `‚ùå –û—à–∏–±–∫–∞: ${error.message}`,
			})
		} finally {
			setLoading(false)
		}
	}

	return (
		<div className={styles.authPage}>
			<Card className={styles.authCard} bordered={false}>
				<div className={styles.authHeader}>
					<TrophyOutlined className={styles.authIcon} />
					<Title level={2} className={styles.authTitle}>
						üéø –õ—ã–∂–Ω—ã–π –†–µ–π—Ç–∏–Ω–≥
					</Title>
					<Text className={styles.authSubtitle}>
						{isLogin ? '–í–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç' : '–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç'}
					</Text>
				</div>

				{/* –°–æ–æ–±—â–µ–Ω–∏—è */}
				{message.text && (
					<Alert
						message={message.text}
						type={message.type === 'success' ? 'success' : 'error'}
						showIcon
						closable
						onClose={() => setMessage({ type: '', text: '' })}
						style={{ marginBottom: '24px' }}
					/>
				)}

				{/* –§–æ—Ä–º–∞ */}
				<Spin spinning={loading}>
					<Form
						form={form}
						layout='vertical'
						onFinish={handleAuth}
						size='large'
						className={styles.authForm}
					>
						<Form.Item
							name='email'
							rules={[
								{ required: true, message: '–í–≤–µ–¥–∏—Ç–µ email' },
								{ type: 'email', message: '–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email' },
							]}
						>
							<Input
								prefix={<UserOutlined />}
								placeholder='Email'
								disabled={loading}
							/>
						</Form.Item>

						<Form.Item
							name='password'
							rules={[
								{ required: true, message: '–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å' },
								{ min: 6, message: '–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ 6 —Å–∏–º–≤–æ–ª–æ–≤' },
							]}
						>
							<Input.Password
								prefix={<LockOutlined />}
								placeholder='–ü–∞—Ä–æ–ª—å'
								disabled={loading}
							/>
						</Form.Item>

						<Form.Item style={{ marginBottom: 0 }}>
							<Button
								type='primary'
								htmlType='submit'
								icon={isLogin ? <LoginOutlined /> : <UserAddOutlined />}
								loading={loading}
								block
								size='large'
								style={{
									height: '48px',
									fontSize: '16px',
									marginTop: '8px',
								}}
							>
								{isLogin ? '–í–æ–π—Ç–∏' : '–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è'}
							</Button>
						</Form.Item>
					</Form>
				</Spin>

				<Divider style={{ margin: '16px 0' }}>
					<Text type='secondary'>–∏–ª–∏</Text>
				</Divider>

				{/* –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –≤—Ö–æ–¥–æ–º –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π */}
				<div className={styles.authToggle}>
					<Button
						type='link'
						onClick={() => {
							setIsLogin(!isLogin)
							form.resetFields()
							setMessage({ type: '', text: '' })
						}}
						disabled={loading}
						className={styles.authToggleButton}
					>
						{isLogin
							? '–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å'
							: '–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? –í–æ–π–¥–∏—Ç–µ'}
					</Button>
				</div>

				{/* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è */}
				<Alert
					message='–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è'
					description={
						<Space direction='vertical' size={2}>
							<Text type='secondary'>
								‚Ä¢ –î–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ email –∏ –ø–∞—Ä–æ–ª—å
							</Text>
							<Text type='secondary'>
								‚Ä¢ –ü–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ email –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
							</Text>
							<Text type='secondary'>
								‚Ä¢ –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ –ø—Ä–æ—Ñ–∏–ª–µ
							</Text>
						</Space>
					}
					type='info'
					showIcon
					className={styles.authInfo}
				/>
			</Card>
		</div>
	)
}
```

## üìÑ src/features/auth/index.js
```
export { default as Auth } from "./ui/Auth"
```

## üìÑ src/features/profile/ui/Profile.jsx
```
import React, { useState, useEffect } from 'react'
import {
	Form,
	Input,
	Button,
	Radio,
	Card,
	message,
	Spin,
	Typography,
	Space,
	Alert,
} from 'antd'
import {
	UserOutlined,
	SaveOutlined,
	EyeOutlined,
	EyeInvisibleOutlined,
	ExperimentOutlined,
} from '@ant-design/icons'
import { supabase } from '../../../shared/api/supabase'

const { Title, Text } = Typography

export default function Profile({ user, onUpdate, isMobile }) {
	const [form] = Form.useForm()
	const [loading, setLoading] = useState(false)
	const [profileLoading, setProfileLoading] = useState(true)

	useEffect(() => {
		loadProfile()
	}, [user])

	async function loadProfile() {
		try {
			const { data } = await supabase
				.from('profiles')
				.select('username, ski_model, visibility_preference')
				.eq('id', user.id)
				.single()

			if (data) {
				form.setFieldsValue({
					username: data.username || '',
					skiModel: data.ski_model || '',
					visibility: data.visibility_preference || 'public',
				})
			}
		} catch (error) {
			console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è:', error)
		} finally {
			setProfileLoading(false)
		}
	}

	async function handleSubmit(values) {
		const { username, skiModel, visibility } = values

		if (!username?.trim()) {
			message.error('–í–≤–µ–¥–∏—Ç–µ –∏–º—è')
			return
		}

		setLoading(true)

		try {
			const {
				data: { session },
			} = await supabase.auth.getSession()
			if (!session) throw new Error('–ù–µ—Ç —Å–µ—Å—Å–∏–∏')

			const { error } = await supabase.from('profiles').upsert({
				id: session.user.id,
				username: username.trim(),
				ski_model: skiModel?.trim() || null,
				visibility_preference: visibility,
				updated_at: new Date().toISOString(),
			})

			if (error) throw error

			message.success('–ü—Ä–æ—Ñ–∏–ª—å —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω!')
			onUpdate?.()
		} catch (error) {
			console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:', error)
			message.error('–û—à–∏–±–∫–∞: ' + error.message)
		} finally {
			setLoading(false)
		}
	}

	return (
		<Card
			title={
				<Space>
					<UserOutlined />
					<span>–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</span>
				</Space>
			}
			bordered={false}
			style={{ width: '100%' }}
		>
			<Spin spinning={profileLoading}>
				<Form
					form={form}
					layout='vertical'
					onFinish={handleSubmit}
					size='middle'
					disabled={loading}
				>
					<Space direction='vertical' size='large' style={{ width: '100%' }}>
						{/* –ò–º—è –∏ –º–æ–¥–µ–ª—å –ª—ã–∂ */}
						<div style={{ display: 'flex', gap: '16px', flexWrap: 'wrap' }}>
							<Form.Item
								label='–ò–º—è –≤ —Ç–∞–±–ª–∏—Ü–µ'
								name='username'
								rules={[
									{ required: true, message: '–í–≤–µ–¥–∏—Ç–µ –∏–º—è' },
									{ min: 2, message: '–ú–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞' },
								]}
								style={{ flex: 1, minWidth: '200px' }}
							>
								<Input
									placeholder='–í–∞—à–µ –∏–º—è'
									prefix={<UserOutlined />}
									maxLength={30}
								/>
							</Form.Item>

							<Form.Item
								label='–ú–æ–¥–µ–ª—å –ª—ã–∂'
								name='skiModel'
								extra='–ë—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –Ω–æ–≤—ã—Ö –∑–∞–µ–∑–¥–æ–≤'
								style={{ flex: 1, minWidth: '200px' }}
							>
								<Input
									placeholder='–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å –ú–æ–¥–µ–ª—å'
									prefix={<ExperimentOutlined />}
									list='ski-brands'
								/>
								<datalist id='ski-brands'>
									<option value='Fischer' />
									<option value='Rossignol' />
									<option value='Madshus' />
									<option value='Salomon' />
									<option value='Atomic' />
									<option value='Pioneer' />
									<option value='Tisa' />
									<option value='Karhu' />
									<option value='Peltonen' />
									<option value='Brados' />
								</datalist>
							</Form.Item>
						</div>

						{/* –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ */}
						<Form.Item label='–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏' name='visibility'>
							<Radio.Group style={{ width: '100%' }}>
								<Space
									direction='vertical'
									size='middle'
									style={{ width: '100%' }}
								>
									<Card
										size='small'
										style={{
											border: '1px solid #d9d9d9',
											borderRadius: '8px',
											cursor: 'pointer',
										}}
										onClick={() => form.setFieldValue('visibility', 'public')}
									>
										<Radio
											value='public'
											style={{
												width: '100%',
												display: 'flex',
												alignItems: 'flex-start',
											}}
										>
											<Space
												direction='vertical'
												size={2}
												style={{ marginLeft: '8px' }}
											>
												<Space size={8}>
													<EyeOutlined style={{ color: '#52c41a' }} />
													<Text strong>–ü—É–±–ª–∏—á–Ω–æ–µ —É—á–∞—Å—Ç–∏–µ</Text>
												</Space>
												<div style={{ marginLeft: '24px' }}>
													<Text type='secondary' style={{ display: 'block' }}>
														‚Ä¢ –ò–º—è –≤ –æ–±—â–µ–º —Ä–µ–π—Ç–∏–Ω–≥–µ
													</Text>
													<Text type='secondary' style={{ display: 'block' }}>
														‚Ä¢ –ü–æ–ª–Ω–∞—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—è
													</Text>
												</div>
											</Space>
										</Radio>
									</Card>

									<Card
										size='small'
										style={{
											border: '1px solid #d9d9d9',
											borderRadius: '8px',
											cursor: 'pointer',
										}}
										onClick={() =>
											form.setFieldValue('visibility', 'anonymous')
										}
									>
										<Radio
											value='anonymous'
											style={{
												width: '100%',
												display: 'flex',
												alignItems: 'flex-start',
											}}
										>
											<Space
												direction='vertical'
												size={2}
												style={{ marginLeft: '8px' }}
											>
												<Space size={8}>
													<EyeInvisibleOutlined style={{ color: '#fa8c16' }} />
													<Text strong>–ê–Ω–æ–Ω–∏–º–Ω–æ–µ —É—á–∞—Å—Ç–∏–µ</Text>
												</Space>
												<div style={{ marginLeft: '24px' }}>
													<Text type='secondary' style={{ display: 'block' }}>
														‚Ä¢ –í —Ä–µ–π—Ç–∏–Ω–≥–µ –∫–∞–∫ "–õ—ã–∂–Ω–∏–∫ ‚Ññ–•"
													</Text>
													<Text type='secondary' style={{ display: 'block' }}>
														‚Ä¢ –í–∏–∂—É —Å–≤–æ—ë –º–µ—Å—Ç–æ
													</Text>
												</div>
											</Space>
										</Radio>
									</Card>
								</Space>
							</Radio.Group>
						</Form.Item>

						{/* –ö–Ω–æ–ø–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è */}
						<Form.Item style={{ marginBottom: 0 }}>
							<Button
								type='primary'
								htmlType='submit'
								icon={<SaveOutlined />}
								loading={loading}
								size='large'
								block={isMobile}
								style={{
									height: '48px',
									fontSize: '16px',
								}}
							>
								–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
							</Button>
						</Form.Item>
					</Space>
				</Form>
			</Spin>
		</Card>
	)
}
```

## üìÑ src/features/profile/ui/Profile.module.css
```
/* –°—Ç–∏–ª–∏ –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ Profile */
.profileContainer {
  width: 100%;
}
```

## üìÑ src/features/profile/index.js
```
export { default as Profile } from "./ui/Profile"
```

## üìÑ src/features/lap-times/ui/AddTimeForm.jsx
```
import React, { useState, useEffect } from 'react'
import {
	Form,
	Input,
	InputNumber,
	DatePicker,
	Button,
	Upload,
	message,
	Spin,
	Alert,
	Typography,
	Space,
	Card,
} from 'antd'
import {
	UploadOutlined,
	PlusOutlined,
	CheckCircleOutlined,
	FileTextOutlined,
} from '@ant-design/icons'
import { supabase } from '../../../shared/api/supabase'
import dayjs from 'dayjs'

const { TextArea } = Input
const { Text } = Typography

export default function AddTimeForm({ user, onTimeAdded, isMobile }) {
	const [form] = Form.useForm()
	const [uploading, setUploading] = useState(false)
	const [loading, setLoading] = useState(false)
	const [fileList, setFileList] = useState([])
	const [userProfile, setUserProfile] = useState(null)
	const [autoFilledSkiModel, setAutoFilledSkiModel] = useState('')

	// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏ –∑–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–æ—Ñ–∏–ª—å
	useEffect(() => {
		// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É
		form.setFieldsValue({
			date: dayjs(),
		})

		// –ó–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –∞–≤—Ç–æ-–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –º–æ–¥–µ–ª–∏ –ª—ã–∂
		async function loadUserProfile() {
			if (user) {
				const { data } = await supabase
					.from('profiles')
					.select('ski_model')
					.eq('id', user.id)
					.single()

				if (data?.ski_model) {
					setAutoFilledSkiModel(data.ski_model)
					form.setFieldsValue({
						skiModel: data.ski_model,
					})
				}
			}
		}

		loadUserProfile()
	}, [user, form])

	// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏–∏
	const transliterate = text => {
		const ru = {
			–∞: 'a',
			–±: 'b',
			–≤: 'v',
			–≥: 'g',
			–¥: 'd',
			–µ: 'e',
			—ë: 'yo',
			–∂: 'zh',
			–∑: 'z',
			–∏: 'i',
			–π: 'y',
			–∫: 'k',
			–ª: 'l',
			–º: 'm',
			–Ω: 'n',
			–æ: 'o',
			–ø: 'p',
			—Ä: 'r',
			—Å: 's',
			—Ç: 't',
			—É: 'u',
			—Ñ: 'f',
			—Ö: 'h',
			—Ü: 'ts',
			—á: 'ch',
			—à: 'sh',
			—â: 'shch',
			—ä: '',
			—ã: 'y',
			—å: '',
			—ç: 'e',
			—é: 'yu',
			—è: 'ya',
		}

		return text
			.toLowerCase()
			.split('')
			.map(char => ru[char] || char)
			.join('')
	}

	// –ó–∞–≥—Ä—É–∑–∫–∞ GPX —Ñ–∞–π–ª–∞
	const uploadGpxFile = async file => {
		setUploading(true)
		try {
			const originalName = file.name.replace(/\.[^/.]+$/, '')
			const transliteratedName = transliterate(originalName)
			const safeName = transliteratedName
				.replace(/[^a-zA-Z0-9]/g, '_')
				.replace(/_+/g, '_')
				.replace(/^_+|_+$/g, '')

			const fileExt = file.name.split('.').pop().toLowerCase()
			const fileName = `${Date.now()}_${user.id}_${
				safeName || 'track'
			}.${fileExt}`
			const finalFileName = safeName
				? fileName
				: `${Date.now()}_${user.id}_track.${fileExt}`

			const { error } = await supabase.storage
				.from('gpx-tracks')
				.upload(finalFileName, file)

			if (error) {
				console.error('–û—à–∏–±–∫–∞ Supabase –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ:', error)
				throw error
			}

			const {
				data: { publicUrl },
			} = supabase.storage.from('gpx-tracks').getPublicUrl(finalFileName)

			return { url: publicUrl }
		} catch (error) {
			console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ GPX:', error)
			message.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞: ' + error.message)
			return null
		} finally {
			setUploading(false)
		}
	}

	// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã
	const handleSubmit = async values => {
		const { minutes, seconds, date, skiModel, comment } = values

		const totalSeconds = (minutes || 0) * 60 + (seconds || 0)

		if (totalSeconds <= 0) {
			message.error('–í—Ä–µ–º—è –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –±–æ–ª—å—à–µ 0 —Å–µ–∫—É–Ω–¥')
			return
		}

		setLoading(true)

		try {
			let gpxData = null
			if (fileList.length > 0) {
				gpxData = await uploadGpxFile(fileList[0])
			}

			const dateTime = date ? date.toISOString() : new Date().toISOString()

			const { error } = await supabase.from('lap_times').insert({
				user_id: user.id,
				time_seconds: totalSeconds,
				comment: comment?.trim() || null,
				ski_model: skiModel?.trim() || null,
				gpx_track_url: gpxData?.url || null,
				verified: !!gpxData,
				date: dateTime,
				user_name: user.email.split('@')[0],
			})

			if (error) throw error

			// –£—Å–ø–µ—à–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ
			message.success(
				gpxData ? '–ó–∞–µ–∑–¥ –¥–æ–±–∞–≤–ª–µ–Ω —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º!' : '–ó–∞–µ–∑–¥ –¥–æ–±–∞–≤–ª–µ–Ω!',
				3
			)

			// –°–±—Ä–æ—Å —Ñ–æ—Ä–º—ã
			form.resetFields()
			setFileList([])

			// –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–≤—Ç–æ-–∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—É—é –º–æ–¥–µ–ª—å –ª—ã–∂
			if (autoFilledSkiModel) {
				form.setFieldsValue({
					skiModel: autoFilledSkiModel,
				})
			}

			// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É
			form.setFieldsValue({
				date: dayjs(),
			})

			onTimeAdded?.()
		} catch (error) {
			console.error('–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–µ–∑–¥–∞:', error)
			message.error('–û—à–∏–±–∫–∞: ' + error.message)
		} finally {
			setLoading(false)
		}
	}

	// –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
	const uploadProps = {
		onRemove: () => {
			setFileList([])
		},
		beforeUpload: file => {
			if (!file.name.endsWith('.gpx')) {
				message.error('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ GPX —Ñ–∞–π–ª')
				return Upload.LIST_IMPORT
			}
			setFileList([file])
			return false
		},
		fileList,
		maxCount: 1,
		accept: '.gpx',
	}

	return (
		<Card
			title={
				<Space>
					{user ? (
						<span>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∑–∞–µ–∑–¥</span>
					) : (
						<span style={{ color: '#faad14' }}>
							‚ö†Ô∏è –î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–µ–∑–¥–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É
						</span>
					)}
				</Space>
			}
			bordered={false}
			style={{ width: '100%' }}
		>
			<Spin spinning={loading || uploading}>
				<Form
					form={form}
					layout='vertical'
					onFinish={handleSubmit}
					size='middle'
					disabled={loading || uploading}
				>
					<Space direction='vertical' size='middle' style={{ width: '100%' }}>
						{/* –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è */}
						<div style={{ display: 'flex', gap: '16px', flexWrap: 'wrap' }}>
							<Form.Item
								label='–î–∞—Ç–∞ –∑–∞–µ–∑–¥–∞'
								name='date'
								rules={[{ required: true, message: '–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É' }]}
								style={{ flex: 1, minWidth: '150px' }}
							>
								<DatePicker
									format='DD.MM.YYYY'
									style={{ width: '100%' }}
									disabledDate={current =>
										current && current > dayjs().endOf('day')
									}
								/>
							</Form.Item>

							<Form.Item
								label='–ú–∏–Ω—É—Ç—ã'
								name='minutes'
								rules={[
									{ required: true, message: '–í–≤–µ–¥–∏—Ç–µ –º–∏–Ω—É—Ç—ã' },
									{ type: 'number', min: 0, max: 59, message: '–û—Ç 0 –¥–æ 59' },
								]}
								style={{ width: '100px' }}
							>
								<InputNumber
									min={0}
									max={59}
									placeholder='0'
									style={{ width: '100%' }}
								/>
							</Form.Item>

							<Form.Item
								label='–°–µ–∫—É–Ω–¥—ã'
								name='seconds'
								rules={[
									{ required: true, message: '–í–≤–µ–¥–∏—Ç–µ —Å–µ–∫—É–Ω–¥—ã' },
									{ type: 'number', min: 0, max: 59, message: '–û—Ç 0 –¥–æ 59' },
								]}
								style={{ width: '100px' }}
							>
								<InputNumber
									min={0}
									max={59}
									placeholder='0'
									style={{ width: '100%' }}
								/>
							</Form.Item>
						</div>

						{/* –ú–æ–¥–µ–ª—å –ª—ã–∂ */}
						<Form.Item
							label='–ú–æ–¥–µ–ª—å –ª—ã–∂'
							name='skiModel'
							extra={
								autoFilledSkiModel
									? '–ú–æ–¥–µ–ª—å –∏–∑ –≤–∞—à–µ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è. –ú–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –¥–ª—è —ç—Ç–æ–≥–æ –∑–∞–µ–∑–¥–∞.'
									: '–£–∫–∞–∂–∏—Ç–µ –º–æ–¥–µ–ª—å –ª—ã–∂ –¥–ª—è —ç—Ç–æ–≥–æ –∑–∞–µ–∑–¥–∞'
							}
						>
							<Input
								placeholder='–ù–∞–ø—Ä–∏–º–µ—Ä: Fischer Speedmax'
								list='ski-models'
							/>
							<datalist id='ski-models'>
								<option value='Brados' />
								<option value='Fischer' />
								<option value='Rossignol' />
								<option value='Madshus' />
								<option value='Salomon' />
								<option value='Atomic' />
								<option value='Tisa' />
							</datalist>
						</Form.Item>

						{/* GPX —Ç—Ä–µ–∫ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π */}
						<div style={{ display: 'flex', gap: '16px', flexWrap: 'wrap' }}>
							<Form.Item
								label='GPX —Ç—Ä–µ–∫ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)'
								style={{ flex: 1, minWidth: '200px' }}
							>
								<Space
									direction='vertical'
									size='small'
									style={{ width: '100%' }}
								>
									<Upload {...uploadProps}>
										<Button icon={<UploadOutlined />}>
											{fileList.length > 0
												? fileList[0].name
												: '–í—ã–±–µ—Ä–∏—Ç–µ GPX —Ñ–∞–π–ª'}
										</Button>
									</Upload>

									<Text type='secondary'>
										{uploading
											? '–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞...'
											: '–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ç—Ä–µ–∫ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∑–∞–µ–∑–¥–∞'}
									</Text>
								</Space>
							</Form.Item>

							<Form.Item
								label='–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π'
								name='comment'
								style={{ flex: 1, minWidth: '200px' }}
							>
								<Input
									placeholder='–ü–æ–≥–æ–¥–∞, —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç—Ä–∞—Å—Å—ã...'
									maxLength={100}
								/>
							</Form.Item>
						</div>

						{/* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏ */}
						{fileList.length > 0 && (
							<Alert
								message='–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–µ–∑–¥–∞'
								description="–≠—Ç–æ—Ç –∑–∞–µ–∑–¥ –±—É–¥–µ—Ç –æ—Ç–º–µ—á–µ–Ω –∫–∞–∫ '–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–π' –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ GPX —Ç—Ä–µ–∫–∞."
								type='success'
								showIcon
								icon={<CheckCircleOutlined />}
							/>
						)}

						{/* –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ */}
						<Form.Item style={{ marginBottom: 0 }}>
							<Button
								type='primary'
								htmlType='submit'
								loading={loading}
								disabled={uploading || !user} // –î–æ–±–∞–≤–ª—è–µ–º !user
								size='large'
								block={isMobile}
								style={{
									backgroundColor: !user ? '#d9d9d9' : '#52c41a',
									borderColor: !user ? '#d9d9d9' : '#52c41a',
									height: '48px',
									fontSize: '16px',
									cursor: !user ? 'not-allowed' : 'pointer',
								}}
							>
								{!user
									? 'üîí –¢—Ä–µ–±—É–µ—Ç—Å—è –≤—Ö–æ–¥'
									: uploading
									? '–ó–∞–≥—Ä—É–∑–∫–∞ —Ç—Ä–µ–∫–∞...'
									: loading
									? '–î–æ–±–∞–≤–ª–µ–Ω–∏–µ...'
									: 'üéø –î–æ–±–∞–≤–∏—Ç—å –∑–∞–µ–∑–¥'}
							</Button>
						</Form.Item>

						{/* –ü–æ–¥—Å–∫–∞–∑–∫–∏ */}
						<Alert
							message='–ü–æ–¥—Å–∫–∞–∑–∫–∏'
							description={
								<Space
									direction='vertical'
									size='small'
									style={{ width: '100%' }}
								>
									<Text type='secondary'>
										‚Ä¢ GPX —Ñ–∞–π–ª—ã –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç –∑–∞–µ–∑–¥ –∏ –¥–æ–±–∞–≤–ª—è—é—Ç —Å—Ç–∞—Ç—É—Å
										"–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–π"
									</Text>
									<Text type='secondary'>
										‚Ä¢ –ú–æ–¥–µ–ª—å –ª—ã–∂ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–µ–∑–¥–∞ –æ—Ç–¥–µ–ª—å–Ω–æ
									</Text>
									<Text type='secondary'>
										‚Ä¢ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø–æ–º–æ–≥–∞–µ—Ç –∑–∞–ø–æ–º–Ω–∏—Ç—å —É—Å–ª–æ–≤–∏—è –∑–∞–µ–∑–¥–∞
									</Text>
								</Space>
							}
							type='info'
							showIcon
						/>
					</Space>
				</Form>
			</Spin>
		</Card>
	)
}
```

## üìÑ src/features/lap-times/ui/EditTimeForm.jsx
```
import React, { useState, useEffect } from 'react'
import {
	Modal,
	Form,
	Input,
	InputNumber,
	DatePicker,
	Button,
	Upload,
	message,
	Spin,
	Alert,
	Typography,
	Space,
	Popconfirm,
} from 'antd'
import {
	UploadOutlined,
	DeleteOutlined,
	CloseOutlined,
	SaveOutlined,
	FileTextOutlined,
	EyeOutlined,
} from '@ant-design/icons'
import { supabase } from '../../../shared/api/supabase' 
import dayjs from 'dayjs'

const { TextArea } = Input
const { Text } = Typography

export default function EditTimeForm({ time, onUpdate, onClose, onDelete }) {
	const [form] = Form.useForm()
	const [loading, setLoading] = useState(false)
	const [uploading, setUploading] = useState(false)
	const [deletingFile, setDeletingFile] = useState(false)
	const [fileList, setFileList] = useState([])
	const [gpxData, setGpxData] = useState(null)

	// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–æ—Ä–º—ã –¥–∞–Ω–Ω—ã–º–∏ –∑–∞–µ–∑–¥–∞
	useEffect(() => {
		if (time) {
			const totalSeconds = time.time_seconds
			const mins = Math.floor(totalSeconds / 60)
			const secs = totalSeconds % 60

			form.setFieldsValue({
				minutes: mins,
				seconds: secs,
				date: time.date ? dayjs(time.date) : dayjs(),
				skiModel: time.ski_model || '',
				comment: time.comment || '',
			})

			if (time.gpx_track_url) {
				setGpxData({
					url: time.gpx_track_url,
					name: time.gpx_track_url.split('/').pop(),
				})
			}
		}
	}, [time, form])

	// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏–∏
	const transliterate = text => {
		const ru = {
			–∞: 'a',
			–±: 'b',
			–≤: 'v',
			–≥: 'g',
			–¥: 'd',
			–µ: 'e',
			—ë: 'yo',
			–∂: 'zh',
			–∑: 'z',
			–∏: 'i',
			–π: 'y',
			–∫: 'k',
			–ª: 'l',
			–º: 'm',
			–Ω: 'n',
			–æ: 'o',
			–ø: 'p',
			—Ä: 'r',
			—Å: 's',
			—Ç: 't',
			—É: 'u',
			—Ñ: 'f',
			—Ö: 'h',
			—Ü: 'ts',
			—á: 'ch',
			—à: 'sh',
			—â: 'shch',
			—ä: '',
			—ã: 'y',
			—å: '',
			—ç: 'e',
			—é: 'yu',
			—è: 'ya',
		}

		return text
			.toLowerCase()
			.split('')
			.map(char => ru[char] || char)
			.join('')
	}

	// –ó–∞–≥—Ä—É–∑–∫–∞ GPX —Ñ–∞–π–ª–∞
	const uploadGpxFile = async file => {
		setUploading(true)
		try {
			const originalName = file.name.replace(/\.[^/.]+$/, '')
			const transliteratedName = transliterate(originalName)
			const safeName = transliteratedName
				.replace(/[^a-zA-Z0-9]/g, '_')
				.replace(/_+/g, '_')
				.replace(/^_+|_+$/g, '')

			const fileExt = file.name.split('.').pop().toLowerCase()
			const fileName = `${Date.now()}_${time.user_id}_${
				safeName || 'track'
			}.${fileExt}`
			const finalFileName = safeName
				? fileName
				: `${Date.now()}_${time.user_id}_track.${fileExt}`

			const { error } = await supabase.storage
				.from('gpx-tracks')
				.upload(finalFileName, file)

			if (error) throw error

			const {
				data: { publicUrl },
			} = supabase.storage.from('gpx-tracks').getPublicUrl(finalFileName)

			return { url: publicUrl, name: file.name }
		} catch (error) {
			console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ GPX:', error)
			message.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞: ' + error.message)
			return null
		} finally {
			setUploading(false)
		}
	}

	// –£–¥–∞–ª–µ–Ω–∏–µ GPX —Ñ–∞–π–ª–∞
	const deleteGpxFile = async () => {
		if (!time.gpx_track_url) return true

		setDeletingFile(true)
		try {
			const fileName = time.gpx_track_url.split('/').pop()
			const { error } = await supabase.storage
				.from('gpx-tracks')
				.remove([fileName])

			if (error) throw error
			return true
		} catch (error) {
			console.error('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è GPX:', error)
			message.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ç—Ä–µ–∫–∞: ' + error.message)
			return false
		} finally {
			setDeletingFile(false)
		}
	}

	// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã
	const handleSubmit = async values => {
		const { minutes, seconds, date, skiModel, comment } = values

		const totalSeconds = (minutes || 0) * 60 + (seconds || 0)

		if (totalSeconds <= 0) {
			message.error('–í—Ä–µ–º—è –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –±–æ–ª—å—à–µ 0 —Å–µ–∫—É–Ω–¥')
			return
		}

		setLoading(true)

		try {
			let newGpxData = null
			if (fileList.length > 0) {
				// –ï—Å–ª–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π —Ñ–∞–π–ª –∏ –µ—Å—Ç—å —Å—Ç–∞—Ä—ã–π - —É–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–π
				if (time.gpx_track_url) {
					await deleteGpxFile()
				}
				newGpxData = await uploadGpxFile(fileList[0])
			}

			// –§–æ—Ä–º–∏—Ä—É–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
			const updatedData = {
				time_seconds: totalSeconds,
				comment: comment?.trim() || null,
				ski_model: skiModel?.trim() || null,
				date: date ? date.toISOString() : time.date,
				updated_at: new Date().toISOString(),
			}

			// –ï—Å–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω –Ω–æ–≤—ã–π GPX —Ñ–∞–π–ª
			if (newGpxData) {
				updatedData.gpx_track_url = newGpxData.url
				updatedData.verified = true
			} else if (!time.gpx_track_url) {
				// –ï—Å–ª–∏ –Ω–µ –±—ã–ª–æ —Ç—Ä–µ–∫–∞ –∏ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω –Ω–æ–≤—ã–π
				updatedData.gpx_track_url = null
				updatedData.verified = false
			}

			// –í—ã–∑—ã–≤–∞–µ–º callback
			await onUpdate(updatedData)

			message.success('–ó–∞–µ–∑–¥ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω!')
			setTimeout(() => {
				onClose()
			}, 1500)
		} catch (error) {
			message.error('–û—à–∏–±–∫–∞: ' + error.message)
		} finally {
			setLoading(false)
		}
	}

	// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–µ–∑–¥–∞
	const handleDeleteEntry = async () => {
		try {
			if (time.gpx_track_url) {
				await deleteGpxFile()
			}
			await onDelete(time.id)
			message.success('–ó–∞–µ–∑–¥ —É–¥–∞–ª–µ–Ω')
			onClose()
		} catch (error) {
			message.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏: ' + error.message)
		}
	}

	// –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
	const uploadProps = {
		onRemove: () => {
			setFileList([])
		},
		beforeUpload: file => {
			if (!file.name.endsWith('.gpx')) {
				message.error('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ GPX —Ñ–∞–π–ª')
				return Upload.LIST_IMPORT
			}
			setFileList([file])
			return false
		},
		fileList,
		maxCount: 1,
		accept: '.gpx',
	}

	if (!time) return null

	return (
		<Modal
			title={<span style={{ fontSize: '18px' }}>‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–µ–∑–¥</span>}
			open={true}
			onCancel={onClose}
			footer={null}
			width={600}
			centered
			maskClosable={false}
			destroyOnClose
		>
			<Spin spinning={loading || uploading || deletingFile}>
				<Form
					form={form}
					layout='vertical'
					onFinish={handleSubmit}
					size='middle'
				>
					<Space direction='vertical' size='middle' style={{ width: '100%' }}>
						{/* –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è */}
						<div style={{ display: 'flex', gap: '16px', flexWrap: 'wrap' }}>
							<Form.Item
								label='–î–∞—Ç–∞ –∑–∞–µ–∑–¥–∞'
								name='date'
								rules={[{ required: true, message: '–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É' }]}
								style={{ flex: 1, minWidth: '150px' }}
							>
								<DatePicker
									format='DD.MM.YYYY'
									style={{ width: '100%' }}
									disabledDate={current =>
										current && current > dayjs().endOf('day')
									}
								/>
							</Form.Item>

							<Form.Item
								label='–ú–∏–Ω—É—Ç—ã'
								name='minutes'
								rules={[
									{ required: true, message: '–í–≤–µ–¥–∏—Ç–µ –º–∏–Ω—É—Ç—ã' },
									{ type: 'number', min: 0, max: 59, message: '–û—Ç 0 –¥–æ 59' },
								]}
								style={{ width: '100px' }}
							>
								<InputNumber
									min={0}
									max={59}
									placeholder='0'
									style={{ width: '100%' }}
								/>
							</Form.Item>

							<Form.Item
								label='–°–µ–∫—É–Ω–¥—ã'
								name='seconds'
								rules={[
									{ required: true, message: '–í–≤–µ–¥–∏—Ç–µ —Å–µ–∫—É–Ω–¥—ã' },
									{ type: 'number', min: 0, max: 59, message: '–û—Ç 0 –¥–æ 59' },
								]}
								style={{ width: '100px' }}
							>
								<InputNumber
									min={0}
									max={59}
									placeholder='0'
									style={{ width: '100%' }}
								/>
							</Form.Item>
						</div>

						{/* –ú–æ–¥–µ–ª—å –ª—ã–∂ */}
						<Form.Item
							label='–ú–æ–¥–µ–ª—å –ª—ã–∂'
							name='skiModel'
							extra='–ù–∞–ø—Ä–∏–º–µ—Ä: Fischer Speedmax'
						>
							<Input placeholder='–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å –ú–æ–¥–µ–ª—å' list='ski-brands' />
							<datalist id='ski-brands'>
								<option value='Brados' />
								<option value='Fischer' />
								<option value='Rossignol' />
								<option value='Madshus' />
								<option value='Salomon' />
								<option value='Atomic' />
								<option value='Tisa' />
							</datalist>
						</Form.Item>

						{/* GPX —Ç—Ä–µ–∫ */}
						<Form.Item label='GPX —Ç—Ä–µ–∫'>
							<Space
								direction='vertical'
								size='small'
								style={{ width: '100%' }}
							>
								{gpxData && (
									<Alert
										message='–¢–µ–∫—É—â–∏–π —Ç—Ä–µ–∫'
										description={
											<Space>
												<Text type='secondary'>{gpxData.name}</Text>
												<Button
													type='link'
													icon={<EyeOutlined />}
													href={gpxData.url}
													target='_blank'
													size='small'
												>
													–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å
												</Button>
												<Popconfirm
													title='–£–¥–∞–ª–∏—Ç—å GPX —Ç—Ä–µ–∫?'
													description='–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.'
													onConfirm={async () => {
														const success = await deleteGpxFile()
														if (success) {
															setGpxData(null)
															message.success('–¢—Ä–µ–∫ —É–¥–∞–ª–µ–Ω')
														}
													}}
													okText='–î–∞, —É–¥–∞–ª–∏—Ç—å'
													cancelText='–û—Ç–º–µ–Ω–∞'
												>
													<Button
														type='link'
														icon={<DeleteOutlined />}
														danger
														size='small'
														loading={deletingFile}
													>
														–£–¥–∞–ª–∏—Ç—å
													</Button>
												</Popconfirm>
											</Space>
										}
										type='info'
										showIcon
										style={{ width: '100%' }}
									/>
								)}

								<Upload {...uploadProps}>
									<Button icon={<UploadOutlined />}>
										{fileList.length > 0
											? fileList[0].name
											: '–ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤—ã–π GPX'}
									</Button>
								</Upload>

								<Text type='secondary'>
									{uploading
										? '–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞...'
										: '–ó–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–æ–≤—ã–π —Ç—Ä–µ–∫ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è'}
								</Text>
							</Space>
						</Form.Item>

						{/* –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π */}
						<Form.Item label='–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π' name='comment'>
							<TextArea
								placeholder='–ü–æ–≥–æ–¥–∞, —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç—Ä–∞—Å—Å—ã...'
								rows={3}
								maxLength={200}
								showCount
							/>
						</Form.Item>

						{/* –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π */}
						<Form.Item style={{ marginBottom: 0 }}>
							<Space style={{ width: '100%', justifyContent: 'space-between' }}>
								<Space>
									<Button
										onClick={onClose}
										icon={<CloseOutlined />}
										disabled={loading || uploading || deletingFile}
									>
										–û—Ç–º–µ–Ω–∞
									</Button>

									<Popconfirm
										title='–£–¥–∞–ª–∏—Ç—å –∑–∞–µ–∑–¥?'
										description='–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å. –£–¥–∞–ª–∏—Ç—å –∑–∞–µ–∑–¥ –ø–æ–ª–Ω–æ—Å—Ç—å—é?'
										onConfirm={handleDeleteEntry}
										okText='–î–∞, —É–¥–∞–ª–∏—Ç—å'
										cancelText='–û—Ç–º–µ–Ω–∞'
										okType='danger'
									>
										<Button
											danger
											icon={<DeleteOutlined />}
											disabled={loading || uploading || deletingFile}
										>
											–£–¥–∞–ª–∏—Ç—å –∑–∞–µ–∑–¥
										</Button>
									</Popconfirm>
								</Space>

								<Button
									type='primary'
									htmlType='submit'
									icon={<SaveOutlined />}
									loading={loading}
									disabled={uploading || deletingFile}
								>
									–°–æ—Ö—Ä–∞–Ω–∏—Ç—å
								</Button>
							</Space>
						</Form.Item>
					</Space>
				</Form>
			</Spin>
		</Modal>
	)
}
```

## üìÑ src/features/lap-times/ui/AddTimeForm.module.css
```
/* –°—Ç–∏–ª–∏ –¥–ª—è —Ñ–æ—Ä–º—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–µ–∑–¥–∞ */
.addFormContainer {
  width: 100%;
}
```

## üìÑ src/features/lap-times/index.js
```
export { default as AddTimeForm } from "./ui/AddTimeForm"
export { default as EditTimeForm } from "./ui/EditTimeForm"
```

## üìÑ src/index.js
```
import React from 'react'
import ReactDOM from 'react-dom/client'


import App from './App'

const root = ReactDOM.createRoot(document.getElementById('root'))
root.render(
	<React.StrictMode>
		<App />
	</React.StrictMode>
)
```

## üìÑ src/supabase.js
```
import { createClient } from '@supabase/supabase-js'

// –í–ê–ñ–ù–û: –ó–∞–º–µ–Ω–∏—Ç–µ —ç—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ —Å–≤–æ–∏!
const supabaseUrl = 'https://xsqelqxwthjufdwfdecf.supabase.co'
const supabaseKey = 'sb_publishable_XTAAbOUtNz-UyekvCQMB-A_dzlGjS1O'

// –°–æ–∑–¥–∞–µ–º –∫–ª–∏–µ–Ω—Ç Supabase
const supabase = createClient(supabaseUrl, supabaseKey)

export default supabase
```

## üìÑ src/shared/api/supabase.js
```
import { createClient } from '@supabase/supabase-js'

const supabaseUrl = 'https://xsqelqxwthjufdwfdecf.supabase.co'
const supabaseKey =
	process.env.REACT_APP_SUPABASE_ANON_KEY ||
	'sb_publishable_XTAAbOUtNz-UyekvCQMB-A_dzlGjS1O'

export const supabase = createClient(supabaseUrl, supabaseKey)
```

## üìÑ src/styles/App.css
```
/* –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è */

/* –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ */
:root {
  --primary-color: #1890ff;
  --success-color: #52c41a;
  --warning-color: #faad14;
  --error-color: #f5222d;
  --text-primary: #262626;
  --text-secondary: #8c8c8c;
  --border-color: #f0f0f0;
  --background-color: #f5f5f5;
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
@media (max-width: 768px) {
  .ant-card {
    padding: 12px !important;
  }
  
  .ant-card-body {
    padding: 12px !important;
  }
  
  .ant-tabs {
    font-size: 14px;
  }
  
  .ant-btn {
    padding: 4px 8px;
    font-size: 12px;
  }
}

/* –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è Ant Design –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ */

/* –£–ª—É—á—à–∞–µ–º —Ç–∞–±–ª–∏—Ü—É */
.ant-table-small .ant-table-thead > tr > th {
  background-color: #fafafa;
  font-weight: 600;
}

/* –£–ª—É—á—à–∞–µ–º –∫–∞—Ä—Ç–æ—á–∫–∏ */
.ant-card {
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
}

/* –£–ª—É—á—à–∞–µ–º —Ç–∞–±—ã */
.ant-tabs-tab {
  padding: 8px 16px;
}

/* –£–ª—É—á—à–∞–µ–º —Ñ–æ—Ä–º—ã */
.ant-form-item-label > label {
  font-weight: 500;
}

/* –£–ª—É—á—à–∞–µ–º –∫–Ω–æ–ø–∫–∏ */
.ant-btn-primary {
  box-shadow: 0 2px 0 rgba(5, 145, 255, 0.1);
}

/* –£–ª—É—á—à–∞–µ–º –∞–ª–µ—Ä—Ç—ã */
.ant-alert {
  border-radius: 6px;
}

/* –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è */

/* –§–æ–Ω –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ */
.auth-page {
  min-height: 100vh;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
}

/* –•–µ–¥–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è */
.app-header {
  position: sticky;
  top: 0;
  z-index: 100;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
.mobile-container {
  padding: 0;
}

/* –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ç–µ–∫—Å—Ç–∞ */
.text-ellipsis {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* –°–∫—Ä—ã—Ç—å –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
@media (max-width: 768px) {
  .hide-on-mobile {
    display: none !important;
  }
}

/* –ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
@media (min-width: 769px) {
  .show-on-mobile {
    display: none !important;
  }
}```

## üìÑ src/styles/components.css
```
/* –°—Ç–∞—Ä—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –µ—â–µ –Ω–µ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –Ω–∞ Ant Design */

/* –ö–∞—Ä—Ç–æ—á–∫–∏ */


/* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
.message-box {
  padding: 15px;
  border-radius: 8px;
  margin-bottom: 20px;
  text-align: center;
}

.message-box.success {
  background: #d1fae5;
  color: #065f46;
  border: 1px solid #a7f3d0;
}

.message-box.error {
  background: #fee2e2;
  color: #991b1b;
  border: 1px solid #fecaca;
}

.no-data {
  text-align: center;
  padding: 40px;
  color: #666;
  font-size: 18px;
}

/* –ë–ª–æ–∫ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ñ—É–Ω–∫—Ü–∏–∏ */
.feature-preview {
  margin-top: 25px;
  padding: 20px;
  background: #cacbcb36;
  border: 1px solid #82929a;
  border-radius: 10px;
  border-left: 2px solid #6884b1;
}

.feature-preview-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 15px;
}

.feature-icon {
  font-size: 24px;
}

.feature-preview h4 {
  color: #3f4043;
  margin: 0;
  font-size: 18px;
}

.feature-preview-content p {
  color: #374151;
  margin-bottom: 12px;
  line-height: 1.5;
}

.feature-preview ul {
  padding-left: 20px;
  margin-bottom: 20px;
  color: #4b5563;
}

.feature-preview li {
  margin-bottom: 6px;
  line-height: 1.4;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã "–û –ø—Ä–æ–µ–∫—Ç–µ" */
.about-card {
  background: white;
  border-radius: 12px;
  padding: 30px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.15);
  margin-bottom: 20px;
}

.news-section {
  margin-top: 30px;
}

.news-item {
  border-bottom: 1px solid #e5e7eb;
  padding: 20px 0;
}

.news-item:last-child {
  border-bottom: none;
}

.news-date {
  font-size: 12px;
  color: #6b7280;
  margin-bottom: 5px;
}

.news-title {
  font-weight: 600;
  color: #1e40af;
  margin-bottom: 8px;
  font-size: 16px;
}

.news-content {
  color: #374151;
  line-height: 1.5;
}

.section {
  margin-bottom: 25px;
  padding-bottom: 25px;
  border-bottom: 1px solid #f3f4f6;
}

.section:last-child {
  border-bottom: none;
}

.section h3 {
  color: #1e40af;
  margin-bottom: 10px;
  font-size: 18px;
}

.section p {
  color: #4b5563;
  line-height: 1.6;
  margin-bottom: 10px;
}

.section ul {
  padding-left: 20px;
  color: #4b5563;
}

.section li {
  margin-bottom: 8px;
  line-height: 1.5;
}

.tech-info ul, .contact-info p {
  font-size: 14px;
}

.contact-info a {
  color: #3b82f6;
  text-decoration: none;
  font-weight: 500;
}

.contact-info a:hover {
  text-decoration: underline;
}```

## üìÑ src/styles/utilities.css
```
/* –£—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–µ –∫–ª–∞—Å—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ */

.text-center {
  text-align: center;
}

.mt-1 { margin-top: 0.25rem; }
.mt-2 { margin-top: 0.5rem; }
.mt-3 { margin-top: 1rem; }
.mt-4 { margin-top: 1.5rem; }
.mt-5 { margin-top: 2rem; }

.mb-1 { margin-bottom: 0.25rem; }
.mb-2 { margin-bottom: 0.5rem; }
.mb-3 { margin-bottom: 1rem; }
.mb-4 { margin-bottom: 1.5rem; }
.mb-5 { margin-bottom: 2rem; }

.flex { display: flex; }
.flex-col { flex-direction: column; }
.items-center { align-items: center; }
.justify-center { justify-content: center; }
.justify-between { justify-content: space-between; }
.gap-2 { gap: 0.5rem; }
.gap-4 { gap: 1rem; }
.gap-6 { gap: 1.5rem; }

.w-full { width: 100%; }
.h-full { height: 100%; }```

## üìÑ src/styles/base.css
```
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

:root {
  --font-primary: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
  --font-mono: 'SF Mono', Monaco, 'Cascadia Mono', 'Roboto Mono', monospace;
}

code, .file-hint, small {
  font-family: var(--font-mono);
  font-size: 0.875em;
}```

## üìÑ src/components/Profile.jsx
```
import React, { useState, useEffect } from 'react'
import {
	Form,
	Input,
	Button,
	Radio,
	Card,
	message,
	Spin,
	Typography,
	Space,
	Alert,
} from 'antd'
import {
	UserOutlined,
	SaveOutlined,
	EyeOutlined,
	EyeInvisibleOutlined,
	ExperimentOutlined,
} from '@ant-design/icons'
import { supabase } from '../../shared/api/supabase'

const { Title, Text } = Typography

export default function Profile({ user, onUpdate, isMobile }) {
	const [form] = Form.useForm()
	const [loading, setLoading] = useState(false)
	const [profileLoading, setProfileLoading] = useState(true)

	useEffect(() => {
		loadProfile()
	}, [user])

	async function loadProfile() {
		try {
			const { data } = await supabase
				.from('profiles')
				.select('username, ski_model, visibility_preference')
				.eq('id', user.id)
				.single()

			if (data) {
				form.setFieldsValue({
					username: data.username || '',
					skiModel: data.ski_model || '',
					visibility: data.visibility_preference || 'public',
				})
			}
		} catch (error) {
			console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è:', error)
		} finally {
			setProfileLoading(false)
		}
	}

	async function handleSubmit(values) {
		const { username, skiModel, visibility } = values

		if (!username?.trim()) {
			message.error('–í–≤–µ–¥–∏—Ç–µ –∏–º—è')
			return
		}

		setLoading(true)

		try {
			const {
				data: { session },
			} = await supabase.auth.getSession()
			if (!session) throw new Error('–ù–µ—Ç —Å–µ—Å—Å–∏–∏')

			const { error } = await supabase.from('profiles').upsert({
				id: session.user.id,
				username: username.trim(),
				ski_model: skiModel?.trim() || null,
				visibility_preference: visibility,
				updated_at: new Date().toISOString(),
			})

			if (error) throw error

			message.success('–ü—Ä–æ—Ñ–∏–ª—å —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω!')
			onUpdate?.()
		} catch (error) {
			console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:', error)
			message.error('–û—à–∏–±–∫–∞: ' + error.message)
		} finally {
			setLoading(false)
		}
	}

	return (
		<Card
			title={
				<Space>
					<UserOutlined />
					<span>–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</span>
				</Space>
			}
			bordered={false}
			style={{ width: '100%' }}
		>
			<Spin spinning={profileLoading}>
				<Form
					form={form}
					layout='vertical'
					onFinish={handleSubmit}
					size='middle'
					disabled={loading}
				>
					<Space direction='vertical' size='large' style={{ width: '100%' }}>
						{/* –ò–º—è –∏ –º–æ–¥–µ–ª—å –ª—ã–∂ */}
						<div style={{ display: 'flex', gap: '16px', flexWrap: 'wrap' }}>
							<Form.Item
								label='–ò–º—è –≤ —Ç–∞–±–ª–∏—Ü–µ'
								name='username'
								rules={[
									{ required: true, message: '–í–≤–µ–¥–∏—Ç–µ –∏–º—è' },
									{ min: 2, message: '–ú–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞' },
								]}
								style={{ flex: 1, minWidth: '200px' }}
							>
								<Input
									placeholder='–í–∞—à–µ –∏–º—è'
									prefix={<UserOutlined />}
									maxLength={30}
								/>
							</Form.Item>

							<Form.Item
								label='–ú–æ–¥–µ–ª—å –ª—ã–∂'
								name='skiModel'
								extra='–ë—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –Ω–æ–≤—ã—Ö –∑–∞–µ–∑–¥–æ–≤'
								style={{ flex: 1, minWidth: '200px' }}
							>
								<Input
									placeholder='–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å –ú–æ–¥–µ–ª—å'
									prefix={<ExperimentOutlined />}
									list='ski-brands'
								/>
								<datalist id='ski-brands'>
									<option value='Fischer' />
									<option value='Rossignol' />
									<option value='Madshus' />
									<option value='Salomon' />
									<option value='Atomic' />
									<option value='Pioneer' />
									<option value='Tisa' />
									<option value='Karhu' />
									<option value='Peltonen' />
									<option value='Brados' />
								</datalist>
							</Form.Item>
						</div>

						{/* –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ */}
						<Form.Item label='–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏' name='visibility'>
							<Radio.Group style={{ width: '100%' }}>
								<Space
									direction='vertical'
									size='middle'
									style={{ width: '100%' }}
								>
									<Card
										size='small'
										style={{
											border: '1px solid #d9d9d9',
											borderRadius: '8px',
											cursor: 'pointer',
										}}
										onClick={() => form.setFieldValue('visibility', 'public')}
									>
										<Radio
											value='public'
											style={{
												width: '100%',
												display: 'flex',
												alignItems: 'flex-start',
											}}
										>
											<Space
												direction='vertical'
												size={2}
												style={{ marginLeft: '8px' }}
											>
												<Space size={8}>
													<EyeOutlined style={{ color: '#52c41a' }} />
													<Text strong>–ü—É–±–ª–∏—á–Ω–æ–µ —É—á–∞—Å—Ç–∏–µ</Text>
												</Space>
												<div style={{ marginLeft: '24px' }}>
													<Text type='secondary' style={{ display: 'block' }}>
														‚Ä¢ –ò–º—è –≤ –æ–±—â–µ–º —Ä–µ–π—Ç–∏–Ω–≥–µ
													</Text>
													<Text type='secondary' style={{ display: 'block' }}>
														‚Ä¢ –ü–æ–ª–Ω–∞—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏—è
													</Text>
												</div>
											</Space>
										</Radio>
									</Card>

									<Card
										size='small'
										style={{
											border: '1px solid #d9d9d9',
											borderRadius: '8px',
											cursor: 'pointer',
										}}
										onClick={() =>
											form.setFieldValue('visibility', 'anonymous')
										}
									>
										<Radio
											value='anonymous'
											style={{
												width: '100%',
												display: 'flex',
												alignItems: 'flex-start',
											}}
										>
											<Space
												direction='vertical'
												size={2}
												style={{ marginLeft: '8px' }}
											>
												<Space size={8}>
													<EyeInvisibleOutlined style={{ color: '#fa8c16' }} />
													<Text strong>–ê–Ω–æ–Ω–∏–º–Ω–æ–µ —É—á–∞—Å—Ç–∏–µ</Text>
												</Space>
												<div style={{ marginLeft: '24px' }}>
													<Text type='secondary' style={{ display: 'block' }}>
														‚Ä¢ –í —Ä–µ–π—Ç–∏–Ω–≥–µ –∫–∞–∫ "–õ—ã–∂–Ω–∏–∫ ‚Ññ–•"
													</Text>
													<Text type='secondary' style={{ display: 'block' }}>
														‚Ä¢ –í–∏–∂—É —Å–≤–æ—ë –º–µ—Å—Ç–æ
													</Text>
												</div>
											</Space>
										</Radio>
									</Card>
								</Space>
							</Radio.Group>
						</Form.Item>

						{/* –ö–Ω–æ–ø–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è */}
						<Form.Item style={{ marginBottom: 0 }}>
							<Button
								type='primary'
								htmlType='submit'
								icon={<SaveOutlined />}
								loading={loading}
								size='large'
								block={isMobile}
								style={{
									height: '48px',
									fontSize: '16px',
								}}
							>
								–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
							</Button>
						</Form.Item>
					</Space>
				</Form>
			</Spin>
		</Card>
	)
}
```

## üìÑ src/components/AddTimeForm.jsx
```
import React, { useState, useEffect } from 'react'
import {
	Form,
	Input,
	InputNumber,
	DatePicker,
	Button,
	Upload,
	message,
	Spin,
	Alert,
	Typography,
	Space,
	Card,
} from 'antd'
import {
	UploadOutlined,
	PlusOutlined,
	CheckCircleOutlined,
	FileTextOutlined,
} from '@ant-design/icons'
import { supabase } from '../../../shared/api/supabase'
import dayjs from 'dayjs'

const { TextArea } = Input
const { Text } = Typography

export default function AddTimeForm({ user, onTimeAdded, isMobile }) {
	const [form] = Form.useForm()
	const [uploading, setUploading] = useState(false)
	const [loading, setLoading] = useState(false)
	const [fileList, setFileList] = useState([])
	const [userProfile, setUserProfile] = useState(null)
	const [autoFilledSkiModel, setAutoFilledSkiModel] = useState('')

	// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏ –∑–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–æ—Ñ–∏–ª—å
	useEffect(() => {
		// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É
		form.setFieldsValue({
			date: dayjs(),
		})

		// –ó–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –∞–≤—Ç–æ-–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –º–æ–¥–µ–ª–∏ –ª—ã–∂
		async function loadUserProfile() {
			if (user) {
				const { data } = await supabase
					.from('profiles')
					.select('ski_model')
					.eq('id', user.id)
					.single()

				if (data?.ski_model) {
					setAutoFilledSkiModel(data.ski_model)
					form.setFieldsValue({
						skiModel: data.ski_model,
					})
				}
			}
		}

		loadUserProfile()
	}, [user, form])

	// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏–∏
	const transliterate = text => {
		const ru = {
			–∞: 'a',
			–±: 'b',
			–≤: 'v',
			–≥: 'g',
			–¥: 'd',
			–µ: 'e',
			—ë: 'yo',
			–∂: 'zh',
			–∑: 'z',
			–∏: 'i',
			–π: 'y',
			–∫: 'k',
			–ª: 'l',
			–º: 'm',
			–Ω: 'n',
			–æ: 'o',
			–ø: 'p',
			—Ä: 'r',
			—Å: 's',
			—Ç: 't',
			—É: 'u',
			—Ñ: 'f',
			—Ö: 'h',
			—Ü: 'ts',
			—á: 'ch',
			—à: 'sh',
			—â: 'shch',
			—ä: '',
			—ã: 'y',
			—å: '',
			—ç: 'e',
			—é: 'yu',
			—è: 'ya',
		}

		return text
			.toLowerCase()
			.split('')
			.map(char => ru[char] || char)
			.join('')
	}

	// –ó–∞–≥—Ä—É–∑–∫–∞ GPX —Ñ–∞–π–ª–∞
	const uploadGpxFile = async file => {
		setUploading(true)
		try {
			const originalName = file.name.replace(/\.[^/.]+$/, '')
			const transliteratedName = transliterate(originalName)
			const safeName = transliteratedName
				.replace(/[^a-zA-Z0-9]/g, '_')
				.replace(/_+/g, '_')
				.replace(/^_+|_+$/g, '')

			const fileExt = file.name.split('.').pop().toLowerCase()
			const fileName = `${Date.now()}_${user.id}_${
				safeName || 'track'
			}.${fileExt}`
			const finalFileName = safeName
				? fileName
				: `${Date.now()}_${user.id}_track.${fileExt}`

			const { error } = await supabase.storage
				.from('gpx-tracks')
				.upload(finalFileName, file)

			if (error) {
				console.error('–û—à–∏–±–∫–∞ Supabase –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ:', error)
				throw error
			}

			const {
				data: { publicUrl },
			} = supabase.storage.from('gpx-tracks').getPublicUrl(finalFileName)

			return { url: publicUrl }
		} catch (error) {
			console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ GPX:', error)
			message.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞: ' + error.message)
			return null
		} finally {
			setUploading(false)
		}
	}

	// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã
	const handleSubmit = async values => {
		const { minutes, seconds, date, skiModel, comment } = values

		const totalSeconds = (minutes || 0) * 60 + (seconds || 0)

		if (totalSeconds <= 0) {
			message.error('–í—Ä–µ–º—è –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –±–æ–ª—å—à–µ 0 —Å–µ–∫—É–Ω–¥')
			return
		}

		setLoading(true)

		try {
			let gpxData = null
			if (fileList.length > 0) {
				gpxData = await uploadGpxFile(fileList[0])
			}

			const dateTime = date ? date.toISOString() : new Date().toISOString()

			const { error } = await supabase.from('lap_times').insert({
				user_id: user.id,
				time_seconds: totalSeconds,
				comment: comment?.trim() || null,
				ski_model: skiModel?.trim() || null,
				gpx_track_url: gpxData?.url || null,
				verified: !!gpxData,
				date: dateTime,
				user_name: user.email.split('@')[0],
			})

			if (error) throw error

			// –£—Å–ø–µ—à–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ
			message.success(
				gpxData ? '–ó–∞–µ–∑–¥ –¥–æ–±–∞–≤–ª–µ–Ω —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º!' : '–ó–∞–µ–∑–¥ –¥–æ–±–∞–≤–ª–µ–Ω!',
				3
			)

			// –°–±—Ä–æ—Å —Ñ–æ—Ä–º—ã
			form.resetFields()
			setFileList([])

			// –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–≤—Ç–æ-–∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—É—é –º–æ–¥–µ–ª—å –ª—ã–∂
			if (autoFilledSkiModel) {
				form.setFieldsValue({
					skiModel: autoFilledSkiModel,
				})
			}

			// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É
			form.setFieldsValue({
				date: dayjs(),
			})

			onTimeAdded?.()
		} catch (error) {
			console.error('–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–µ–∑–¥–∞:', error)
			message.error('–û—à–∏–±–∫–∞: ' + error.message)
		} finally {
			setLoading(false)
		}
	}

	// –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
	const uploadProps = {
		onRemove: () => {
			setFileList([])
		},
		beforeUpload: file => {
			if (!file.name.endsWith('.gpx')) {
				message.error('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ GPX —Ñ–∞–π–ª')
				return Upload.LIST_IMPORT
			}
			setFileList([file])
			return false
		},
		fileList,
		maxCount: 1,
		accept: '.gpx',
	}

	return (
		<Card
			title={
				<Space>
					<PlusOutlined />
					<span>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∑–∞–µ–∑–¥</span>
				</Space>
			}
			bordered={false}
			style={{ width: '100%' }}
		>
			<Spin spinning={loading || uploading}>
				<Form
					form={form}
					layout='vertical'
					onFinish={handleSubmit}
					size='middle'
					disabled={loading || uploading}
				>
					<Space direction='vertical' size='middle' style={{ width: '100%' }}>
						{/* –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è */}
						<div style={{ display: 'flex', gap: '16px', flexWrap: 'wrap' }}>
							<Form.Item
								label='–î–∞—Ç–∞ –∑–∞–µ–∑–¥–∞'
								name='date'
								rules={[{ required: true, message: '–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É' }]}
								style={{ flex: 1, minWidth: '150px' }}
							>
								<DatePicker
									format='DD.MM.YYYY'
									style={{ width: '100%' }}
									disabledDate={current =>
										current && current > dayjs().endOf('day')
									}
								/>
							</Form.Item>

							<Form.Item
								label='–ú–∏–Ω—É—Ç—ã'
								name='minutes'
								rules={[
									{ required: true, message: '–í–≤–µ–¥–∏—Ç–µ –º–∏–Ω—É—Ç—ã' },
									{ type: 'number', min: 0, max: 59, message: '–û—Ç 0 –¥–æ 59' },
								]}
								style={{ width: '100px' }}
							>
								<InputNumber
									min={0}
									max={59}
									placeholder='0'
									style={{ width: '100%' }}
								/>
							</Form.Item>

							<Form.Item
								label='–°–µ–∫—É–Ω–¥—ã'
								name='seconds'
								rules={[
									{ required: true, message: '–í–≤–µ–¥–∏—Ç–µ —Å–µ–∫—É–Ω–¥—ã' },
									{ type: 'number', min: 0, max: 59, message: '–û—Ç 0 –¥–æ 59' },
								]}
								style={{ width: '100px' }}
							>
								<InputNumber
									min={0}
									max={59}
									placeholder='0'
									style={{ width: '100%' }}
								/>
							</Form.Item>
						</div>

						{/* –ú–æ–¥–µ–ª—å –ª—ã–∂ */}
						<Form.Item
							label='–ú–æ–¥–µ–ª—å –ª—ã–∂'
							name='skiModel'
							extra={
								autoFilledSkiModel
									? '–ú–æ–¥–µ–ª—å –∏–∑ –≤–∞—à–µ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è. –ú–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –¥–ª—è —ç—Ç–æ–≥–æ –∑–∞–µ–∑–¥–∞.'
									: '–£–∫–∞–∂–∏—Ç–µ –º–æ–¥–µ–ª—å –ª—ã–∂ –¥–ª—è —ç—Ç–æ–≥–æ –∑–∞–µ–∑–¥–∞'
							}
						>
							<Input
								placeholder='–ù–∞–ø—Ä–∏–º–µ—Ä: Fischer Speedmax'
								list='ski-models'
							/>
							<datalist id='ski-models'>
								<option value='Brados' />
								<option value='Fischer' />
								<option value='Rossignol' />
								<option value='Madshus' />
								<option value='Salomon' />
								<option value='Atomic' />
								<option value='Tisa' />
							</datalist>
						</Form.Item>

						{/* GPX —Ç—Ä–µ–∫ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π */}
						<div style={{ display: 'flex', gap: '16px', flexWrap: 'wrap' }}>
							<Form.Item
								label='GPX —Ç—Ä–µ–∫ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)'
								style={{ flex: 1, minWidth: '200px' }}
							>
								<Space
									direction='vertical'
									size='small'
									style={{ width: '100%' }}
								>
									<Upload {...uploadProps}>
										<Button icon={<UploadOutlined />}>
											{fileList.length > 0
												? fileList[0].name
												: '–í—ã–±–µ—Ä–∏—Ç–µ GPX —Ñ–∞–π–ª'}
										</Button>
									</Upload>

									<Text type='secondary'>
										{uploading
											? '–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞...'
											: '–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ç—Ä–µ–∫ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∑–∞–µ–∑–¥–∞'}
									</Text>
								</Space>
							</Form.Item>

							<Form.Item
								label='–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π'
								name='comment'
								style={{ flex: 1, minWidth: '200px' }}
							>
								<Input
									placeholder='–ü–æ–≥–æ–¥–∞, —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç—Ä–∞—Å—Å—ã...'
									maxLength={100}
								/>
							</Form.Item>
						</div>

						{/* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏ */}
						{fileList.length > 0 && (
							<Alert
								message='–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–µ–∑–¥–∞'
								description="–≠—Ç–æ—Ç –∑–∞–µ–∑–¥ –±—É–¥–µ—Ç –æ—Ç–º–µ—á–µ–Ω –∫–∞–∫ '–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–π' –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ GPX —Ç—Ä–µ–∫–∞."
								type='success'
								showIcon
								icon={<CheckCircleOutlined />}
							/>
						)}

						{/* –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ */}
						<Form.Item style={{ marginBottom: 0 }}>
							<Button
								type='primary'
								htmlType='submit'
								icon={<PlusOutlined />}
								loading={loading}
								disabled={uploading}
								size='large'
								block={isMobile}
								style={{
									backgroundColor: '#52c41a',
									borderColor: '#52c41a',
									height: '48px',
									fontSize: '16px',
								}}
							>
								{uploading
									? '–ó–∞–≥—Ä—É–∑–∫–∞ —Ç—Ä–µ–∫–∞...'
									: loading
									? '–î–æ–±–∞–≤–ª–µ–Ω–∏–µ...'
									: 'üéø –î–æ–±–∞–≤–∏—Ç—å –∑–∞–µ–∑–¥'}
							</Button>
						</Form.Item>

						{/* –ü–æ–¥—Å–∫–∞–∑–∫–∏ */}
						<Alert
							message='–ü–æ–¥—Å–∫–∞–∑–∫–∏'
							description={
								<Space
									direction='vertical'
									size='small'
									style={{ width: '100%' }}
								>
									<Text type='secondary'>
										‚Ä¢ GPX —Ñ–∞–π–ª—ã –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç –∑–∞–µ–∑–¥ –∏ –¥–æ–±–∞–≤–ª—è—é—Ç —Å—Ç–∞—Ç—É—Å
										"–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–π"
									</Text>
									<Text type='secondary'>
										‚Ä¢ –ú–æ–¥–µ–ª—å –ª—ã–∂ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–µ–∑–¥–∞ –æ—Ç–¥–µ–ª—å–Ω–æ
									</Text>
									<Text type='secondary'>
										‚Ä¢ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø–æ–º–æ–≥–∞–µ—Ç –∑–∞–ø–æ–º–Ω–∏—Ç—å —É—Å–ª–æ–≤–∏—è –∑–∞–µ–∑–¥–∞
									</Text>
								</Space>
							}
							type='info'
							showIcon
						/>
					</Space>
				</Form>
			</Spin>
		</Card>
	)
}
```

## üìÑ src/components/About.module.css
```
.aboutContainer {
  padding: 20px;
}

.section {
  margin-bottom: 24px;
  padding-bottom: 24px;
  border-bottom: 1px solid #f0f0f0;
}

.section:last-child {
  border-bottom: none;
  margin-bottom: 0;
  padding-bottom: 0;
}

.section h3 {
  color: #1890ff;
  margin-bottom: 12px;
  font-size: 18px;
}

.section p {
  color: #666;
  line-height: 1.6;
  margin-bottom: 12px;
}

.section ul {
  padding-left: 20px;
  color: #666;
  margin-bottom: 12px;
}

.section li {
  margin-bottom: 8px;
  line-height: 1.5;
}

.newsSection {
  margin-top: 32px;
}

.newsItem {
  padding: 16px 0;
  border-bottom: 1px solid #f0f0f0;
}

.newsItem:last-child {
  border-bottom: none;
  padding-bottom: 0;
}

.newsDate {
  font-size: 12px;
  color: #8c8c8c;
  margin-bottom: 4px;
}

.newsTitle {
  font-weight: 600;
  color: #1890ff;
  margin-bottom: 8px;
  font-size: 16px;
}

.newsContent {
  color: #666;
  line-height: 1.5;
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
@media (max-width: 768px) {
  .aboutContainer {
    padding: 12px;
  }
  
  .section {
    margin-bottom: 20px;
    padding-bottom: 20px;
  }
  
  .newsItem {
    padding: 12px 0;
  }
}


/* –°—Ç–∏–ª–∏ –¥–ª—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ */
.contactsSection {
  margin-top: 40px;
  padding-top: 24px;
  border-top: 1px solid #f0f0f0;
}

.telegramLink {
  color: #1890ff;
  font-weight: 600;
  text-decoration: none;
  transition: color 0.2s;
}

.telegramLink:hover {
  color: #40a9ff;
  text-decoration: underline;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π */
.techSection {
  margin-top: 48px;
  padding-top: 20px;
  border-top: 1px dashed #f0f0f0;
  text-align: center;
}

.techText {
  font-size: 12px;
  opacity: 0.6;
}

.telegramIcon {
  width: 16px;
  height: 16px;
  margin-right: 8px;
  fill: currentColor;
  vertical-align: middle;
}```

## üìÑ src/components/About.jsx
```
import React from 'react'
import { Card, Typography, List, Space } from 'antd'
import {
  InfoCircleOutlined,
  RocketOutlined,
  EyeOutlined,
  EyeInvisibleOutlined,
  CloudUploadOutlined,
  CodeOutlined,
  MessageOutlined,
  CalendarOutlined
} from '@ant-design/icons'
import styles from './About.module.css'

const { Title, Text, Paragraph } = Typography

export default function About() {
  return (
		<Card
			title={
				<Space>
					<InfoCircleOutlined />
					<span>–û –ø—Ä–æ–µ–∫—Ç–µ</span>
				</Space>
			}
			bordered={false}
		>
			<div className={styles.aboutContainer}>
				{/* –ß—Ç–æ —ç—Ç–æ? */}
				<div className={styles.section}>
					<Title level={4}>
						<RocketOutlined style={{ marginRight: '8px' }} />
						–ß—Ç–æ —ç—Ç–æ?
					</Title>
					<Paragraph>
						–õ—ã–∂–Ω—ã–π –†–µ–π—Ç–∏–Ω–≥ –î—Ä—É–∑–µ–π ‚Äî —ç—Ç–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤
						–ª—ã–∂–Ω—ã—Ö –∑–∞–µ–∑–¥–∞—Ö —Å—Ä–µ–¥–∏ –¥—Ä—É–∑–µ–π. –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ —Å–≤–æ–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏
						–ø—Ä–æ–≥—Ä–µ—Å—Å!
					</Paragraph>
				</div>

				{/* –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç? */}
				<div className={styles.section}>
					<Title level={4}>–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?</Title>
					<List
						size='small'
						dataSource={[
							'–î–æ–±–∞–≤–ª—è–π—Ç–µ –∑–∞–µ–∑–¥—ã ‚Äî –≤–≤–æ–¥–∏—Ç–µ –≤—Ä–µ–º—è –∏ –∑–∞–≥—Ä—É–∂–∞–π—Ç–µ GPX —Ç—Ä–µ–∫–∏',
							'–†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∑–∞–µ–∑–¥—ã ‚Äî –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –≤—Ä–µ–º—è, –º–æ–¥–µ–ª—å –ª—ã–∂, –¥–æ–±–∞–≤–ª—è–π—Ç–µ GPX —Ç—Ä–µ–∫–∏',
							'–°—Ä–∞–≤–Ω–∏–≤–∞–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã ‚Äî —Å–º–æ—Ç—Ä–∏—Ç–µ —Ç–∞–±–ª–∏—Ü—É –ª–∏–¥–µ—Ä–æ–≤',
							'–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–π—Ç–µ –∑–∞–µ–∑–¥—ã ‚Äî GPX —Ñ–∞–π–ª—ã –¥–æ–±–∞–≤–ª—è—é—Ç —Å—Ç–∞—Ç—É—Å "–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ"',
							'–ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–æ–≥—Ä–µ—Å—Å ‚Äî –æ—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ —É–ª—É—á—à–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤',
						]}
						renderItem={item => (
							<List.Item>
								<Text>‚Ä¢ {item}</Text>
							</List.Item>
						)}
					/>
				</div>

				{/* –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å */}
				<div className={styles.section}>
					<Title level={4}>–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</Title>
					<Paragraph>
						–í—ã –º–æ–∂–µ—Ç–µ –≤—ã–±—Ä–∞—Ç—å —É—Ä–æ–≤–µ–Ω—å –≤–∏–¥–∏–º–æ—Å—Ç–∏ —Å–≤–æ–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:
					</Paragraph>
					<List
						size='small'
						dataSource={[
							{
								icon: <EyeOutlined style={{ color: '#52c41a' }} />,
								title: '–ü—É–±–ª–∏—á–Ω—ã–π',
								desc: '–í—Å–µ –≤–∏–¥—è—Ç –≤–∞—à–µ –∏–º—è –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã',
							},
							{
								icon: <EyeInvisibleOutlined style={{ color: '#fa8c16' }} />,
								title: '–ê–Ω–æ–Ω–∏–º–Ω—ã–π',
								desc: '–í–∞—Å –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∫–∞–∫ "–õ—ã–∂–Ω–∏–∫ ‚ÑñX"',
							},
						]}
						renderItem={item => (
							<List.Item>
								<Space>
									{item.icon}
									<div>
										<Text strong>{item.title}</Text>
										<br />
										<Text type='secondary'>{item.desc}</Text>
									</div>
								</Space>
							</List.Item>
						)}
					/>
				</div>

				{/* –ù–æ–≤–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞ */}
				<div className={styles.newsSection}>
					<Title level={4}>
						<CalendarOutlined style={{ marginRight: '8px' }} />
						–ù–æ–≤–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
					</Title>

					<div className={styles.newsItem}>
						<div className={styles.newsDate}>27 –¥–µ–∫–∞–±—Ä—è 2025</div>
						<div className={styles.newsTitle}>
							–î–æ–±–∞–≤–ª–µ–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–µ–∑–¥–æ–≤
						</div>
						<div className={styles.newsContent}>
							–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–∏ –∑–∞–µ–∑–¥—ã: –æ–±–Ω–æ–≤–ª—è—Ç—å –≤—Ä–µ–º—è, –º–æ–¥–µ–ª—å
							–ª—ã–∂, –¥–æ–±–∞–≤–ª—è—Ç—å –∏–ª–∏ —É–¥–∞–ª—è—Ç—å GPX —Ç—Ä–µ–∫–∏. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–µ–∑–¥–∞ –º–æ–∂–Ω–æ
							—É–∫–∞–∑–∞—Ç—å —Å–≤–æ—é –º–æ–¥–µ–ª—å –ª—ã–∂.
						</div>
					</div>

					<div className={styles.newsItem}>
						<div className={styles.newsDate}>24 –¥–µ–∫–∞–±—Ä—è 2025</div>
						<div className={styles.newsTitle}>
							–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
						</div>
						<div className={styles.newsContent}>
							–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å, –∫–∞–∫ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤–∞—à–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã: –ø—É–±–ª–∏—á–Ω–æ –∏–ª–∏
							–∞–Ω–æ–Ω–∏–º–Ω–æ. –í –∞–Ω–æ–Ω–∏–º–Ω–æ–º —Ä–µ–∂–∏–º–µ –≤—ã –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç–µ—Å—å –∫–∞–∫ "–õ—ã–∂–Ω–∏–∫ ‚ÑñX".
						</div>
					</div>

					<div className={styles.newsItem}>
						<div className={styles.newsDate}>23 –¥–µ–∫–∞–±—Ä—è 2025</div>
						<div className={styles.newsTitle}>–ó–∞–≥—Ä—É–∑–∫–∞ GPX —Ç—Ä–µ–∫–æ–≤</div>
						<div className={styles.newsContent}>
							–î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–≥—Ä—É–∂–∞—Ç—å GPX —Ñ–∞–π–ª—ã –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
							–∑–∞–µ–∑–¥–æ–≤. –ó–∞–µ–∑–¥—ã —Å —Ç—Ä–µ–∫–∞–º–∏ –æ—Ç–º–µ—á–∞—é—Ç—Å—è –∫–∞–∫ "–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ".
							–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ —Å –∫–∏—Ä–∏–ª–ª–∏—á–µ—Å–∫–∏–º–∏ –∏–º–µ–Ω–∞–º–∏.
						</div>
					</div>

					<div className={styles.newsItem}>
						<div className={styles.newsDate}>21 –¥–µ–∫–∞–±—Ä—è 2025</div>
						<div className={styles.newsTitle}>–ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞</div>
						<div className={styles.newsContent}>
							–ü—Ä–æ–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º "–õ—ã–∂–Ω—ã–π –†–µ–π—Ç–∏–Ω–≥ –î—Ä—É–∑–µ–π".
						</div>
					</div>
				</div>

				{/* –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ */}

				{/* –ö–æ–Ω—Ç–∞–∫—Ç—ã */}
				{/* –ö–æ–Ω—Ç–∞–∫—Ç—ã - –æ—Ç–¥–µ–ª—å–Ω–æ —Å –æ—Ç—Å—Ç—É–ø–æ–º */}
				<div className={`${styles.section} ${styles.contactsSection}`}>
					<Title level={4}>
						<MessageOutlined style={{ marginRight: '8px' }} />
						–ö–æ–Ω—Ç–∞–∫—Ç—ã
					</Title>
					<Paragraph>
						<Space>
							–ï—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è? –î–ª—è —Å–≤—è–∑–∏: —Ç–µ–ª–µ–≥—Ä–∞–º
							<a
								href='https://t.me/titov_films'
								target='_blank'
								rel='noopener noreferrer'
								className={styles.telegramLink}
							>
								@titov_films
							</a>
						</Space>
					</Paragraph>
				</div>

				{/* –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ */}
				<div className={styles.techSection}>
					<Text type='secondary' className={styles.techText}>
						<CodeOutlined style={{ marginRight: '6px' }} />
						–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏: React ‚Ä¢ Ant Design ‚Ä¢ Supabase ‚Ä¢ Vercel
					</Text>
				</div>
			</div>
		</Card>
	)
}```

## üìÑ src/App.jsx
```
import React, { useState, useEffect } from 'react'
import { Layout, Tabs, Button, Card, Spin, message } from 'antd'
import {
	TrophyOutlined,
	PlusOutlined,
	InfoCircleOutlined,
	UserOutlined,
	LogoutOutlined,
	LoadingOutlined,
} from '@ant-design/icons'
import { supabase } from './shared/api/supabase'

// –ù–æ–≤—ã–µ –∏–º–ø–æ—Ä—Ç—ã –∏–∑ FSD —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
import { Auth } from './features/auth'
import { Profile } from './features/profile'
import { AddTimeForm } from './features/lap-times'
import Leaderboard from './widgets/Leaderboard/ui/Leaderboard'
import { About } from './widgets/about'
import Map from './widgets/Map'
import { EnvironmentOutlined } from '@ant-design/icons'

import './styles/base.css'
import './styles/components.css'
import './styles/utilities.css'
import './styles/App.css'

// ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ App.jsx (–Ω—É–∂–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç—å –∏–∑ backup)
import './styles/utilities.css'
import './styles/App.css'

const { Header: AntHeader, Content, Footer } = Layout
const { TabPane } = Tabs

function App() {
	const [user, setUser] = useState(null)
	const [times, setTimes] = useState([])
	const [loading, setLoading] = useState(true)
	const [activeTab, setActiveTab] = useState(() => {
		const saved = localStorage.getItem('ski-track-active-tab')
		return saved || 'leaderboard'
	})
	const [isMobile, setIsMobile] = useState(false)

	// –û–ø—Ä–µ–¥–µ–ª—è–µ–º –º–æ–±–∏–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
	useEffect(() => {
		const checkMobile = () => {
			setIsMobile(window.innerWidth <= 768)
		}

		checkMobile()
		window.addEventListener('resize', checkMobile)

		return () => window.removeEventListener('resize', checkMobile)
	}, [])

	useEffect(() => {
		supabase.auth.getSession().then(({ data: { session } }) => {
			setUser(session?.user || null)
			setLoading(false)

			// –í–û–°–°–¢–ê–ù–ê–í–õ–ò–í–ê–ï–ú –∞–∫—Ç–∏–≤–Ω—É—é –≤–∫–ª–∞–¥–∫—É –∏–∑ localStorage
			const savedTab = localStorage.getItem('ski-track-active-tab')
			if (
				savedTab &&
				['leaderboard', 'map', 'add', 'profile', 'about'].includes(savedTab)
			) {
				setActiveTab(savedTab)
			}
		})

		const {
			data: { subscription },
		} = supabase.auth.onAuthStateChange((_event, session) => {
			setUser(session?.user || null)
		})

		return () => subscription.unsubscribe()
	}, [])

	useEffect(() => {
		// –ó–∞–≥—Ä—É–∂–∞–µ–º –∑–∞–µ–∑–¥—ã –í–°–ï–ì–î–ê, –¥–∞–∂–µ –¥–ª—è –≥–æ—Å—Ç–µ–π
		fetchTimes()
	}, [user]) // –î–æ–±–∞–≤–ª—è–µ–º user –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

	async function fetchTimes() {
		try {
			let query = supabase
				.from('lap_times')
				.select('*')
				.order('time_seconds', { ascending: true })

			const { data, error } = await query

			if (error) throw error

			if (user) {
				const { data: profile } = await supabase
					.from('profiles')
					.select('visibility_preference')
					.eq('id', user.id)
					.single()

				if (profile?.visibility_preference === 'private') {
					setTimes(data.filter(time => time.user_id === user.id))
				} else {
					setTimes(data)
				}
			} else {
				setTimes(data)
			}
		} catch (error) {
			console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞–µ–∑–¥–æ–≤:', error)
			message.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞–µ–∑–¥–æ–≤')
		}
	}

	async function handleLogout() {
		await supabase.auth.signOut()
		setUser(null)
		message.success('–í—ã –≤—ã—à–ª–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã')
	}

	if (loading) {
		return (
			<div
				style={{
					textAlign: 'center',
					padding: '50px 20px',
					minHeight: '100vh',
					display: 'flex',
					flexDirection: 'column',
					justifyContent: 'center',
					background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
				}}
			>
				<Spin
					indicator={
						<LoadingOutlined style={{ fontSize: 48, color: '#fff' }} spin />
					}
				/>
				<p style={{ marginTop: '20px', color: '#fff' }}>–ó–∞–≥—Ä—É–∑–∫–∞...</p>
			</div>
		)
	}
// –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
	// if (!user) {
	// 	return (
	// 		<div
	// 			style={{
	// 				minHeight: '100vh',
	// 				padding: isMobile ? '10px' : '20px',
	// 				background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
	// 				display: 'flex',
	// 				alignItems: 'center',
	// 				justifyContent: 'center',
	// 			}}
	// 		>
	// 			<div
	// 				style={{
	// 					width: '100%',
	// 					maxWidth: '500px',
	// 					padding: isMobile ? '15px' : '30px',
	// 				}}
	// 			>
	// 				<Auth onLoginSuccess={setUser} />
	// 			</div>
	// 		</div>
	// 	)
	// }

	const handleTabChange = key => {
		setActiveTab(key)
		localStorage.setItem('ski-track-active-tab', key)
	}

	return (
		<Layout
			className='layout'
			style={{
				minHeight: '100vh',
				background: isMobile
					? '#fff'
					: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
			}}
		>
			<AntHeader
				style={{
					background: isMobile ? '#fff' : '#fff',
					padding: isMobile ? '0 10px' : '0 20px',
					boxShadow: '0 2px 8px rgba(0,0,0,0.1)',
					display: 'flex',
					justifyContent: 'space-between',
					alignItems: 'center',
					height: isMobile ? '56px' : '64px',
				}}
			>
				<div style={{ display: 'flex', alignItems: 'center' }}>
					<h1
						style={{
							margin: 0,
							fontSize: isMobile ? '16px' : '24px',
							color: isMobile ? '#1890ff' : '#000',
							whiteSpace: 'nowrap',
							overflow: 'hidden',
							textOverflow: 'ellipsis',
							maxWidth: isMobile ? '200px' : 'none',
						}}
					>
						{isMobile
							? 'üéø –†–µ—Ç–∏–Ω–≥ –õ–ë–ö –º–∞–ª—ã–π –∫—Ä—É–≥	'
							: 'üéø –õ—ã–∂–Ω—ã–π –†–µ–π—Ç–∏–Ω–≥ (–õ–ë–ö, –º–∞–ª—ã–π –∫—Ä—É–≥)'}
					</h1>
				</div>

				<div
					style={{
						display: 'flex',
						alignItems: 'center',
						gap: isMobile ? '6px' : '10px',
					}}
				>
					{user ? (
						// –î–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
						<>
							<Button
								type='text'
								icon={<UserOutlined />}
								onClick={() => setActiveTab('profile')}
								style={{
									display: 'flex',
									alignItems: 'center',
									padding: isMobile ? '4px 8px' : '8px 12px',
									fontSize: isMobile ? '12px' : '14px',
								}}
							>
								{!isMobile && user.email}
							</Button>
							<Button
								type='text'
								icon={<LogoutOutlined />}
								onClick={handleLogout}
								danger
								size={isMobile ? 'small' : 'middle'}
							>
								{!isMobile && '–í—ã–π—Ç–∏'}
							</Button>
						</>
					) : (
						// –î–ª—è –≥–æ—Å—Ç–µ–π
						<>
							<Button
								type='text'
								icon={<UserOutlined />}
								onClick={() => setActiveTab('profile')}
								style={{
									display: 'flex',
									alignItems: 'center',
									padding: isMobile ? '4px 8px' : '8px 12px',
									fontSize: isMobile ? '12px' : '14px',
								}}
							>
								{!isMobile && '–ì–æ—Å—Ç—å'}
							</Button>
							<Button
								type='primary'
								onClick={() => setActiveTab('profile')}
								size={isMobile ? 'small' : 'middle'}
							>
								–í–æ–π—Ç–∏
							</Button>
						</>
					)}
				</div>
			</AntHeader>

			<Content
				style={{
					padding: isMobile ? '10px' : '20px',
					background: isMobile ? '#fff' : 'transparent',
				}}
			>
				{!isMobile ? (
					<Card
						style={{
							minHeight: 'calc(100vh - 180px)',
							borderRadius: '12px',
							boxShadow: '0 10px 30px rgba(0,0,0,0.15)',
						}}
					>
						<Tabs
							activeKey={activeTab}
							onChange={handleTabChange}
							items={[
								{
									key: 'leaderboard',
									label: (
										<span>
											<TrophyOutlined /> –¢–∞–±–ª–∏—Ü–∞
										</span>
									),
								},

								{
									key: 'add',
									label: (
										<span>
											<PlusOutlined /> –î–æ–±–∞–≤–∏—Ç—å
										</span>
									),
								},
								{
									key: 'map', // –ù–û–í–´–ô –ö–õ–Æ–ß
									label: (
										<span>
											<EnvironmentOutlined /> –ö–∞—Ä—Ç–∞
										</span>
									),
								},
								{
									key: 'about',
									label: (
										<span>
											<InfoCircleOutlined /> –û –ø—Ä–æ–µ–∫—Ç–µ
										</span>
									),
								},
							]}
						/>
						<div style={{ marginTop: '20px' }}>
							{activeTab === 'leaderboard' && (
								<Leaderboard
									times={times}
									user={user}
									onTimeUpdated={fetchTimes}
								/>
							)}
							{activeTab === 'map' && <Map user={user} />}
							{activeTab === 'add' && (
								<AddTimeForm user={user} onTimeAdded={fetchTimes} />
							)}
							{activeTab === 'profile' && user && (
								<Profile user={user} onUpdate={fetchTimes} />
							)}
							{activeTab === 'profile' && !user && (
								<Auth onLoginSuccess={setUser} />
							)}
							{activeTab === 'about' && <About />}
						</div>
					</Card>
				) : (
					// –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –±–µ–∑ –ª–∏—à–Ω–∏—Ö –æ–±–µ—Ä—Ç–æ–∫
					<div>
						<Tabs
							activeKey={activeTab}
							onChange={handleTabChange}
							items={[
								{
									key: 'leaderboard',
									label: (
										<span>
											<TrophyOutlined /> –¢–∞–±–ª–∏—Ü–∞
										</span>
									),
								},
								{
									key: 'map', // –ù–û–í–´–ô –ö–õ–Æ–ß
									label: (
										<span>
											<EnvironmentOutlined /> –ö–∞—Ä—Ç–∞
										</span>
									),
								},
								{
									key: 'add',
									label: (
										<span>
											<PlusOutlined /> –î–æ–±–∞–≤–∏—Ç—å
										</span>
									),
								},
								{
									key: 'about',
									label: (
										<span>
											<InfoCircleOutlined /> –û –ø—Ä–æ–µ–∫—Ç–µ
										</span>
									),
								},
							]}
							style={{
								marginBottom: '10px',
							}}
						/>

						<div>
							{activeTab === 'leaderboard' && (
								<Leaderboard
									times={times}
									user={user}
									onTimeUpdated={fetchTimes}
								/>
							)}
							{activeTab === 'add' && (
								<AddTimeForm user={user} onTimeAdded={fetchTimes} />
							)}
							{activeTab === 'profile' && (
								<Profile user={user} onUpdate={fetchTimes} />
							)}
							{activeTab === 'about' && <About />}
						</div>
					</div>
				)}
			</Content>

			{!isMobile && (
				<Footer
					style={{
						textAlign: 'center',
						background: '#fff',
						padding: '15px 20px',
					}}
				>
					–õ—ã–∂–Ω—ã–π –†–µ–π—Ç–∏–Ω–≥ ¬©2025
				</Footer>
			)}
		</Layout>
	)
}

export default App
```

## üìÑ src/lib/supabase.js
```
import { createClient } from '@supabase/supabase-js'

const supabaseUrl = 'https://xsqelqxwthjufdwfdecf.supabase.co'
const supabaseKey =
	process.env.REACT_APP_SUPABASE_ANON_KEY ||
	'sb_publishable_XTAAbOUtNz-UyekvCQMB-A_dzlGjS1O'

export const supabase = createClient(supabaseUrl, supabaseKey)
```

## üìÑ src/widgets/Leaderboard/ui/Leaderboard.jsx
```
import React, { useState, useEffect } from 'react'
import { Table, Tag, Tooltip, Button, Modal, message } from 'antd'
import {
	EditOutlined,
	FileTextOutlined,
	EyeOutlined,
	TrophyOutlined,
} from '@ant-design/icons'
import { supabase } from '../../../shared/api/supabase'
import EditTimeForm from '../../../features/lap-times/ui/EditTimeForm'

const Leaderboard = ({ times, user, onTimeUpdated, isMobile = false }) => {
	const [anonymousNumbers, setAnonymousNumbers] = useState({})
	const [userVisibility, setUserVisibility] = useState('public')
	const [skierProfiles, setSkierProfiles] = useState({})
	const [editingTime, setEditingTime] = useState(null)
	const [isEditModalOpen, setIsEditModalOpen] = useState(false)
	const [loading, setLoading] = useState(false)

	// –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
	useEffect(() => {
		async function loadProfiles() {
			if (times.length === 0) return

			const userIds = [...new Set(times.map(time => time.user_id))]

			const { data: profiles } = await supabase
				.from('profiles')
				.select('id, username, visibility_preference')
				.in('id', userIds)

			if (profiles) {
				const profilesMap = {}
				profiles.forEach(profile => {
					profilesMap[profile.id] = profile
				})
				setSkierProfiles(profilesMap)

				// –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–º–µ—Ä–∞ –¥–ª—è –∞–Ω–æ–Ω–∏–º–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
				const anonymousMap = {}
				const anonymousUsers = profiles
					.filter(p => p.visibility_preference === 'anonymous')
					.map(p => {
						const userTimes = times.filter(t => t.user_id === p.id)
						const bestTime =
							userTimes.length > 0
								? Math.min(...userTimes.map(t => t.time_seconds))
								: Infinity
						return { id: p.id, bestTime }
					})
					.sort((a, b) => a.bestTime - b.bestTime)

				anonymousUsers.forEach((user, index) => {
					anonymousMap[user.id] = index + 1
				})

				setAnonymousNumbers(anonymousMap)
			}
		}

		loadProfiles()
	}, [times])

	// –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
	useEffect(() => {
		async function loadCurrentUserVisibility() {
			if (user) {
				const { data } = await supabase
					.from('profiles')
					.select('visibility_preference')
					.eq('id', user.id)
					.single()

				if (data) {
					setUserVisibility(data.visibility_preference || 'public')
				}
			}
		}
		loadCurrentUserVisibility()
	}, [user])

	// –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
	const formatTime = seconds => {
		const mins = Math.floor(seconds / 60)
		const secs = seconds % 60
		return `${mins}:${secs.toString().padStart(2, '0')}`
	}

	// –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–≥–æ –∏–º–µ–Ω–∏
	const getDisplayName = time => {
		const profile = skierProfiles[time.user_id]
		const isCurrentUser = user && time.user_id === user.id

		if (isCurrentUser && userVisibility === 'private') {
			return '–í—ã'
		}

		if (profile?.visibility_preference === 'anonymous') {
			const number = anonymousNumbers[time.user_id] || '?'
			return `–õ—ã–∂–Ω–∏–∫ ‚Ññ${number}`
		}

		const name = profile?.username || time.user_name || '–ì–æ—Å—Ç—å'
		// –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–ª–∏–Ω—É –∏–º–µ–Ω–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
		if (isMobile && name.length > 15) {
			return name.substring(0, 15) + '...'
		}
		return name
	}

	// –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞–µ–∑–¥–æ–≤
	const filteredTimes = times.filter(time => {
		if (!user) return true

		const profile = skierProfiles[time.user_id]
		const isCurrentUser = time.user_id === user.id

		if (isCurrentUser) return true

		if (userVisibility === 'private') return false

		return true
	})

	// –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
	const handleEditClick = time => {
		setEditingTime(time)
		setIsEditModalOpen(true)
	}

	const handleUpdateSuccess = () => {
		setIsEditModalOpen(false)
		setEditingTime(null)
		onTimeUpdated?.()
		message.success('–ó–∞–µ–∑–¥ –æ–±–Ω–æ–≤–ª–µ–Ω')
	}

	const handleDeleteTime = async timeId => {
		Modal.confirm({
			title: '–£–¥–∞–ª–∏—Ç—å –∑–∞–µ–∑–¥?',
			content: '–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å. –£–¥–∞–ª–∏—Ç—å –∑–∞–µ–∑–¥?',
			okText: '–î–∞, —É–¥–∞–ª–∏—Ç—å',
			cancelText: '–û—Ç–º–µ–Ω–∞',
			okType: 'danger',
			async onOk() {
				try {
					setLoading(true)
					const { error } = await supabase
						.from('lap_times')
						.delete()
						.eq('id', timeId)

					if (error) throw error

					message.success('–ó–∞–µ–∑–¥ —É–¥–∞–ª–µ–Ω')
					onTimeUpdated?.()
				} catch (error) {
					console.error('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è:', error)
					message.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∑–∞–µ–∑–¥–∞')
				} finally {
					setLoading(false)
				}
			},
		})
	}

	// –ö–æ–ª–æ–Ω–∫–∏ —Ç–∞–±–ª–∏—Ü—ã
	const columns = [
		{
			title: '#',
			dataIndex: 'position',
			key: 'position',
			width: 40,
			align: 'center',
			render: (_, __, index) => index + 1,
		},
		{
			title: '–õ—ã–∂–Ω–∏–∫',
			dataIndex: 'user_id',
			key: 'skier',
			width: isMobile ? 120 : 150,
			render: (userId, record) => {
				const displayName = getDisplayName(record)
				const isCurrentUser = user && userId === user.id

				return (
					<div style={{ display: 'flex', alignItems: 'center', gap: 4 }}>
						<span
							style={{
								fontWeight: isCurrentUser ? 600 : 400,
								color: isCurrentUser ? '#1890ff' : '#000',
							}}
						>
							{displayName}
						</span>
						{isCurrentUser && (
							<Tag color='blue' style={{ fontSize: '10px', padding: '0 4px' }}>
								–≤—ã
							</Tag>
						)}
					</div>
				)
			},
		},
		{
			title: '–í—Ä–µ–º—è',
			dataIndex: 'time_seconds',
			key: 'time',
			width: 70,
			align: 'center',
			render: seconds => (
				<Tag color='green' style={{ margin: 0, fontWeight: 600 }}>
					{formatTime(seconds)}
				</Tag>
			),
		},
		{
			title: '–õ—ã–∂–∏',
			dataIndex: 'ski_model',
			key: 'ski_model',
			width: isMobile ? 100 : 120,
			render: model =>
				model ? (
					<Tag color='geekblue' style={{ fontSize: '11px' }}>
						{model.length > 12 ? model.substring(0, 12) + '...' : model}
					</Tag>
				) : (
					<span style={{ color: '#bfbfbf' }}>‚Äî</span>
				),
		},
		{
			title: '–°—Ç–∞—Ç—É—Å',
			dataIndex: 'verified',
			key: 'verified',
			width: 50,
			align: 'center',
			render: verified =>
				verified ? (
					<Tooltip title='–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ GPX'>
						<Tag color='success' style={{ cursor: 'help', margin: 0 }}>
							‚úì
						</Tag>
					</Tooltip>
				) : (
					<Tooltip title='–ë–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è'>
						<Tag color='warning' style={{ cursor: 'help', margin: 0 }}>
							?
						</Tag>
					</Tooltip>
				),
		},
		...(!isMobile
			? [
					{
						title: '–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π',
						dataIndex: 'comment',
						key: 'comment',
						width: 150,
						render: comment =>
							comment ? (
								<Tooltip title={comment}>
									<span
										style={{
											display: 'inline-block',
											maxWidth: '100%',
											overflow: 'hidden',
											textOverflow: 'ellipsis',
											whiteSpace: 'nowrap',
											cursor: 'help',
										}}
									>
										<FileTextOutlined /> {comment}
									</span>
								</Tooltip>
							) : (
								<span style={{ color: '#bfbfbf' }}>‚Äî</span>
							),
					},
			  ]
			: []),
		{
			title: '–¢—Ä–µ–∫',
			dataIndex: 'gpx_track_url',
			key: 'track',
			width: 70,
			align: 'center',
			render: (url, record) => (
				<div style={{ display: 'flex', gap: 4, justifyContent: 'center' }}>
					{url && (
						<Tooltip title='–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç—Ä–µ–∫'>
							<Button
								type='text'
								icon={<EyeOutlined />}
								size='small'
								href={url}
								target='_blank'
								rel='noopener noreferrer'
							/>
						</Tooltip>
					)}
					{user && record.user_id === user.id && (
						<Tooltip title='–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å'>
							<Button
								type='text'
								icon={<EditOutlined />}
								size='small'
								onClick={() => handleEditClick(record)}
							/>
						</Tooltip>
					)}
				</div>
			),
		},
		{
			title: '–î–∞—Ç–∞',
			dataIndex: 'date',
			key: 'date',
			width: 90,
			render: date =>
				date ? (
					<span style={{ fontSize: '12px', whiteSpace: 'nowrap' }}>
						{new Date(date).toLocaleDateString('ru-RU')}
					</span>
				) : null,
		},
	]

	// –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
	const stats = {
		total: filteredTimes.length,
		verified: filteredTimes.filter(t => t.verified).length,
		participants: new Set(filteredTimes.map(t => t.user_id)).size,
	}

	return (
		<div>
			{/* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–µ–∂–∏–º–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ */}
			{user && userVisibility === 'private' && (
				<div
					style={{
						background: '#fffbe6',
						border: '1px solid #ffe58f',
						borderRadius: '6px',
						padding: '8px 12px',
						marginBottom: '16px',
						fontSize: '14px',
						color: '#d48806',
					}}
				>
					üîí –†–µ–∂–∏–º –ø—Ä–æ—Å–º–æ—Ç—Ä–∞: <strong>–¢–æ–ª—å–∫–æ —Å–≤–æ–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</strong>
				</div>
			)}

			{/* –¢–∞–±–ª–∏—Ü–∞ */}
			<Table
				columns={columns}
				dataSource={filteredTimes}
				rowKey='id'
				pagination={{
					pageSize: 20,
					showSizeChanger: true,
					showQuickJumper: true,
					size: isMobile ? 'small' : 'default',
				}}
				size={isMobile ? 'small' : 'middle'}
				scroll={isMobile ? { x: 600 } : undefined}
				locale={{ emptyText: '–ü–æ–∫–∞ –Ω–µ—Ç –∑–∞–µ–∑–¥–æ–≤. –ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º!' }}
				footer={() => (
					<div
						style={{
							display: 'flex',
							justifyContent: 'space-between',
							fontSize: '12px',
							color: '#666',
							padding: '8px 0',
						}}
					>
						<span>–í—Å–µ–≥–æ: {stats.total} –∑–∞–µ–∑–¥–æ–≤</span>
						<span>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ: {stats.verified}</span>
						<span>–£—á–∞—Å—Ç–Ω–∏–∫–æ–≤: {stats.participants}</span>
					</div>
				)}
			/>



			{/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è */}
			{editingTime && (
				<Modal
					title='–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–µ–∑–¥'
					open={isEditModalOpen}
					onCancel={() => {
						setIsEditModalOpen(false)
						setEditingTime(null)
					}}
					footer={null}
					width={isMobile ? '90%' : 600}
					destroyOnClose
				>
					<EditTimeForm
						time={editingTime}
						onUpdate={handleUpdateSuccess}
						onDelete={handleDeleteTime}
						onClose={() => {
							setIsEditModalOpen(false)
							setEditingTime(null)
						}}
					/>
				</Modal>
			)}
		</div>
	)
}

export default Leaderboard
```

## üìÑ src/widgets/Leaderboard/ui/Leaderboard.module.css
```
/* –°—Ç–∏–ª–∏ –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã –ª–∏–¥–µ—Ä–æ–≤ */
.leaderboardContainer {
  width: 100%;
  overflow-x: auto;
}
```

## üìÑ src/widgets/Leaderboard/index.js
```
export { default as Leaderboard } from "./ui/Leaderboard"
```

## üìÑ src/widgets/about/ui/About.module.css
```
.aboutContainer {
  padding: 20px;
}

.section {
  margin-bottom: 24px;
  padding-bottom: 24px;
  border-bottom: 1px solid #f0f0f0;
}

.section:last-child {
  border-bottom: none;
  margin-bottom: 0;
  padding-bottom: 0;
}

.section h3 {
  color: #1890ff;
  margin-bottom: 12px;
  font-size: 18px;
}

.section p {
  color: #666;
  line-height: 1.6;
  margin-bottom: 12px;
}

.section ul {
  padding-left: 20px;
  color: #666;
  margin-bottom: 12px;
}

.section li {
  margin-bottom: 8px;
  line-height: 1.5;
}

.newsSection {
  margin-top: 32px;
}

.newsItem {
  padding: 16px 0;
  border-bottom: 1px solid #f0f0f0;
}

.newsItem:last-child {
  border-bottom: none;
  padding-bottom: 0;
}

.newsDate {
  font-size: 12px;
  color: #8c8c8c;
  margin-bottom: 4px;
}

.newsTitle {
  font-weight: 600;
  color: #1890ff;
  margin-bottom: 8px;
  font-size: 16px;
}

.newsContent {
  color: #666;
  line-height: 1.5;
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
@media (max-width: 768px) {
  .aboutContainer {
    padding: 12px;
  }
  
  .section {
    margin-bottom: 20px;
    padding-bottom: 20px;
  }
  
  .newsItem {
    padding: 12px 0;
  }
}


/* –°—Ç–∏–ª–∏ –¥–ª—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ */
.contactsSection {
  margin-top: 40px;
  padding-top: 24px;
  border-top: 1px solid #f0f0f0;
}

.telegramLink {
  color: #1890ff;
  font-weight: 600;
  text-decoration: none;
  transition: color 0.2s;
}

.telegramLink:hover {
  color: #40a9ff;
  text-decoration: underline;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π */
.techSection {
  margin-top: 48px;
  padding-top: 20px;
  border-top: 1px dashed #f0f0f0;
  text-align: center;
}

.techText {
  font-size: 12px;
  opacity: 0.6;
}

.telegramIcon {
  width: 16px;
  height: 16px;
  margin-right: 8px;
  fill: currentColor;
  vertical-align: middle;
}```

## üìÑ src/widgets/about/ui/About.jsx
```
import React from 'react'
import { Card, Typography, List, Space } from 'antd'
import {
  InfoCircleOutlined,
  RocketOutlined,
  EyeOutlined,
  EyeInvisibleOutlined,
  CloudUploadOutlined,
  CodeOutlined,
  MessageOutlined,
  CalendarOutlined
} from '@ant-design/icons'
import styles from './About.module.css'

const { Title, Text, Paragraph } = Typography

export default function About() {
  return (
		<Card
			title={
				<Space>
					<InfoCircleOutlined />
					<span>–û –ø—Ä–æ–µ–∫—Ç–µ</span>
				</Space>
			}
			bordered={false}
		>
			<div className={styles.aboutContainer}>
				{/* –ß—Ç–æ —ç—Ç–æ? */}
				<div className={styles.section}>
					<Title level={4}>
						<RocketOutlined style={{ marginRight: '8px' }} />
						–ß—Ç–æ —ç—Ç–æ?
					</Title>
					<Paragraph>
						–õ—ã–∂–Ω—ã–π –†–µ–π—Ç–∏–Ω–≥ –î—Ä—É–∑–µ–π ‚Äî —ç—Ç–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤
						–ª—ã–∂–Ω—ã—Ö –∑–∞–µ–∑–¥–∞—Ö —Å—Ä–µ–¥–∏ –¥—Ä—É–∑–µ–π. –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ —Å–≤–æ–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏
						–ø—Ä–æ–≥—Ä–µ—Å—Å!
					</Paragraph>
				</div>

				{/* –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç? */}
				<div className={styles.section}>
					<Title level={4}>–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?</Title>
					<List
						size='small'
						dataSource={[
							'–î–æ–±–∞–≤–ª—è–π—Ç–µ –∑–∞–µ–∑–¥—ã ‚Äî –≤–≤–æ–¥–∏—Ç–µ –≤—Ä–µ–º—è –∏ –∑–∞–≥—Ä—É–∂–∞–π—Ç–µ GPX —Ç—Ä–µ–∫–∏',
							'–†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∑–∞–µ–∑–¥—ã ‚Äî –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –≤—Ä–µ–º—è, –º–æ–¥–µ–ª—å –ª—ã–∂, –¥–æ–±–∞–≤–ª—è–π—Ç–µ GPX —Ç—Ä–µ–∫–∏',
							'–°—Ä–∞–≤–Ω–∏–≤–∞–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã ‚Äî —Å–º–æ—Ç—Ä–∏—Ç–µ —Ç–∞–±–ª–∏—Ü—É –ª–∏–¥–µ—Ä–æ–≤',
							'–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–π—Ç–µ –∑–∞–µ–∑–¥—ã ‚Äî GPX —Ñ–∞–π–ª—ã –¥–æ–±–∞–≤–ª—è—é—Ç —Å—Ç–∞—Ç—É—Å "–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ"',
							'–ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–æ–≥—Ä–µ—Å—Å ‚Äî –æ—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ —É–ª—É—á—à–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤',
						]}
						renderItem={item => (
							<List.Item>
								<Text>‚Ä¢ {item}</Text>
							</List.Item>
						)}
					/>
				</div>

				{/* –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å */}
				<div className={styles.section}>
					<Title level={4}>–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</Title>
					<Paragraph>
						–í—ã –º–æ–∂–µ—Ç–µ –≤—ã–±—Ä–∞—Ç—å —É—Ä–æ–≤–µ–Ω—å –≤–∏–¥–∏–º–æ—Å—Ç–∏ —Å–≤–æ–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:
					</Paragraph>
					<List
						size='small'
						dataSource={[
							{
								icon: <EyeOutlined style={{ color: '#52c41a' }} />,
								title: '–ü—É–±–ª–∏—á–Ω—ã–π',
								desc: '–í—Å–µ –≤–∏–¥—è—Ç –≤–∞—à–µ –∏–º—è –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã',
							},
							{
								icon: <EyeInvisibleOutlined style={{ color: '#fa8c16' }} />,
								title: '–ê–Ω–æ–Ω–∏–º–Ω—ã–π',
								desc: '–í–∞—Å –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∫–∞–∫ "–õ—ã–∂–Ω–∏–∫ ‚ÑñX"',
							},
						]}
						renderItem={item => (
							<List.Item>
								<Space>
									{item.icon}
									<div>
										<Text strong>{item.title}</Text>
										<br />
										<Text type='secondary'>{item.desc}</Text>
									</div>
								</Space>
							</List.Item>
						)}
					/>
				</div>

				{/* –ù–æ–≤–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞ */}
				<div className={styles.newsSection}>
					<Title level={4}>
						<CalendarOutlined style={{ marginRight: '8px' }} />
						–ù–æ–≤–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
					</Title>

					<div className={styles.newsItem}>
						<div className={styles.newsDate}>27 –¥–µ–∫–∞–±—Ä—è 2025</div>
						<div className={styles.newsTitle}>
							–î–æ–±–∞–≤–ª–µ–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–µ–∑–¥–æ–≤
						</div>
						<div className={styles.newsContent}>
							–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–∏ –∑–∞–µ–∑–¥—ã: –æ–±–Ω–æ–≤–ª—è—Ç—å –≤—Ä–µ–º—è, –º–æ–¥–µ–ª—å
							–ª—ã–∂, –¥–æ–±–∞–≤–ª—è—Ç—å –∏–ª–∏ —É–¥–∞–ª—è—Ç—å GPX —Ç—Ä–µ–∫–∏. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–µ–∑–¥–∞ –º–æ–∂–Ω–æ
							—É–∫–∞–∑–∞—Ç—å —Å–≤–æ—é –º–æ–¥–µ–ª—å –ª—ã–∂.
						</div>
					</div>

					<div className={styles.newsItem}>
						<div className={styles.newsDate}>24 –¥–µ–∫–∞–±—Ä—è 2025</div>
						<div className={styles.newsTitle}>
							–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
						</div>
						<div className={styles.newsContent}>
							–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å, –∫–∞–∫ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤–∞—à–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã: –ø—É–±–ª–∏—á–Ω–æ –∏–ª–∏
							–∞–Ω–æ–Ω–∏–º–Ω–æ. –í –∞–Ω–æ–Ω–∏–º–Ω–æ–º —Ä–µ–∂–∏–º–µ –≤—ã –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç–µ—Å—å –∫–∞–∫ "–õ—ã–∂–Ω–∏–∫ ‚ÑñX".
						</div>
					</div>

					<div className={styles.newsItem}>
						<div className={styles.newsDate}>23 –¥–µ–∫–∞–±—Ä—è 2025</div>
						<div className={styles.newsTitle}>–ó–∞–≥—Ä—É–∑–∫–∞ GPX —Ç—Ä–µ–∫–æ–≤</div>
						<div className={styles.newsContent}>
							–î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–≥—Ä—É–∂–∞—Ç—å GPX —Ñ–∞–π–ª—ã –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
							–∑–∞–µ–∑–¥–æ–≤. –ó–∞–µ–∑–¥—ã —Å —Ç—Ä–µ–∫–∞–º–∏ –æ—Ç–º–µ—á–∞—é—Ç—Å—è –∫–∞–∫ "–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ".
							–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ —Å –∫–∏—Ä–∏–ª–ª–∏—á–µ—Å–∫–∏–º–∏ –∏–º–µ–Ω–∞–º–∏.
						</div>
					</div>

					<div className={styles.newsItem}>
						<div className={styles.newsDate}>21 –¥–µ–∫–∞–±—Ä—è 2025</div>
						<div className={styles.newsTitle}>–ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞</div>
						<div className={styles.newsContent}>
							–ü—Ä–æ–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º "–õ—ã–∂–Ω—ã–π –†–µ–π—Ç–∏–Ω–≥ –î—Ä—É–∑–µ–π".
						</div>
					</div>
				</div>

				{/* –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ */}

				{/* –ö–æ–Ω—Ç–∞–∫—Ç—ã */}
				{/* –ö–æ–Ω—Ç–∞–∫—Ç—ã - –æ—Ç–¥–µ–ª—å–Ω–æ —Å –æ—Ç—Å—Ç—É–ø–æ–º */}
				<div className={`${styles.section} ${styles.contactsSection}`}>
					<Title level={4}>
						<MessageOutlined style={{ marginRight: '8px' }} />
						–ö–æ–Ω—Ç–∞–∫—Ç—ã
					</Title>
					<Paragraph>
						<Space>
							–ï—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è? –î–ª—è —Å–≤—è–∑–∏: —Ç–µ–ª–µ–≥—Ä–∞–º
							<a
								href='https://t.me/titov_films'
								target='_blank'
								rel='noopener noreferrer'
								className={styles.telegramLink}
							>
								@titov_films
							</a>
						</Space>
					</Paragraph>
				</div>

				{/* –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ */}
				<div className={styles.techSection}>
					<Text type='secondary' className={styles.techText}>
						<CodeOutlined style={{ marginRight: '6px' }} />
						–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏: React ‚Ä¢ Ant Design ‚Ä¢ Supabase ‚Ä¢ Vercel
					</Text>
				</div>
			</div>
		</Card>
	)
}```

## üìÑ src/widgets/about/index.js
```
export { default as About } from "./ui/About"
```

## üìÑ src/widgets/Map/ui/GpxLayer.jsx
```
import React, { useEffect, useState } from 'react'
import L from 'leaflet'
import 'leaflet-gpx'
import { supabase } from '../../../shared/api/supabase'
import { Spin, Alert } from 'antd'
import { LoadingOutlined } from '@ant-design/icons'

const GpxLayer = ({ map }) => {
	const [loading, setLoading] = useState(true)
	const [gpxLayers, setGpxLayers] = useState([])
	const [error, setError] = useState(null)

	useEffect(() => {
		if (!map) return

		const loadGpxTracks = async () => {
			try {
				setLoading(true)

				// –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ –∑–∞–µ–∑–¥—ã —Å GPX —Ñ–∞–π–ª–∞–º–∏
				const { data: lapTimes, error: dbError } = await supabase
					.from('lap_times')
					.select('*')
					.not('gpx_track_url', 'is', null)
					.order('date', { ascending: false })

				if (dbError) throw dbError

				console.log('–ù–∞–π–¥–µ–Ω–æ GPX —Ç—Ä–µ–∫–æ–≤:', lapTimes.length)
				const layers = []

				// –î–ª—è –∫–∞–∂–¥–æ–≥–æ GPX —Ñ–∞–π–ª–∞ —Å–æ–∑–¥–∞–µ–º —Å–ª–æ–π
				lapTimes.forEach(lap => {
					if (lap.gpx_track_url && lap.gpx_track_url.startsWith('http')) {
						try {
							// –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ü–≤–µ—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–æ–∑—Ä–∞—Å—Ç–∞ —Ç—Ä–µ–∫–∞
							const trackDate = new Date(lap.date)
							const now = new Date()
							const hoursDiff = (now - trackDate) / (1000 * 60 * 60)

							let color = '#52c41a' // –∑–µ–ª–µ–Ω—ã–π - —Å–≤–µ–∂–∏–π (< 24—á)
							let opacity = 0.8

							if (hoursDiff > 24 * 7) {
								// —Å—Ç–∞—Ä—à–µ –Ω–µ–¥–µ–ª–∏
								color = '#1890ff'
								opacity = 0.3
							} else if (hoursDiff > 24) {
								// —Å—Ç–∞—Ä—à–µ —Å—É—Ç–æ–∫
								color = '#faad14'
								opacity = 0.5
							}

							// –°–æ–∑–¥–∞–µ–º GPX —Å–ª–æ–π –ë–ï–ó –∏–∫–æ–Ω–æ–∫ –º–∞—Ä–∫–µ—Ä–æ–≤
const gpxLayer = new L.GPX(lap.gpx_track_url, {
	async: true,
	polyline_options: {
		color: color,
		weight: 4,
		opacity: opacity,
		lineCap: 'round',
	},
	marker_options: null, // –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫–ª—é—á–∞–µ–º –º–∞—Ä–∫–µ—Ä—ã
})


							// –î–æ–±–∞–≤–ª—è–µ–º popup —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –ò–ó –ë–ê–ó–´ –î–ê–ù–ù–´–•, –∞ –Ω–µ –∏–∑ GPX
							gpxLayer.on('loaded', function (e) {
								// –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –≤—Ä–µ–º—è –∏–∑ seconds –≤ MM:SS
								const minutes = Math.floor(lap.time_seconds / 60)
								const seconds = lap.time_seconds % 60
								const timeFormatted = `${minutes}:${seconds
									.toString()
									.padStart(2, '0')}`

								// –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –¥–∞—Ç—É
								const dateFormatted = new Date(lap.date).toLocaleDateString(
									'ru-RU'
								)

								// –ò—Å–ø–æ–ª—å–∑—É–µ–º user_name –∏–∑ –±–∞–∑—ã, –∞ –Ω–µ –∏–∑ GPX
								const userName = lap.user_name || '–ê–Ω–æ–Ω–∏–º'

								gpxLayer.bindPopup(`
                  <div style="min-width: 200px">
                    <b>${userName}</b><br>
                    –í—Ä–µ–º—è –∑–∞–µ–∑–¥–∞: ${timeFormatted}<br>
                    –î–∞—Ç–∞: ${dateFormatted}<br>
                    –õ—ã–∂–∏: ${lap.ski_model || '–Ω–µ —É–∫–∞–∑–∞–Ω—ã'}<br>
                    ${lap.comment ? `–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: ${lap.comment}` : ''}
                    <hr style="margin: 5px 0">
                    <small><i>–î–∏—Å—Ç–∞–Ω—Ü–∏—è –∏–∑ GPX: ${(
											e.target.get_distance() / 1000
										).toFixed(2)} –∫–º</i></small>
                  </div>
                `)
							})

							gpxLayer.addTo(map)
							layers.push(gpxLayer)
						} catch (gpxError) {
							console.error(`–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ GPX ${lap.id}:`, gpxError)
						}
					}
				})

				setGpxLayers(layers)
				setLoading(false)
			} catch (err) {
				console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç—Ä–µ–∫–æ–≤:', err)
				setError('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ç—Ä–µ–∫–∏')
				setLoading(false)
			}
		}

		loadGpxTracks()

		// –û—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
		return () => {
			gpxLayers.forEach(layer => {
				if (layer && map.hasLayer(layer)) {
					map.removeLayer(layer)
				}
			})
		}
	}, [map])

	if (loading) {
		return (
			<div
				style={{
					position: 'absolute',
					top: '10px',
					right: '10px',
					zIndex: 1000,
					background: 'rgba(255,255,255,0.9)',
					padding: '10px',
					borderRadius: '4px',
					boxShadow: '0 2px 4px rgba(0,0,0,0.1)',
				}}
			>
				<Spin indicator={<LoadingOutlined style={{ fontSize: 16 }} spin />} />
				<span style={{ marginLeft: '8px' }}>–ó–∞–≥—Ä—É–∑–∫–∞ —Ç—Ä–µ–∫–æ–≤...</span>
			</div>
		)
	}

	if (error) {
		return (
			<div
				style={{
					position: 'absolute',
					top: '10px',
					right: '10px',
					zIndex: 1000,
				}}
			>
				<Alert message={error} type='error' showIcon />
			</div>
		)
	}

	return (
		<div
			style={{
				position: 'absolute',
				top: '10px',
				right: '10px',
				zIndex: 1000,
				background: 'rgba(255,255,255,0.9)',
				padding: '10px',
				borderRadius: '4px',
				boxShadow: '0 2px 4px rgba(0,0,0,0.1)',
				fontSize: '12px',
			}}
		>
			–¢—Ä–µ–∫–æ–≤ –Ω–∞ –∫–∞—Ä—Ç–µ: {gpxLayers.length}
		</div>
	)
}

export default GpxLayer
```

## üìÑ src/widgets/Map/ui/TrailMarksDisplay.jsx
```
import React, { useEffect, useState, useCallback } from 'react'
import L from 'leaflet'
import { supabase } from '../../../shared/api/supabase'
import { Alert, Spin, Button, message } from 'antd'
import {
	LoadingOutlined,
	LikeOutlined,
	DislikeOutlined,
} from '@ant-design/icons'

const TrailMarksDisplay = ({ map, user }) => {
	const [marks, setMarks] = useState([])
	const [error, setError] = useState(null)
	const [loading, setLoading] = useState(true)
	const [userVotes, setUserVotes] = useState({}) // { markId: 'up'|'down' }
	const [updatingVote, setUpdatingVote] = useState(null)

	// –ò–∫–æ–Ω–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
	// –ò–∫–æ–Ω–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π - —É–º–µ–Ω—å—à–µ–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä
	const categoryIcons = {
		dangerous_turn: L.divIcon({
			html: '<div style="font-size: 18px; line-height: 1;">‚ö†Ô∏è</div>', // –í—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä
			className: 'custom-div-icon',
			iconSize: [18, 18], // –†–∞–∑–º–µ—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
			iconAnchor: [9, 18], // –¢–æ—á–∫–∞ –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º
			popupAnchor: [0, -18], // –°–º–µ—â–µ–Ω–∏–µ popup
		}),
		steep_slope: L.divIcon({
			html: '<div style="font-size: 18px; line-height: 1;">‚õ∞Ô∏è</div>',
			className: 'custom-div-icon',
			iconSize: [18, 18],
			iconAnchor: [9, 18],
			popupAnchor: [0, -18],
		}),
		branches: L.divIcon({
			html: '<div style="font-size: 18px; line-height: 1;">üåø</div>',
			className: 'custom-div-icon',
			iconSize: [18, 18],
			iconAnchor: [9, 18],
			popupAnchor: [0, -18],
		}),
		sand: L.divIcon({
			html: '<div style="font-size: 18px; line-height: 1;">üèñÔ∏è</div>',
			className: 'custom-div-icon',
			iconSize: [18, 18],
			iconAnchor: [9, 18],
			popupAnchor: [0, -18],
		}),
		loggers: L.divIcon({
			html: '<div style="font-size: 18px; line-height: 1;">üöú</div>',
			className: 'custom-div-icon',
			iconSize: [18, 18],
			iconAnchor: [9, 18],
			popupAnchor: [0, -18],
		}),
		untrodden: L.divIcon({
			html: '<div style="font-size: 18px; line-height: 1;">‚ùÑÔ∏è</div>',
			className: 'custom-div-icon',
			iconSize: [18, 18],
			iconAnchor: [9, 18],
			popupAnchor: [0, -18],
		}),
		perfect: L.divIcon({
			html: '<div style="font-size: 18px; line-height: 1;">‚≠ê</div>',
			className: 'custom-div-icon',
			iconSize: [18, 18],
			iconAnchor: [9, 18],
			popupAnchor: [0, -18],
		}),
		other: L.divIcon({
			html: '<div style="font-size: 18px; line-height: 1;">üìç</div>',
			className: 'custom-div-icon',
			iconSize: [18, 18],
			iconAnchor: [9, 18],
			popupAnchor: [0, -18],
		}),
	}

	// –¶–≤–µ—Ç–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤
	const categoryColors = {
		dangerous_turn: '#f5222d',
		steep_slope: '#fa8c16',
		branches: '#faad14',
		sand: '#d48806',
		loggers: '#722ed1',
		untrodden: '#13c2c2',
		perfect: '#52c41a',
		other: '#1890ff',
	}

	// –ó–∞–≥—Ä—É–∑–∫–∞ –º–µ—Ç–æ–∫
	const loadMarks = useCallback(async () => {
		try {
			console.log('üîÑ –ó–∞–≥—Ä—É–∑–∫–∞ –º–µ—Ç–æ–∫...')
			setLoading(true)

			// –ó–∞–≥—Ä—É–∂–∞–µ–º –º–µ—Ç–∫–∏ —á–µ—Ä–µ–∑ RPC
			const { data: marksData, error: marksError } = await supabase.rpc(
				'get_marks_with_geojson'
			)

			if (marksError) throw marksError

			if (!marksData || marksData.length === 0) {
				setMarks([])
				setLoading(false)
				return
			}

			// –ó–∞–≥—Ä—É–∂–∞–µ–º –≥–æ–ª–æ—Å–∞ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
			if (user) {
				const { data: votesData } = await supabase
					.from('mark_confirmations')
					.select('mark_id, vote_type')
					.eq('user_id', user.id)

				const votesMap = {}
				votesData?.forEach(vote => {
					votesMap[vote.mark_id] = vote.vote_type
				})
				setUserVotes(votesMap)
			}

			// –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –º–µ—Ç–∫–∏
			displayMarksOnMap(marksData)
		} catch (err) {
			console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', err)
			setError('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –º–µ—Ç–∫–∏')
		} finally {
			setLoading(false)
		}
	}, [map, user])

	// –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–µ—Ç–æ–∫ –Ω–∞ –∫–∞—Ä—Ç–µ
	const displayMarksOnMap = marksData => {
		if (!map) return

		// –û—á–∏—â–∞–µ–º —Å—Ç–∞—Ä—ã–µ –º–µ—Ç–∫–∏
		marks.forEach(marker => {
			if (marker && map.hasLayer(marker)) {
				map.removeLayer(marker)
			}
		})

		const newMarkers = []

		marksData.forEach(mark => {
			try {
				// –ü–æ–ª—É—á–∞–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ü–µ–Ω—Ç—Ä–∞ –ª–∏–Ω–∏–∏
				let centerLat = 52.416925 // –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
				let centerLng = 103.738906

				if (mark.geometry && mark.geometry.coordinates) {
					const coords = mark.geometry.coordinates
					if (mark.geometry.type === 'LineString' && coords.length > 0) {
						// –ë–µ—Ä–µ–º —Å—Ä–µ–¥–Ω—é—é —Ç–æ—á–∫—É –ª–∏–Ω–∏–∏
						const midIndex = Math.floor(coords.length / 2)
						const [lng, lat] = coords[midIndex]
						centerLat = lat
						centerLng = lng
					} else if (mark.geometry.type === 'Point') {
						const [lng, lat] = coords
						centerLat = lat
						centerLng = lng
					}
				}

				// –°–æ–∑–¥–∞–µ–º –º–∞—Ä–∫–µ—Ä —Å –∏–∫–æ–Ω–∫–æ–π
				const icon = categoryIcons[mark.category] || categoryIcons.other
				const marker = L.marker([centerLat, centerLng], {
					icon,
					title: getCategoryLabel(mark.category),
				}).addTo(map)

				// –°–æ–∑–¥–∞–µ–º popup —Å –∫–Ω–æ–ø–∫–∞–º–∏ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è
				const popupContent = createPopupContent(mark)
				marker.bindPopup(popupContent)

				newMarkers.push(marker)
			} catch (err) {
				console.error('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –º–∞—Ä–∫–µ—Ä–∞:', err)
			}
		})

		setMarks(newMarkers)
		console.log(`‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–æ –º–µ—Ç–æ–∫: ${newMarkers.length}`)
	}

	// –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ popup
	// –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ popup
	const createPopupContent = mark => {
		const userVote = userVotes[mark.id]
		const isOwnMark = user && mark.user_id === user.id
		const color = categoryColors[mark.category] || '#1890ff'

		return `
		<div style="min-width: 280px; padding: 0;">
			<div style="
				background: ${color}20;
				padding: 15px;
				border-radius: 8px 8px 0 0;
				border-bottom: 2px solid ${color};
				position: relative;
			">
				${
					isOwnMark
						? `
					<button 
						id="delete-mark-${mark.id}"
						style="
							position: absolute;
							top: 10px;
							right: 10px;
							background: #ff4d4f;
							color: white;
							border: none;
							border-radius: 4px;
							width: 24px;
							height: 24px;
							display: flex;
							align-items: center;
							justify-content: center;
							cursor: pointer;
							font-size: 12px;
							padding: 0;
						"
						title="–£–¥–∞–ª–∏—Ç—å –º–µ—Ç–∫—É"
					>
						üóëÔ∏è
					</button>
				`
						: ''
				}
				
				<div style="display: flex; align-items: center; gap: 12px;">
					<span style="font-size: 32px">${getCategoryIcon(mark.category)}</span>
					<div>
						<strong style="font-size: 16px; display: block; color: ${color};">
							${getCategoryLabel(mark.category)}
						</strong>
						<span style="font-size: 12px; color: #666;">
							${mark.type === 'permanent' ? 'üîí –ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è' : '‚è∞ –í—Ä–µ–º–µ–Ω–Ω–∞—è'}
							${
								mark.expiry_time
									? ` ‚Ä¢ –¥–æ ${new Date(mark.expiry_time).toLocaleTimeString(
											'ru-RU',
											{
												hour: '2-digit',
												minute: '2-digit',
											}
									  )}`
									: ''
							}
						</span>
					</div>
				</div>
			</div>
			
			<div style="padding: 15px;">
				${
					mark.description
						? `<p style="margin: 0 0 12px 0; font-size: 14px; color: #333;">${mark.description}</p>`
						: '<p style="margin: 0 0 12px 0; font-size: 14px; color: #999; font-style: italic;">–ù–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—è</p>'
				}
				
				<div style="
					display: flex;
					justify-content: space-between;
					align-items: center;
					margin-bottom: 12px;
					padding: 10px;
					background: #fafafa;
					border-radius: 6px;
				">
					<button 
						id="vote-up-${mark.id}"
						style="
							flex: 1;
							padding: 8px;
							background: ${userVote === 'up' ? '#52c41a' : '#f0f0f0'};
							color: ${userVote === 'up' ? 'white' : '#666'};
							border: none;
							border-radius: 6px 0 0 6px;
							cursor: pointer;
							font-weight: bold;
							display: flex;
							align-items: center;
							justify-content: center;
							gap: 6px;
						"
						${
							updatingVote === mark.id
								? 'disabled style="opacity: 0.5; cursor: not-allowed;"'
								: ''
						}
					>
						<span style="font-size: 16px">üëç</span>
						<span>${mark.up_votes || 0}</span>
					</button>
					
					<button 
						id="vote-down-${mark.id}"
						style="
							flex: 1;
							padding: 8px;
							background: ${userVote === 'down' ? '#f5222d' : '#f0f0f0'};
							color: ${userVote === 'down' ? 'white' : '#666'};
							border: none;
							border-radius: 0 6px 6px 0;
							cursor: pointer;
							font-weight: bold;
							display: flex;
							align-items: center;
							justify-content: center;
							gap: 6px;
						"
						${
							updatingVote === mark.id
								? 'disabled style="opacity: 0.5; cursor: not-allowed;"'
								: ''
						}
					>
						<span style="font-size: 16px">üëé</span>
						<span>${mark.down_votes || 0}</span>
					</button>
				</div>
				
				${
					isOwnMark
						? `
					<button 
						id="delete-confirm-${mark.id}"
						style="
							width: 100%;
							padding: 10px;
							background: #fff2f0;
							color: #f5222d;
							border: 1px solid #ffccc7;
							border-radius: 6px;
							cursor: pointer;
							font-weight: bold;
							margin-bottom: 12px;
							display: flex;
							align-items: center;
							justify-content: center;
							gap: 8px;
							font-size: 14px;
						"
						title="–£–¥–∞–ª–∏—Ç—å —ç—Ç—É –º–µ—Ç–∫—É –Ω–∞–≤—Å–µ–≥–¥–∞"
					>
						üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –º–µ—Ç–∫—É
					</button>
				`
						: ''
				}
				
				<div style="font-size: 12px; color: #888; border-top: 1px solid #f0f0f0; padding-top: 10px;">
					<div style="margin-bottom: 4px;">üë§ <strong>${
						mark.created_by_username || '–ê–Ω–æ–Ω–∏–º'
					}</strong></div>
					<div style="margin-bottom: 4px;">üïê ${new Date(mark.created_at).toLocaleString(
						'ru-RU'
					)}</div>
					<div style="color: #52c41a;">‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π: ${
						mark.confirmed_count || 0
					}</div>
					${
						isOwnMark
							? '<div style="color: #1890ff; margin-top: 4px;">‚ú® –≠—Ç–æ –≤–∞—à–∞ –º–µ—Ç–∫–∞</div>'
							: ''
					}
				</div>
			</div>
		</div>
	`
	}
	// –§—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è –º–µ—Ç–∫–∏
	const handleDeleteMark = async markId => {
		if (!user) {
			message.warning('–ù—É–∂–Ω–æ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É')
			return
		}

		// –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è
		if (!window.confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç—É –º–µ—Ç–∫—É? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.')) {
			return
		}

		try {
			// 1. –£–¥–∞–ª—è–µ–º –≥–æ–ª–æ—Å–∞ –∑–∞ —ç—Ç—É –º–µ—Ç–∫—É
			await supabase.from('mark_confirmations').delete().eq('mark_id', markId)

			// 2. –£–¥–∞–ª—è–µ–º —Å–∞–º—É –º–µ—Ç–∫—É
			const { error } = await supabase
				.from('trail_marks')
				.delete()
				.eq('id', markId)

			if (error) throw error

			message.success('–ú–µ—Ç–∫–∞ —É–¥–∞–ª–µ–Ω–∞!')

			// 3. –£–¥–∞–ª—è–µ–º –º–∞—Ä–∫–µ—Ä —Å –∫–∞—Ä—Ç—ã
			const markerToRemove = marks.find(marker => {
				const content = marker.getPopup()?.getContent()
				return content && content.includes(`id="vote-up-${markId}"`)
			})

			if (markerToRemove && map) {
				map.removeLayer(markerToRemove)
			}

			// 4. –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –º–µ—Ç–æ–∫
			setMarks(prev => prev.filter(marker => marker !== markerToRemove))

			// 5. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –º–µ—Ç–∫–∏ —Å —Å–µ—Ä–≤–µ—Ä–∞
			setTimeout(() => {
				loadMarks()
			}, 500)
		} catch (err) {
			console.error('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –º–µ—Ç–∫–∏:', err)
			message.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –º–µ—Ç–∫–∏')
		}
	}
	// –û–±—Ä–∞–±–æ—Ç–∫–∞ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è
	const handleVote = async (markId, voteType) => {
		if (!user) {
			message.warning('–ù—É–∂–Ω–æ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É –¥–ª—è –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è')
			return
		}

		setUpdatingVote(markId)

		try {
			// –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–π –≥–æ–ª–æ—Å, –µ—Å–ª–∏ –µ—Å—Ç—å
			await supabase
				.from('mark_confirmations')
				.delete()
				.eq('mark_id', markId)
				.eq('user_id', user.id)

			// –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π –≥–æ–ª–æ—Å
			const { error } = await supabase.from('mark_confirmations').insert({
				mark_id: markId,
				user_id: user.id,
				vote_type: voteType,
			})

			if (error) throw error

			// –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ trail_marks
			const { data: votesData } = await supabase
				.from('mark_confirmations')
				.select('vote_type')
				.eq('mark_id', markId)

			const upVotes = votesData?.filter(v => v.vote_type === 'up').length || 0
			const downVotes =
				votesData?.filter(v => v.vote_type === 'down').length || 0

			await supabase
				.from('trail_marks')
				.update({
					confirmed_count: upVotes,
					updated_at: new Date().toISOString(),
				})
				.eq('id', markId)

			// –û–±–Ω–æ–≤–ª—è–µ–º –ª–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
			setUserVotes(prev => ({
				...prev,
				[markId]: voteType,
			}))

			// –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –º–µ—Ç–∫–∏
			loadMarks()
			message.success('–ì–æ–ª–æ—Å —É—á—Ç–µ–Ω!')
		} catch (err) {
			console.error('–û—à–∏–±–∫–∞ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è:', err)
			message.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–∏')
		} finally {
			setUpdatingVote(null)
		}
	}

	// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –≤ popup
	// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –≤ popup
	useEffect(() => {
		if (!map || marks.length === 0) return

		const handlePopupOpen = e => {
			const popup = e.popup
			const content = popup._content

			// –ò—â–µ–º ID –º–µ—Ç–∫–∏ –≤ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º popup
			const voteMatch = content.match(/id="vote-(up|down)-(\d+)"/)
			const deleteMatch = content.match(/id="delete-(?:mark|confirm)-(\d+)"/)

			if (voteMatch) {
				const [_, type, markId] = voteMatch

				setTimeout(() => {
					const upBtn = document.getElementById(`vote-up-${markId}`)
					const downBtn = document.getElementById(`vote-down-${markId}`)

					if (upBtn) {
						upBtn.onclick = () => handleVote(parseInt(markId), 'up')
					}
					if (downBtn) {
						downBtn.onclick = () => handleVote(parseInt(markId), 'down')
					}
				}, 100)
			}

			if (deleteMatch) {
				const [_, markId] = deleteMatch

				setTimeout(() => {
					const deleteBtn = document.getElementById(`delete-mark-${markId}`)
					const deleteConfirmBtn = document.getElementById(
						`delete-confirm-${markId}`
					)

					if (deleteBtn) {
						deleteBtn.onclick = () => handleDeleteMark(parseInt(markId))
					}
					if (deleteConfirmBtn) {
						deleteConfirmBtn.onclick = () => handleDeleteMark(parseInt(markId))
					}
				}, 100)
			}
		}

		map.on('popupopen', handlePopupOpen)

		return () => {
			map.off('popupopen', handlePopupOpen)
		}
	}, [map, marks, user, loadMarks])
	// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
	useEffect(() => {
		if (!map) return

		// –ü–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
		loadMarks()

		// –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–∑–≤–Ω–µ
		window.reloadMarks = loadMarks

		// –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
		const interval = setInterval(loadMarks, 300000)

		return () => {
			clearInterval(interval)
			if (window.reloadMarks) {
				delete window.reloadMarks
			}
		}
	}, [map, user, loadMarks])

	// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
	const getCategoryLabel = category => {
		const labels = {
			dangerous_turn: '–û–ø–∞—Å–Ω—ã–π –ø–æ–≤–æ—Ä–æ—Ç',
			steep_slope: '–ö—Ä—É—Ç–æ–π —Å–∫–ª–æ–Ω',
			branches: '–í–µ—Ç–∫–∏ –Ω–∞ —Ç—Ä–∞—Å—Å–µ',
			sand: '–ü–µ—Å–æ–∫/–≥—Ä—É–Ω—Ç',
			loggers: '–°–ª–µ–¥—ã –ª–µ—Å–æ–≤–æ–∑–æ–≤',
			untrodden: '–ù–µ–∑–∞—Ç—Ä–æ–ø–ª–µ–Ω–æ',
			perfect: '–ò–¥–µ–∞–ª—å–Ω–æ',
			other: '–î—Ä—É–≥–æ–µ',
		}
		return labels[category] || category
	}

	const getCategoryIcon = category => {
		const icons = {
			dangerous_turn: '‚ö†Ô∏è',
			steep_slope: '‚õ∞Ô∏è',
			branches: 'üåø',
			sand: 'üèñÔ∏è',
			loggers: 'üöú',
			untrodden: '‚ùÑÔ∏è',
			perfect: '‚≠ê',
			other: 'üìç',
		}
		return icons[category] || 'üìç'
	}

	// –†–µ–Ω–¥–µ—Ä —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
	if (loading && marks.length === 0) {
		return (
			<div
				style={{
					position: 'absolute',
					top: '60px',
					right: '20px',
					zIndex: 1000,
					background: 'white',
					padding: '12px 16px',
					borderRadius: '8px',
					boxShadow: '0 4px 12px rgba(0,0,0,0.15)',
					border: '2px solid #1890ff',
					display: 'flex',
					alignItems: 'center',
				}}
			>
				<Spin
					indicator={<LoadingOutlined style={{ color: '#1890ff' }} spin />}
				/>
				<span style={{ marginLeft: '10px', fontSize: '13px', fontWeight: 500 }}>
					–ó–∞–≥—Ä—É–∑–∫–∞ –º–µ—Ç–æ–∫...
				</span>
			</div>
		)
	}

	return (
		<>
			{error && (
				<div
					style={{
						position: 'absolute',
						top: '60px',
						right: '20px',
						zIndex: 1000,
						maxWidth: '300px',
					}}
				>
					<Alert
						message='–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏'
						description={error}
						type='error'
						showIcon
						closable
						onClose={() => setError(null)}
					/>
				</div>
			)}

			{/* –°—á–µ—Ç—á–∏–∫ –º–µ—Ç–æ–∫ */}
			<div
				style={{
					position: 'absolute',
					top: '60px',
					right: '20px',
					zIndex: 1000,
					background: 'white',
					padding: '10px 14px',
					borderRadius: '8px',
					boxShadow: '0 2px 8px rgba(0,0,0,0.15)',
					fontSize: '13px',
					fontWeight: 500,
					border: '2px solid #52c41a',
					color: '#389e0d',
				}}
			>
				üìç –ú–µ—Ç–æ–∫ –Ω–∞ –∫–∞—Ä—Ç–µ: <strong>{marks.length}</strong>
				<div
					style={{ fontSize: '11px', color: '#666', marginTop: '4px' }}
				></div>
			</div>
		</>
	)
}

export default TrailMarksDisplay
```

## üìÑ src/widgets/Map/ui/MapClickMenu.jsx
```
import React, { useState, useEffect } from 'react'
import {
	FloatButton,
	Modal,
	Form,
	Input,
	Select,
	Radio,
	message,
	Button,
} from 'antd'
import {
	PlusOutlined,
	EnvironmentOutlined,
	CloseOutlined,
	CheckOutlined,
} from '@ant-design/icons'
import L from 'leaflet'
import { supabase } from '../../../shared/api/supabase'
import styles from './MapClickMenu.module.css'

const { Option } = Select
const { TextArea } = Input

const MapClickMenu = ({ map, user }) => {
	const [modalVisible, setModalVisible] = useState(false)
	const [drawingMode, setDrawingMode] = useState(false)
	const [currentLine, setCurrentLine] = useState([])
	const [clickPosition, setClickPosition] = useState(null)
	const [form] = Form.useForm()
	const [tempLine, setTempLine] = useState(null)

	const categories = [
		{ value: 'dangerous_turn', label: '–û–ø–∞—Å–Ω—ã–π –ø–æ–≤–æ—Ä–æ—Ç', icon: '‚ö†Ô∏è' },
		{ value: 'steep_slope', label: '–ö—Ä—É—Ç–æ–π —Å–∫–ª–æ–Ω', icon: '‚õ∞Ô∏è' },
		{ value: 'branches', label: '–í–µ—Ç–∫–∏ –Ω–∞ —Ç—Ä–∞—Å—Å–µ', icon: 'üåø' },
		{ value: 'sand', label: '–ü–µ—Å–æ–∫/–≥—Ä—É–Ω—Ç', icon: 'üèñÔ∏è' },
		{ value: 'loggers', label: '–°–ª–µ–¥—ã –ª–µ—Å–æ–≤–æ–∑–æ–≤', icon: 'üöú' },
		{ value: 'untrodden', label: '–ù–µ–∑–∞—Ç—Ä–æ–ø–ª–µ–Ω–æ', icon: '‚ùÑÔ∏è' },
		{ value: 'perfect', label: '–ò–¥–µ–∞–ª—å–Ω–æ', icon: '‚≠ê' },
		{ value: 'other', label: '–î—Ä—É–≥–æ–µ', icon: 'üìç' },
	]

	// –£–¥–∞–ª—è–µ–º –≤—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
	useEffect(() => {
		return () => {
			if (window.currentDrawingHandlers) {
				cleanupDrawingHandlers()
			}
		}
	}, [])

	const cleanupDrawingHandlers = () => {
		if (!map) return

		// –£–±–∏—Ä–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞
		if (window.currentDrawingHandlers?.click) {
			map.off('click', window.currentDrawingHandlers.click)
		}
		window.currentDrawingHandlers = null

		// –£–±–∏—Ä–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—É—é –ª–∏–Ω–∏—é
		if (window.currentTempLine && map.hasLayer(window.currentTempLine)) {
			map.removeLayer(window.currentTempLine)
			window.currentTempLine = null
		}

		removeDrawingInstructions()
	}

	const showContextMenu = e => {
		if (!map) return // ‚Üê –¥–æ–±–∞–≤–ª—è–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É

		const menu = L.popup()
			.setLatLng(e.latlng)
			.setContent(
				`
			<div class="${styles.contextMenu}">
				<h4>–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–∫—É</h4>
				<button onclick="window.addMarkerPoint(${e.latlng.lat}, ${e.latlng.lng})">
					üìç –¢–æ—á–∫—É
				</button>
				<button onclick="window.startDrawingLine(${e.latlng.lat}, ${e.latlng.lng})">
					üìè –£—á–∞—Å—Ç–æ–∫ —Ç—Ä–∞—Å—Å—ã
				</button>
				<button onclick="window.cancelMarker()">
					‚ùå –û—Ç–º–µ–Ω–∞
				</button>
			</div>
		`
			)
			.openOn(map)

		window.addMarkerPoint = (lat, lng) => {
			map.closePopup()
			setClickPosition({ lat, lng })
			setCurrentLine([])
			setModalVisible(true)
		}

		window.startDrawingLine = (lat, lng) => {
			map.closePopup()
			startDrawing([lat, lng])
		}

		window.cancelMarker = () => {
			map.closePopup()
		}
	}

	const startDrawing = startPoint => {
		console.log('üé® –ù–∞—á–∞–ª–æ —Ä–∏—Å–æ–≤–∞–Ω–∏—è, —Ç–æ—á–µ–∫:', startPoint)

		// –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –∑–∞–ø—É—â–µ–Ω–æ –ª–∏ —É–∂–µ —Ä–∏—Å–æ–≤–∞–Ω–∏–µ
		if (drawingMode) {
			message.warning('–†–∏—Å–æ–≤–∞–Ω–∏–µ —É–∂–µ –Ω–∞—á–∞—Ç–æ!')
			return
		}

		// –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –æ—Ç–∫—Ä—ã—Ç –ª–∏ —É–∂–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–æ–Ω–Ω—ã–π –±–ª–æ–∫
		if (window.drawingInstructions) {
			removeDrawingInstructions()
		}

		setDrawingMode(true)
		setCurrentLine([startPoint])
		setClickPosition(null)

		// –û—á–∏—â–∞–µ–º —Å—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
		cleanupDrawingHandlers()

		// –°–æ–∑–¥–∞–µ–º –ø–µ—Ä–≤—É—é —Ç–æ—á–∫—É
		window.currentTempLine = L.polyline([startPoint], {
			color: '#ff0000',
			weight: 3,
			dashArray: '5, 10',
			opacity: 0.7,
		}).addTo(map)

		// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ—á–µ–∫
		const handleClick = e => {
			e.originalEvent.stopPropagation()
			e.originalEvent.preventDefault()

			console.log('üñ±Ô∏è –ö–ª–∏–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∏—Å–æ–≤–∞–Ω–∏—è:', e.latlng)

			const newPoint = [e.latlng.lat, e.latlng.lng]

			setCurrentLine(prev => {
				const updatedLine = [...prev, newPoint]
				console.log('üìà –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ç–æ—á–∫–∞, –≤—Å–µ–≥–æ:', updatedLine.length)

				// –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—É—é –ª–∏–Ω–∏—é –µ—Å–ª–∏ –µ—Å—Ç—å
				if (window.currentTempLine && map.hasLayer(window.currentTempLine)) {
					map.removeLayer(window.currentTempLine)
				}

				// –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é –ª–∏–Ω–∏—é
				window.currentTempLine = L.polyline(updatedLine, {
					color: '#ff0000',
					weight: 3,
					dashArray: '5, 10',
					opacity: 0.7,
				}).addTo(map)

				// –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ –≤ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
				updateInstructionsCount(updatedLine.length)

				return updatedLine
			})
		}

		// –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
		window.currentDrawingHandlers = {
			click: handleClick,
		}

		// –í–µ—à–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
		map.on('click', handleClick)

		showDrawingInstructions()
		message.info('–†–∏—Å–æ–≤–∞–Ω–∏–µ –Ω–∞—á–∞—Ç–æ. –ö–ª–∏–∫–∞–π—Ç–µ –Ω–∞ –∫–∞—Ä—Ç—É –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ—á–µ–∫.')
	}
	const finishDrawing = () => {
		console.log('‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∏—Å–æ–≤–∞–Ω–∏—è, –≤—Å–µ–≥–æ —Ç–æ—á–µ–∫:', currentLine.length)

		if (currentLine.length < 2) {
			message.warning('–ù—É–∂–Ω–æ –∫–∞–∫ –º–∏–Ω–∏–º—É–º 2 —Ç–æ—á–∫–∏ –¥–ª—è —É—á–∞—Å—Ç–∫–∞!')
			return
		}

		setDrawingMode(false)

		// –ú–µ–Ω—è–µ–º —Ü–≤–µ—Ç –Ω–∞ –∑–µ–ª–µ–Ω—ã–π –¥–ª—è –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞
		if (window.currentTempLine && map.hasLayer(window.currentTempLine)) {
			window.currentTempLine.setStyle({
				color: '#52c41a',
				weight: 4,
				opacity: 0.8,
				dashArray: null,
			})
		}

		// –û—á–∏—â–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
		cleanupDrawingHandlers()

		// –û—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
		setModalVisible(true)
		message.success('–£—á–∞—Å—Ç–æ–∫ –Ω–∞—Ä–∏—Å–æ–≤–∞–Ω! –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –º–µ—Ç–∫–∏.')
	}

	const cancelDrawing = () => {
		setDrawingMode(false)
		setCurrentLine([])
		cleanupDrawingHandlers()
		message.info('–†–∏—Å–æ–≤–∞–Ω–∏–µ –æ—Ç–º–µ–Ω–µ–Ω–æ')
	}

	const showDrawingInstructions = () => {
		removeDrawingInstructions()

		window.drawingInstructions = L.control({ position: 'topright' })
		window.drawingInstructions.onAdd = function () {
			const div = L.DomUtil.create('div', 'drawing-instructions')

			// –°–æ–∑–¥–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏ —Å—Ä–∞–∑—É
			div.innerHTML = `
			<div style="
				background: white; 
				padding: 15px; 
				border-radius: 8px; 
				box-shadow: 0 4px 12px rgba(0,0,0,0.25);
				border: 3px solid #1890ff;
				max-width: 250px;
				font-size: 14px;
			">
				<div style="color: #1890ff; font-weight: bold; margin-bottom: 10px; font-size: 16px;">
					üéØ –†–∏—Å–æ–≤–∞–Ω–∏–µ —É—á–∞—Å—Ç–∫–∞
				</div>
				<div style="margin-bottom: 8px; color: #666;">
					‚Ä¢ <strong>–ö–ª–∏–∫</strong> - –¥–æ–±–∞–≤–∏—Ç—å —Ç–æ—á–∫—É
					<br>‚Ä¢ <strong>–î–æ–±–∞–≤—å—Ç–µ –º–∏–Ω–∏–º—É–º 2 —Ç–æ—á–∫–∏</strong>
				</div>
				<div style="color: #666; margin-bottom: 12px;">
					–¢–æ—á–µ–∫: <strong id="points-counter">${currentLine.length}</strong>
				</div>
				
				<div style="display: flex; gap: 8px; margin-bottom: 10px;">
					<button 
						id="finish-drawing-btn" 
						style="
							flex: 1;
							padding: 8px;
							background: #52c41a; 
							color: white; 
							border: none; 
							border-radius: 4px; 
							cursor: pointer;
							font-weight: bold;
							font-size: 14px;
						"
					>
						‚úì –ì–æ—Ç–æ–≤–æ (${currentLine.length})
					</button>
					
					<button 
						id="cancel-drawing-btn" 
						style="
							flex: 1;
							padding: 8px;
							background: #ff4d4f; 
							color: white; 
							border: none; 
							border-radius: 4px; 
							cursor: pointer;
							font-weight: bold;
							font-size: 14px;
						"
					>
						‚úï –û—Ç–º–µ–Ω–∞
					</button>
				</div>
				
				<div style="font-size: 12px; color: #999; text-align: center;">
					–î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É "–ì–æ—Ç–æ–≤–æ"
				</div>
			</div>
		`

			// –ù–ï–ú–ï–î–õ–ï–ù–ù–û –¥–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
			const finishBtn = div.querySelector('#finish-drawing-btn')
			const cancelBtn = div.querySelector('#cancel-drawing-btn')

			if (finishBtn) {
				finishBtn.onclick = e => {
					e.stopPropagation()
					finishDrawing()
				}
			}

			if (cancelBtn) {
				cancelBtn.onclick = e => {
					e.stopPropagation()
					cancelDrawing()
				}
			}

			return div
		}

		window.drawingInstructions.addTo(map)
	}
	const removeDrawingInstructions = () => {
		if (window.drawingInstructions && map) {
			map.removeControl(window.drawingInstructions)
			window.drawingInstructions = null
		}
	}

	const updateInstructionsCount = count => {
		// –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ –≤ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
		const counter = document.getElementById('points-counter')
		if (counter) {
			counter.innerHTML = count
		}

		// –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏
		const finishBtn = document.getElementById('finish-drawing-btn')
		if (finishBtn) {
			finishBtn.innerHTML = `‚úì –ì–æ—Ç–æ–≤–æ (${count})`
		}
	}

	const handleFormSubmit = async values => {
		try {
			let geometry

			if (currentLine.length > 0) {
				// –£—á–∞—Å—Ç–æ–∫ –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–æ—á–µ–∫
				const coordinates = currentLine
					.map(coord => `${coord[1]} ${coord[0]}`)
					.join(', ')
				geometry = `LINESTRING(${coordinates})`
			} else if (clickPosition) {
				// –û–¥–∏–Ω–æ—á–Ω–∞—è —Ç–æ—á–∫–∞ - –¥–µ–ª–∞–µ–º –º–∞–ª–µ–Ω—å–∫–∏–π –æ—Ç—Ä–µ–∑–æ–∫
				const lat = clickPosition.lat
				const lng = clickPosition.lng
				geometry = `LINESTRING(${lng} ${lat}, ${lng + 0.0001} ${lat + 0.0001})`
			} else {
				throw new Error('–ù–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –¥–ª—è –º–µ—Ç–∫–∏')
			}

			const expiryTime =
				values.type === 'temporary'
					? new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString()
					: null

			// –ü–æ–ª—É—á–∞–µ–º username –∏–∑ profiles
			let username = '–ê–Ω–æ–Ω–∏–º'
			if (user) {
				const { data: profile } = await supabase
					.from('profiles')
					.select('username')
					.eq('id', user.id)
					.single()

				username = profile?.username || user.email?.split('@')[0] || '–ê–Ω–æ–Ω–∏–º'
			}

			const { data, error } = await supabase
				.from('trail_marks')
				.insert({
					user_id: user?.id,
					type: values.type,
					category: values.category,
					geometry: geometry,
					description: values.description,
					expiry_time: expiryTime,
					created_by_username: username, // –ò—Å–ø–æ–ª—å–∑—É–µ–º username –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è
					confirmed_count: 0,
				})
				.select()

			if (error) throw error

			message.success('–ú–µ—Ç–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞!')
			setModalVisible(false)
			form.resetFields()
			setCurrentLine([])
			setClickPosition(null)

			// –£–±–∏—Ä–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—É—é –ª–∏–Ω–∏—é
			if (tempLine) {
				map.removeLayer(tempLine)
				setTempLine(null)
			}

			// –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –º–µ—Ç–∫–∏
			if (window.reloadMarks) {
				window.reloadMarks()
			}
		} catch (error) {
			console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:', error)
			message.error('–û—à–∏–±–∫–∞: ' + error.message)
		}
	}

	// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∏–∫–æ–≤ –Ω–∞ –∫–∞—Ä—Ç–µ


	useEffect(() => {
		if (!map || !user) return // –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É !user

		const handleMapClick = e => {
			if (!drawingMode) {
				showContextMenu(e)
			}
		}

		map.on('click', handleMapClick)

		return () => {
			map.off('click', handleMapClick)
			cleanupDrawingHandlers()
		}
	}, [map, drawingMode, user]) // –î–æ–±–∞–≤–ª—è–µ–º user –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

	return (
		<>
			{/* –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –º–µ—Ç–∫–∏ */}
			{user && (
				<div className={styles.floatButtonContainer}>
					<FloatButton
						icon={<EnvironmentOutlined />}
						type='primary'
						tooltip='–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–∫—É –Ω–∞ –∫–∞—Ä—Ç—É'
						onClick={() => {
							if (map) {
								const center = map.getCenter()
								showContextMenu({ latlng: center })
							}
						}}
						className={styles.floatButton}
					/>
				</div>
			)}

			{/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ */}
			<Modal
				title={
					currentLine.length > 0 ? 'üìè –î–æ–±–∞–≤–∏—Ç—å —É—á–∞—Å—Ç–æ–∫' : 'üìç –î–æ–±–∞–≤–∏—Ç—å —Ç–æ—á–∫—É'
				}
				open={modalVisible}
				onCancel={() => {
					setModalVisible(false)
					setCurrentLine([])
					setClickPosition(null)
					if (tempLine) {
						map.removeLayer(tempLine)
						setTempLine(null)
					}
				}}
				onOk={() => form.submit()}
				okText='–°–æ—Ö—Ä–∞–Ω–∏—Ç—å'
				cancelText='–û—Ç–º–µ–Ω–∞'
				width={500}
				footer={[
					<Button key='cancel' onClick={() => setModalVisible(false)}>
						–û—Ç–º–µ–Ω–∞
					</Button>,
					<Button key='submit' type='primary' onClick={() => form.submit()}>
						<CheckOutlined /> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –º–µ—Ç–∫—É
					</Button>,
				]}
			>
				<Form
					form={form}
					layout='vertical'
					onFinish={handleFormSubmit}
					initialValues={{
						type: 'temporary',
						category: 'branches',
					}}
				>
					<Form.Item name='type' label='–¢–∏–ø –º–µ—Ç–∫–∏' rules={[{ required: true }]}>
						<Radio.Group>
							<Radio value='permanent'>–ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è</Radio>
							<Radio value='temporary'>–í—Ä–µ–º–µ–Ω–Ω–∞—è (24—á)</Radio>
						</Radio.Group>
					</Form.Item>

					<Form.Item
						name='category'
						label='–ß—Ç–æ –Ω–∞ —Ç—Ä–∞—Å—Å–µ?'
						rules={[{ required: true }]}
					>
						<Select placeholder='–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø'>
							{categories.map(cat => (
								<Option key={cat.value} value={cat.value}>
									<span style={{ marginRight: 8 }}>{cat.icon}</span>
									{cat.label}
								</Option>
							))}
						</Select>
					</Form.Item>

					<Form.Item name='description' label='–û–ø–∏—Å–∞–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)'>
						<TextArea
							placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: '–≥–ª—É–±–æ–∫–∏–π —Å–Ω–µ–≥ –Ω–∞ –ø–æ–≤–æ—Ä–æ—Ç–µ' –∏–ª–∏ '–º–Ω–æ–≥–æ –≤–µ—Ç–æ–∫ –ø–æ—Å–ª–µ –≤—á–µ—Ä–∞—à–Ω–µ–≥–æ –≤–µ—Ç—Ä–∞'"
							rows={3}
						/>
					</Form.Item>

					<div className={styles.coordinatesInfo}>
						{currentLine.length > 0 ? (
							<p>
								üìè –£—á–∞—Å—Ç–æ–∫: <strong>{currentLine.length}</strong> —Ç–æ—á–µ–∫
							</p>
						) : clickPosition ? (
							<p>
								üìç –¢–æ—á–∫–∞: {clickPosition.lat.toFixed(6)},{' '}
								{clickPosition.lng.toFixed(6)}
							</p>
						) : null}
					</div>
				</Form>
			</Modal>
		</>
	)
}

export default MapClickMenu
```

## üìÑ src/widgets/Map/ui/MapClickMenu.module.css
```
.contextMenu {
  padding: 10px;
  min-width: 220px;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

.contextMenu h4 {
  margin: 0 0 12px 0;
  color: #1890ff;
  font-size: 16px;
  font-weight: 600;
}

.contextMenu button {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
  padding: 10px 14px;
  margin-bottom: 8px;
  background: white;
  border: 1px solid #d9d9d9;
  border-radius: 6px;
  cursor: pointer;
  text-align: left;
  font-size: 14px;
  transition: all 0.2s ease;
}

.contextMenu button:hover {
  background: #1890ff;
  color: white;
  border-color: #1890ff;
  transform: translateY(-1px);
  box-shadow: 0 2px 8px rgba(24, 144, 255, 0.2);
}

.markPopup {
  min-width: 220px;
  font-size: 14px;
}

.coordinatesInfo {
  padding: 12px;
  background: #f6ffed;
  border: 1px solid #b7eb8f;
  border-radius: 6px;
  margin-top: 12px;
  font-size: 13px;
  color: #389e0d;
  display: flex;
  align-items: center;
  gap: 8px;
}

.coordinatesInfo p {
  margin: 0;
}

.floatButtonContainer {
  position: absolute;
  bottom: 20px;
  right: 20px;
  z-index: 1000;
}

.floatButton {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  transition: all 0.2s ease;
}

.floatButton:hover {
  transform: scale(1.1);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
}```

## üìÑ src/widgets/Map/ui/trailsData.js
```
export const trails = [
	{
		id: 'lbk',
		name: '–õ–ë–ö –ê–Ω–≥–∞—Ä—Å–∫–∏–π',
		center: [52.41911, 103.74019],
		zoom: 14,
		description: '–õ—ã–∂–Ω–∞—è –±–∞–∑–∞ –ê–Ω–≥–∞—Ä—Å–∫, –º–∞–ª—ã–π –∫—Ä—É–≥',
	},
	{
		id: 'akadem',
		name: '–ê–∫–∞–¥–µ–º–≥–æ—Ä–æ–¥–æ–∫',
		center: [52.24577, 104.25916],
		zoom: 15,
		description: '–ê–∫–∞–¥–µ–º–≥–æ—Ä–æ–¥–æ–∫ –ò—Ä–∫—É—Ç—Å–∫',
	},
	{
		id: 'teplye',
		name: '–¢—ë–ø–ª—ã–µ –æ–∑–µ—Ä–∞',
		center: [52.24331, 104.29682],
		zoom: 15,
		description: '–¢—ë–ø–ª—ã–µ –æ–∑–µ—Ä–∞',
	},
	{
		id: 'ersh',
		name: '–ï—Ä—à–æ–≤—Å–∫–∏–π –ª–µ—Å, –Ø–∫–æ–±–∏ - –ö—Ä–æ–∫–æ–¥–∏–ª',
		center: [52.21816, 104.32713],
		zoom: 14,
		description: '–ï—Ä—à–æ–≤—Å–∫–∏–π –ª–µ—Å',
	},
	{
		id: 'ishih',
		name: '–ò—Å—Ö–∏, –¢–æ–ø–∫–∞',
		center: [52.23199, 104.40072],
		zoom: 14,
		description: '–ò—Å—Ö–∏, –¢–æ–ø–∫–∞',
	},
	{
		id: 'dinamo',
		name: '–î–∏–Ω–∞–º–æ',
		center: [52.31187, 104.35624],
		zoom: 14,
		description: '–î–∏–Ω–∞–º–æ –ò—Ä–∫—É—Ç—Å–∫',
	},
	{
		id: 'nlo',
		name: '–ù–õ–û –û–±—ä–µ–∑–¥–Ω–∞—è',
		center: [52.34101, 104.06052],
		zoom: 14,
		description: '–ù–õ–û –û–±—ä–µ–∑–¥–Ω–∞—è',
	},
	{
		id: 'karery',
		name: '–ö–∞—Ä—å–µ—Ä—ã',
		center: [52.22813, 104.09221],
		zoom: 14,
		description: '–ö–∞—Ä—å–µ—Ä—ã',
	},
	{
		id: 'chistye',
		name: '–ß–∏—Å—Ç—ã–µ –ö–ª—é—á–∏ - –ú–æ—Ç—ã',
		center: [52.13556, 103.96366],
		zoom: 12,
		description: '–ß–∏—Å—Ç—ã–µ –ö–ª—é—á–∏ - –ú–æ—Ç—ã',
	},
	{
		id: 'snezhnaya',
		name: '–°–Ω–µ–∂–Ω–∞—è –≥–æ—Ä–∞',
		center: [52.32247, 105.10908],
		zoom: 14,
		description: '–°–Ω–µ–∂–Ω–∞—è –≥–æ—Ä–∞',
	},
	{
		id: 'bam',
		name: '–ë–ê–ú',
		center: [51.98182, 104.04374],
		zoom: 12,
		description: '–ë–ê–ú',
	},
]

export const defaultTrail = trails[0] // –õ–ë–ö –ê–Ω–≥–∞—Ä—Å–∫–∏–π
```

## üìÑ src/widgets/Map/ui/MarkControls.jsx
```
import React, { useState } from 'react';
import { Button, Modal, Form, Input, Select, Alert, Radio, message } from 'antd';
import { PlusOutlined } from '@ant-design/icons';
import L from 'leaflet';
import { supabase } from '../../../shared/api/supabase';

const { Option } = Select;
const { TextArea } = Input;

const MarkControls = ({ map, user, onMarkAdded }) => {
	const [drawing, setDrawing] = useState(false)
	const [currentLine, setCurrentLine] = useState([])
	const [modalVisible, setModalVisible] = useState(false)
	const [form] = Form.useForm()

	const categories = [
		{ value: 'dangerous_turn', label: '–û–ø–∞—Å–Ω—ã–π –ø–æ–≤–æ—Ä–æ—Ç' },
		{ value: 'steep_slope', label: '–ö—Ä—É—Ç–æ–π —Å–∫–ª–æ–Ω' },
		{ value: 'branches', label: '–í–µ—Ç–∫–∏ –Ω–∞ —Ç—Ä–∞—Å—Å–µ' },
		{ value: 'sand', label: '–ü–µ—Å–æ–∫/–≥—Ä—É–Ω—Ç' },
		{ value: 'loggers', label: '–°–ª–µ–¥—ã –ª–µ—Å–æ–≤–æ–∑–æ–≤' },
		{ value: 'untrodden', label: '–ù–µ–∑–∞—Ç—Ä–æ–ø–ª–µ–Ω–æ' },
		{ value: 'perfect', label: '–ò–¥–µ–∞–ª—å–Ω–æ' },
		{ value: 'other', label: '–î—Ä—É–≥–æ–µ' },
	]

	const startDrawing = () => {
		if (!map) return

		setDrawing(true)
		setCurrentLine([])
		console.log('–ù–∞—á–∞–ª–æ —Ä–∏—Å–æ–≤–∞–Ω–∏—è –º–µ—Ç–∫–∏')

		// –û—á–∏—â–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
		if (window.tempLine) {
			map.removeLayer(window.tempLine)
			window.tempLine = null
		}

		// –ù–æ–≤—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞
		// –ù–æ–≤—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞
		const handleClick = e => {
			e.originalEvent.stopPropagation()
			const { lat, lng } = e.latlng

			console.log(`–î–æ–±–∞–≤–ª–µ–Ω–∞ —Ç–æ—á–∫–∞:`, lat, lng)

			// –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
			setCurrentLine(prev => {
				const newLine = [...prev, [lat, lng]]

				// –†–∏—Å—É–µ–º/–æ–±–Ω–æ–≤–ª—è–µ–º –≤—Ä–µ–º–µ–Ω–Ω—É—é –ª–∏–Ω–∏—é
				if (window.tempLine) {
					map.removeLayer(window.tempLine)
				}

				if (newLine.length > 1) {
					window.tempLine = L.polyline(newLine, {
						color: '#ff0000',
						weight: 3,
						dashArray: '5, 10',
						opacity: 0.7,
					}).addTo(map)
				}

				console.log(`–¢–æ—á–∫–∏ –ª–∏–Ω–∏–∏:`, newLine.length, newLine)

				// –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –≤ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
				if (window.drawingInstructions) {
					updateInstructionsCount(newLine.length)
				}

				return newLine
			})
		}

		// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–≤–æ–π–Ω–æ–≥–æ –∫–ª–∏–∫–∞ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
	// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–≤–æ–π–Ω–æ–≥–æ –∫–ª–∏–∫–∞ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
const handleDblClick = (e) => {
  e.originalEvent.stopPropagation();
  
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ–∫—É—â—É—é –¥–ª–∏–Ω—É —á–µ—Ä–µ–∑ setTimeout, —á—Ç–æ–±—ã —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–±–Ω–æ–≤–∏–ª–æ—Å—å
  setTimeout(() => {
    console.log('–î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ - –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ, —Ç–µ–∫—É—â–∏—Ö —Ç–æ—á–µ–∫:', currentLine.length);
    
    if (currentLine.length >= 2) {
      finishDrawing();
    } else {
      console.log('–ù—É–∂–Ω–æ –∫–∞–∫ –º–∏–Ω–∏–º—É–º 2 —Ç–æ—á–∫–∏!');
      alert('–ù—É–∂–Ω–æ –∫–∞–∫ –º–∏–Ω–∏–º—É–º 2 —Ç–æ—á–∫–∏! –î–æ–±–∞–≤—å—Ç–µ –µ—â–µ —Ç–æ—á–∫–∏ –∫–ª–∏–∫–∞–º–∏.');
    }
  }, 0);
};

		// –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
		const originalClick = map._handlers?.click || []
		const originalDblClick = map._handlers?.dblclick || []

		// –û—Ç–∫–ª—é—á–∞–µ–º —Ç–µ–∫—É—â–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
		if (originalClick.length > 0) {
			originalClick.forEach(handler => map.off('click', handler))
		}
		if (originalDblClick.length > 0) {
			originalDblClick.forEach(handler => map.off('dblclick', handler))
		}

		// –í–µ—à–∞–µ–º –Ω–∞—à–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
		map.on('click', handleClick)
		map.on('dblclick', handleDblClick)

		// –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
		window.currentDrawingHandlers = {
			click: handleClick,
			dblclick: handleDblClick,
			originalClick: originalClick,
			originalDblClick: originalDblClick,
		}

		// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é
		showDrawingInstructions()
	}

	const finishDrawing = () => {
		console.log('–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∏—Å–æ–≤–∞–Ω–∏—è, –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ—á–µ–∫:', currentLine.length)

		if (!map || currentLine.length < 2) {
			console.log('–û—à–∏–±–∫–∞: –º–µ–Ω—å—à–µ 2 —Ç–æ—á–µ–∫')
			if (currentLine.length < 2) {
				alert('–û—à–∏–±–∫–∞: –Ω—É–∂–Ω–æ –∫–∞–∫ –º–∏–Ω–∏–º—É–º 2 —Ç–æ—á–∫–∏ –¥–ª—è –º–µ—Ç–∫–∏!')
			}
			return
		}

		setDrawing(false)

		// –£–±–∏—Ä–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—É—é –ª–∏–Ω–∏—é
		if (window.tempLine) {
			map.removeLayer(window.tempLine)
			window.tempLine = null
		}

		// –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
		if (window.currentDrawingHandlers) {
			map.off('click', window.currentDrawingHandlers.click)
			map.off('dblclick', window.currentDrawingHandlers.dblclick)

			if (window.currentDrawingHandlers.originalClick) {
				window.currentDrawingHandlers.originalClick.forEach(handler => {
					map.on('click', handler)
				})
			}
			if (window.currentDrawingHandlers.originalDblClick) {
				window.currentDrawingHandlers.originalDblClick.forEach(handler => {
					map.on('dblclick', handler)
				})
			}

			window.currentDrawingHandlers = null
		}

		// –£–±–∏—Ä–∞–µ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é
		removeDrawingInstructions()

		// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ–∏–Ω–∞–ª—å–Ω—É—é –ª–∏–Ω–∏—é
		if (currentLine.length >= 2) {
			const finalLine = L.polyline(currentLine, {
				color: '#52c41a',
				weight: 4,
				opacity: 0.8,
			}).addTo(map)

			// –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –∫–∞—Ä—Ç—É –Ω–∞ –ª–∏–Ω–∏–∏
			const bounds = finalLine.getBounds()
			map.fitBounds(bounds.pad(0.1))

			setTimeout(() => {
				setModalVisible(true)
			}, 500)
		}
	}

	const cancelDrawing = () => {
		setDrawing(false)
		setCurrentLine([])

		if (window.tempLine) {
			map.removeLayer(window.tempLine)
			window.tempLine = null
		}

		if (window.currentDrawingHandlers) {
			map.off('click', window.currentDrawingHandlers.click)
			map.off('dblclick', window.currentDrawingHandlers.dblclick)

			if (window.currentDrawingHandlers.originalClick) {
				window.currentDrawingHandlers.originalClick.forEach(handler => {
					map.on('click', handler)
				})
			}
			if (window.currentDrawingHandlers.originalDblClick) {
				window.currentDrawingHandlers.originalDblClick.forEach(handler => {
					map.on('dblclick', handler)
				})
			}

			window.currentDrawingHandlers = null
		}

		removeDrawingInstructions()
	}

	// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
	const showDrawingInstructions = () => {
		if (!map) return

		removeDrawingInstructions()

		window.drawingInstructions = L.control({ position: 'topright' })
		window.drawingInstructions.onAdd = function () {
			const div = L.DomUtil.create('div', 'drawing-instructions')
			div.innerHTML = `
        <div style="
          background: white; 
          padding: 12px; 
          border-radius: 6px; 
          box-shadow: 0 2px 8px rgba(0,0,0,0.3);
          border: 2px solid #1890ff;
          max-width: 200px;
          font-size: 13px;
        ">
          <div style="color: #1890ff; font-weight: bold; margin-bottom: 8px;">
            ÔøΩÔøΩ –†–∏—Å–æ–≤–∞–Ω–∏–µ –º–µ—Ç–∫–∏ (—Ç–æ—á–µ–∫: ${currentLine.length})
          </div>
          <div style="margin-bottom: 6px;">‚Ä¢ <strong>–ö–ª–∏–∫</strong> - –¥–æ–±–∞–≤–∏—Ç—å —Ç–æ—á–∫—É</div>
          <div style="margin-bottom: 8px;">‚Ä¢ <strong>–î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫</strong> - –∑–∞–≤–µ—Ä—à–∏—Ç—å</div>
          
          <button 
            id="finish-drawing-btn" 
            style="
              width: 100%; 
              padding: 6px; 
              background: #52c41a; 
              color: white; 
              border: none; 
              border-radius: 4px; 
              cursor: pointer;
              font-weight: bold;
              margin-bottom: 5px;
            "
          >
            ‚úì –ó–∞–≤–µ—Ä—à–∏—Ç—å (${currentLine.length} —Ç–æ—á–µ–∫)
          </button>
          
          <button 
            id="cancel-drawing-btn" 
            style="
              width: 100%; 
              padding: 6px; 
              background: #ff4d4f; 
              color: white; 
              border: none; 
              border-radius: 4px; 
              cursor: pointer;
              font-weight: bold;
            "
          >
            ‚úï –û—Ç–º–µ–Ω–∏—Ç—å
          </button>
        </div>
      `

			return div
		}
		window.drawingInstructions.addTo(map)

		// –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫
		setTimeout(() => {
			const finishBtn = document.getElementById('finish-drawing-btn')
			const cancelBtn = document.getElementById('cancel-drawing-btn')

			if (finishBtn) {
				finishBtn.onclick = () => {
					if (currentLine.length >= 2) {
						finishDrawing()
					} else {
						alert(
							'–ù—É–∂–Ω–æ –∫–∞–∫ –º–∏–Ω–∏–º—É–º 2 —Ç–æ—á–∫–∏! –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –∫–∞—Ä—Ç—É —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å —Ç–æ—á–∫–∏.'
						)
					}
				}
			}

			if (cancelBtn) {
				cancelBtn.onclick = cancelDrawing
			}
		}, 100)
	}

	const removeDrawingInstructions = () => {
		if (window.drawingInstructions) {
			map.removeControl(window.drawingInstructions)
			window.drawingInstructions = null
		}
	}

	const handleFormSubmit = async values => {
		try {
			console.log('–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç–∫–∏:', values, currentLine)

			if (currentLine.length < 2) {
				message.error('–ù—É–∂–Ω–æ –∫–∞–∫ –º–∏–Ω–∏–º—É–º 2 —Ç–æ—á–∫–∏')
				return
			}

			// –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ LineString –¥–ª—è PostGIS
			const coordinates = currentLine
				.map(coord => `${coord[1]} ${coord[0]}`)
				.join(', ')
			const lineString = `LINESTRING(${coordinates})`

			// –°—Ä–æ–∫ –∂–∏–∑–Ω–∏ –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫ (24 —á–∞—Å–∞)
			const expiryTime =
				values.type === 'temporary'
					? new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString()
					: null

			console.log('LineString –¥–ª—è PostGIS:', lineString)
			console.log('User ID:', user?.id)

			// –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –±–∞–∑—É
			const { data, error } = await supabase
				.from('trail_marks')
				.insert({
					user_id: user?.id,
					type: values.type,
					category: values.category,
					geometry: lineString,
					description: values.description,
					expiry_time: expiryTime,
					created_by_username: user?.email?.split('@')[0] || '–ê–Ω–æ–Ω–∏–º',
					confirmed_count: 0,
				})
				.select()

			if (error) {
				console.error('Supabase –æ—à–∏–±–∫–∞:', error)
				throw error
			}

			console.log('–ú–µ—Ç–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ –±–∞–∑—É:', data)
			message.success('–ú–µ—Ç–∫–∞ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–∞ –∫–∞—Ä—Ç—É!')

			// –ó–∞–∫—Ä—ã–≤–∞–µ–º –∏ —Å–±—Ä–∞—Å—ã–≤–∞–µ–º
			setModalVisible(false)
			form.resetFields()
			setCurrentLine([])

			// –û–±–Ω–æ–≤–ª—è–µ–º –º–µ—Ç–∫–∏ –Ω–∞ –∫–∞—Ä—Ç–µ
			if (onMarkAdded) {
				onMarkAdded()
			}
		} catch (error) {
			console.error('–ü–æ–ª–Ω–∞—è –æ—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:', error)
			message.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –º–µ—Ç–∫–∏: ' + error.message)
		}
	}
	// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–∞ —Ç–æ—á–µ–∫ –≤ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
	const updateInstructionsCount = count => {
		const instructionsDiv = document.querySelector('.drawing-instructions')
		if (instructionsDiv) {
			const countElement = instructionsDiv.querySelector(
				'[style*="color: #1890ff"]'
			)
			if (countElement) {
				countElement.innerHTML = `üéØ –†–∏—Å–æ–≤–∞–Ω–∏–µ –º–µ—Ç–∫–∏ (—Ç–æ—á–µ–∫: ${count})`
			}

			const finishBtn = document.getElementById('finish-drawing-btn')
			if (finishBtn) {
				finishBtn.innerHTML = `‚úì –ó–∞–≤–µ—Ä—à–∏—Ç—å (${count} —Ç–æ—á–µ–∫)`
			}
		}
	}
	return (
		<>
			<div
				style={{
					position: 'absolute',
					bottom: '20px',
					left: '50%',
					transform: 'translateX(-50%)',
					zIndex: 1000,
					display: 'flex',
					gap: '10px',
				}}
			>
				<Button
					type='primary'
					icon={<PlusOutlined />}
					onClick={startDrawing}
					disabled={drawing}
					size='large'
				>
					–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–∫—É –Ω–∞ —Ç—Ä–∞—Å—Å—É
				</Button>

				{drawing && (
					<Button type='default' onClick={cancelDrawing} danger size='large'>
						–û—Ç–º–µ–Ω–∏—Ç—å —Ä–∏—Å–æ–≤–∞–Ω–∏–µ
					</Button>
				)}
			</div>

			<Modal
				title='–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–∫—É –Ω–∞ —Ç—Ä–∞—Å—Å—É'
				open={modalVisible}
				onCancel={() => setModalVisible(false)}
				onOk={() => form.submit()}
				okText='–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –º–µ—Ç–∫—É'
				cancelText='–û—Ç–º–µ–Ω–∞'
				width={500}
			>
				<Form
					form={form}
					layout='vertical'
					onFinish={handleFormSubmit}
					initialValues={{
						type: 'temporary',
						category: 'branches',
					}}
				>
					<Form.Item name='type' label='–¢–∏–ø –º–µ—Ç–∫–∏' rules={[{ required: true }]}>
						<Radio.Group>
							<Radio value='permanent'>
								–ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è (–æ–ø–∞—Å–Ω—ã–π –ø–æ–≤–æ—Ä–æ—Ç –∏ —Ç.–¥.)
							</Radio>
							<Radio value='temporary'>–í—Ä–µ–º–µ–Ω–Ω–∞—è (–≤–µ—Ç–∫–∏, –ø–µ—Å–æ–∫ –∏ —Ç.–¥.)</Radio>
						</Radio.Group>
					</Form.Item>

					<Form.Item
						name='category'
						label='–ö–∞—Ç–µ–≥–æ—Ä–∏—è'
						rules={[{ required: true }]}
					>
						<Select placeholder='–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é'>
							{categories.map(cat => (
								<Option key={cat.value} value={cat.value}>
									{cat.label}
								</Option>
							))}
						</Select>
					</Form.Item>

					<Form.Item name='description' label='–û–ø–∏—Å–∞–Ω–∏–µ'>
						<TextArea
							placeholder='–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏–ª–∏ —Å–∏—Ç—É–∞—Ü–∏–∏...'
							rows={3}
						/>
					</Form.Item>

					<Alert
						message='–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è'
						description={`–î–ª–∏–Ω–∞ —É—á–∞—Å—Ç–∫–∞: ${currentLine.length} —Ç–æ—á–µ–∫`}
						type='info'
						showIcon
					/>
				</Form>
			</Modal>
		</>
	)
};

export default MarkControls;
```

## üìÑ src/widgets/Map/ui/TrailMarksLayer.jsx
```
import React, { useEffect, useState } from 'react'
import L from 'leaflet'
import { supabase } from '../../../shared/api/supabase'
import { Spin } from 'antd'
import { LoadingOutlined } from '@ant-design/icons'

const TrailMarksLayer = ({ map }) => {
	const [loading, setLoading] = useState(true)
	const [marks, setMarks] = useState([])

	// –ò–∫–æ–Ω–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
	const categoryStyles = {
		dangerous_turn: { color: '#f5222d', icon: '‚ö†Ô∏è' },
		steep_slope: { color: '#fa8c16', icon: '‚õ∞Ô∏è' },
		branches: { color: '#faad14', icon: 'üåø' },
		sand: { color: '#d48806', icon: 'üèñÔ∏è' },
		loggers: { color: '#722ed1', icon: 'üöú' },
		untrodden: { color: '#13c2c2', icon: '‚ùÑÔ∏è' },
		perfect: { color: '#52c41a', icon: '‚≠ê' },
		other: { color: '#1890ff', icon: 'üìç' },
	}

	useEffect(() => {
		if (!map) return

		const loadMarks = async () => {
			try {
				setLoading(true)

				// –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ –º–µ—Ç–∫–∏
				const { data, error } = await supabase
					.from('trail_marks')
					.select('*')
					.order('created_at', { ascending: false })

				if (error) throw error

				console.log('–ó–∞–≥—Ä—É–∂–µ–Ω–æ –º–µ—Ç–æ–∫:', data?.length || 0)

				const marksLayers = []

				// –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –∫–∞–∂–¥—É—é –º–µ—Ç–∫—É –Ω–∞ –∫–∞—Ä—Ç–µ
				data?.forEach(mark => {
					try {
						const style = categoryStyles[mark.category] || categoryStyles.other

						// –î–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫ - —Å–ø–ª–æ—à–Ω–∞—è –ª–∏–Ω–∏—è
						// –î–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö - –ø—É–Ω–∫—Ç–∏—Ä–Ω–∞—è
						const isTemporary = mark.type === 'temporary'
						const isExpired =
							mark.expiry_time && new Date(mark.expiry_time) < new Date()

						if (isExpired) return // –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ

						// –°–æ–∑–¥–∞–µ–º –ª–∏–Ω–∏—é –∏–∑ –≥–µ–æ–º–µ—Ç—Ä–∏–∏
						// TODO: –ó–¥–µ—Å—å –Ω—É–∂–Ω–æ –ø–∞—Ä—Å–∏—Ç—å geometry –∏–∑ –±–∞–∑—ã
						// –ü–æ–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º –∑–∞–≥–ª—É—à–∫—É

						const line = L.polyline(
							[
								[52.4169, 103.7388],
								[52.417, 103.739],
								[52.4168, 103.7386],
							],
							{
								color: style.color,
								weight: isTemporary ? 3 : 4,
								opacity: isTemporary ? 0.6 : 0.8,
								dashArray: isTemporary ? '5, 10' : null,
							}
						).addTo(map)

						// Popup —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
						const popupContent = `
              <div style="min-width: 200px">
                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px">
                  <span style="font-size: 20px">${style.icon}</span>
                  <strong>${getCategoryLabel(mark.category)}</strong>
                </div>
                <div><strong>–¢–∏–ø:</strong> ${
									mark.type === 'permanent' ? '–ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è' : '–í—Ä–µ–º–µ–Ω–Ω–∞—è'
								}</div>
                <div><strong>–î–æ–±–∞–≤–∏–ª:</strong> ${
									mark.created_by_username || '–ê–Ω–æ–Ω–∏–º'
								}</div>
                ${
									mark.description
										? `<div><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> ${mark.description}</div>`
										: ''
								}
                ${
									mark.expiry_time
										? `<div><strong>–ò—Å—Ç–µ–∫–∞–µ—Ç:</strong> ${new Date(
												mark.expiry_time
										  ).toLocaleString('ru-RU')}</div>`
										: ''
								}
                <div><strong>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π:</strong> ${
									mark.confirmed_count || 0
								}</div>
                <hr style="margin: 8px 0">
                <small>${new Date(mark.created_at).toLocaleString(
									'ru-RU'
								)}</small>
              </div>
            `

						line.bindPopup(popupContent)
						marksLayers.push(line)
					} catch (markError) {
						console.error('–û—à–∏–±–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–µ—Ç–∫–∏:', markError)
					}
				})

				setMarks(marksLayers)
				setLoading(false)
			} catch (err) {
				console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–µ—Ç–æ–∫:', err)
				setLoading(false)
			}
		}

		loadMarks()

		// –û—á–∏—Å—Ç–∫–∞
		return () => {
			marks.forEach(layer => {
				if (layer && map.hasLayer(layer)) {
					map.removeLayer(layer)
				}
			})
		}
	}, [map])

	const getCategoryLabel = category => {
		const labels = {
			dangerous_turn: '–û–ø–∞—Å–Ω—ã–π –ø–æ–≤–æ—Ä–æ—Ç',
			steep_slope: '–ö—Ä—É—Ç–æ–π —Å–∫–ª–æ–Ω',
			branches: '–í–µ—Ç–∫–∏ –Ω–∞ —Ç—Ä–∞—Å—Å–µ',
			sand: '–ü–µ—Å–æ–∫/–≥—Ä—É–Ω—Ç',
			loggers: '–°–ª–µ–¥—ã –ª–µ—Å–æ–≤–æ–∑–æ–≤',
			untrodden: '–ù–µ–∑–∞—Ç—Ä–æ–ø–ª–µ–Ω–æ',
			perfect: '–ò–¥–µ–∞–ª—å–Ω–æ',
			other: '–î—Ä—É–≥–æ–µ',
		}
		return labels[category] || category
	}
	const renderMark = mark => {
		if (!map || !mark) return null

		try {
			// –ü–∞—Ä—Å–∏–º geometry –∏–∑ –±–∞–∑—ã (–ø–æ–∫–∞ –∑–∞–≥–ª—É—à–∫–∞)
			const style =
				mark.type === 'permanent'
					? { color: '#f5222d', weight: 4, opacity: 0.8 }
					: { color: '#faad14', weight: 3, opacity: 0.6, dashArray: '5, 10' }

			// –í—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã - –ø–æ—Ç–æ–º –∑–∞–º–µ–Ω–∏–º –Ω–∞ –ø–∞—Ä—Å–∏–Ω–≥
			const coordinates = [
				[52.4169 + Math.random() * 0.001, 103.7388 + Math.random() * 0.001],
				[52.417 + Math.random() * 0.001, 103.739 + Math.random() * 0.001],
				[52.4168 + Math.random() * 0.001, 103.7386 + Math.random() * 0.001],
			]

			const line = L.polyline(coordinates, style).addTo(map)

			const popupContent = `
      <div style="min-width: 200px">
        <strong>${mark.category}</strong><br>
        <div>–¢–∏–ø: ${
					mark.type === 'permanent' ? '–ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è' : '–í—Ä–µ–º–µ–Ω–Ω–∞—è'
				}</div>
        ${mark.description ? `<div>${mark.description}</div>` : ''}
        <div><small>–î–æ–±–∞–≤–∏–ª: ${
					mark.created_by_username || '–ê–Ω–æ–Ω–∏–º'
				}</small></div>
        <div><small>${new Date(mark.created_at).toLocaleString(
					'ru-RU'
				)}</small></div>
      </div>
    `

			line.bindPopup(popupContent)
			return line
		} catch (err) {
			console.error('–û—à–∏–±–∫–∞ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –º–µ—Ç–∫–∏:', err, mark)
			return null
		}
	}
	if (loading) {
		return (
			<div
				style={{
					position: 'absolute',
					top: '50px',
					right: '10px',
					zIndex: 1000,
					background: 'rgba(255,255,255,0.9)',
					padding: '8px 12px',
					borderRadius: '4px',
					boxShadow: '0 2px 4px rgba(0,0,0,0.1)',
					fontSize: '12px',
				}}
			>
				<Spin indicator={<LoadingOutlined style={{ fontSize: 14 }} spin />} />
				<span style={{ marginLeft: '8px' }}>–ó–∞–≥—Ä—É–∑–∫–∞ –º–µ—Ç–æ–∫...</span>
			</div>
		)
	}

	return (
		<div
			style={{
				position: 'absolute',
				top: '50px',
				right: '10px',
				zIndex: 1000,
				background: 'rgba(255,255,255,0.9)',
				padding: '8px 12px',
				borderRadius: '4px',
				boxShadow: '0 2px 4px rgba(0,0,0,0.1)',
				fontSize: '12px',
			}}
		>
			–ú–µ—Ç–æ–∫ –Ω–∞ –∫–∞—Ä—Ç–µ: {marks.length}
		</div>
	)
}

export default TrailMarksLayer
```

## üìÑ src/widgets/Map/ui/TrailSelector.module.css
```
.selectorContainer {
	display: flex;
	align-items: center;
	gap: 12px;
	margin-bottom: 16px;
}

.selectorLabel {
	font-size: 16px;
	font-weight: 500;
	color: #262626;
	white-space: nowrap;
}

.selector {
	min-width: 250px;
}

.trailDescription {
	margin-top: 8px;
	font-size: 13px;
	color: #8c8c8c;
	background: #fafafa;
	padding: 8px 12px;
	border-radius: 6px;
	border-left: 3px solid #1890ff;
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
@media (max-width: 768px) {
	.selectorContainer {
		flex-direction: column;
		align-items: flex-start;
		gap: 8px;
	}
	
	.selector {
		width: 100%;
		min-width: unset;
	}
}```

## üìÑ src/widgets/Map/ui/Map.module.css
```
.mapContainer {
  width: 100%;
  height: 500px; /* –¢–û–õ–¨–ö–û –û–î–ù–ê –í–´–°–û–¢–ê */
  min-height: 500px;
  border-radius: 8px;
  overflow: hidden;
  margin-bottom: 20px;
  border: 1px solid #f0f0f0;
  position: relative;
}

/* –£–ë–ò–†–ê–ï–ú –§–õ–ê–ì */
.mapContainer :global(.leaflet-attribution-flag) {
  display: none !important;
}

/* –£–º–µ–Ω—å—à–∞–µ–º –∞—Ç—Ä–∏–±—É—Ü–∏—é */
.mapContainer :global(.leaflet-control-attribution) {
  font-size: 10px;
  padding: 2px 6px;
  background: rgba(255, 255, 255, 0.9);
  color: #666;
  border-radius: 3px;
}

.mapContainer :global(.leaflet-control-attribution a) {
  color: #1890ff;
  text-decoration: none;
}

.mapContainer :global(.leaflet-control-attribution a:hover) {
  text-decoration: underline;
}

@media (max-width: 768px) {
  .mapContainer {
    height: 400px !important; /* !important —á—Ç–æ–±—ã –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å */
    min-height: 400px !important;
  }
  .card {
    padding: 12px;
    margin: 0;
  }
  
  .legend {
    padding: 10px;
    font-size: 12px;
  }
  
  .legend h4 {
    font-size: 14px;
  }
  
  .legend ul {
    margin: 8px 0;
  }
  
  .legend li {
    font-size: 12px;
    margin-bottom: 6px;
  }
}

/* –§–∏–∫—Å –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ä—Ç—ã - —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø—É—Å—Ç–∞—è */
.mapContainer:empty {
  min-height: 400px;
  background: #f5f5f5;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #999;
}

.mapContainer {
  width: 100%;
  height: 500px;
  min-height: 500px;
  border-radius: 8px;
  overflow: hidden;
  margin-bottom: 20px;
  border: 1px solid #f0f0f0;
  position: relative;
}

/* –£–±–∏—Ä–∞–µ–º —Ñ–ª–∞–≥ –∞—Ç—Ä–∏–±—É—Ü–∏–∏ */
.mapContainer :global(.leaflet-attribution-flag) {
  display: none !important;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –∏–∫–æ–Ω–æ–∫ –º–µ—Ç–æ–∫ */
.mapContainer :global(.custom-div-icon) {
  background: none !important;
  border: none !important;
  text-align: center;
  /* –£–±–∏—Ä–∞–µ–º font-size –æ—Ç—Å—é–¥–∞, –æ–Ω —Ç–µ–ø–µ—Ä—å inline –≤ html */
  text-shadow: 
    0.5px 0.5px 0 white,     /* –£–º–µ–Ω—å—à–∏–ª –æ–±–≤–æ–¥–∫—É */
    -0.5px -0.5px 0 white,
    0.5px -0.5px 0 white,
    -0.5px 0.5px 0 white;
}

/* –≠—Ñ—Ñ–µ–∫—Ç –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –Ω–∞ –º–µ—Ç–∫—É */
.mapContainer :global(.leaflet-marker-icon:hover) {
  filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.3));
  transform: scale(1.1);
  transition: transform 0.2s ease;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è popup –∫–Ω–æ–ø–æ–∫ */
.mapContainer :global(.leaflet-popup-content button:hover:not(:disabled)) {
  transform: translateY(-1px);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  transition: all 0.2s ease;
}

.mapContainer :global(.leaflet-popup-content button:active:not(:disabled)) {
  transform: translateY(0);
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
@media (max-width: 768px) {
  .mapContainer {
    height: 400px !important;
    min-height: 400px !important;
  }
}

.card {
  margin-bottom: 20px;
}

.legend {
  margin-top: 15px;
  padding: 15px;
  background: #fafafa;
  border-radius: 8px;
  border: 1px solid #f0f0f0;
}

.legend h4 {
  margin-top: 0;
  margin-bottom: 10px;
  color: #1890ff;
}

.legend ul {
  margin: 0;
  padding-left: 20px;
}

.legend li {
  margin-bottom: 6px;
  font-size: 14px;
  color: #666;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–º –º–µ–Ω—é */
.contextMenu {
  padding: 10px;
  min-width: 200px;
}

.contextMenu h4 {
  margin: 0 0 10px 0;
  color: #1890ff;
}

.contextMenu button {
  display: block;
  width: 100%;
  padding: 8px 12px;
  margin-bottom: 5px;
  background: #f5f5f5;
  border: 1px solid #d9d9d9;
  border-radius: 4px;
  cursor: pointer;
  text-align: left;
}

.contextMenu button:hover {
  background: #1890ff;
  color: white;
  border-color: #1890ff;
}

.markPopup {
  min-width: 200px;
  font-size: 14px;
}

.coordinatesInfo {
  padding: 10px;
  background: #f6ffed;
  border: 1px solid #b7eb8f;
  border-radius: 4px;
  margin-top: 10px;
  font-size: 12px;
  color: #389e0d;
}

.floatButtonContainer {
  position: absolute;
  bottom: 20px;
  right: 20px;
  z-index: 1000;
}

.floatButton {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.floatButton:hover {
  transform: scale(1.05);
  transition: transform 0.2s;
}

/* –ê–Ω–∏–º–∞—Ü–∏—è —Å—á–µ—Ç—á–∏–∫–∞ –º–µ—Ç–æ–∫ */
.marksCounter {
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0% { box-shadow: 0 0 0 0 rgba(82, 196, 26, 0.4); }
  70% { box-shadow: 0 0 0 10px rgba(82, 196, 26, 0); }
  100% { box-shadow: 0 0 0 0 rgba(82, 196, 26, 0); }
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —Ä–∏—Å–æ–≤–∞–Ω–∏—è */
.drawingInstructions {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Å —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–º */
.cardHeader {
	display: flex;
	flex-direction: column;
	gap: 12px;
	margin-bottom: 16px;
}

.cardTitle {
	margin: 0;
	font-size: 20px;
	font-weight: 600;
	color: #262626;
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫–∞ */
@media (max-width: 768px) {
	.cardHeader {
		gap: 8px;
	}
	
	.cardTitle {
		font-size: 18px;
	}
}

.legendSubtext {
	font-size: 12px;
	color: #999;
	margin-top: 8px;
	padding-top: 8px;
	border-top: 1px solid #f0f0f0;
}```

## üìÑ src/widgets/Map/ui/Map.jsx
```
import React, { useEffect, useRef, useState } from 'react'
import { Card } from 'antd'
import L from 'leaflet'
import 'leaflet/dist/leaflet.css'
import MapClickMenu from './MapClickMenu'
import TrailMarksDisplay from './TrailMarksDisplay'
import TrailSelector from './TrailSelector'
import GpxLayer from './GpxLayer'

import { trails, defaultTrail } from './trailsData'
import styles from './Map.module.css'

const Map = ({ user }) => {
	const mapContainerRef = useRef(null)
	const mapInstanceRef = useRef(null)
	const [selectedTrail, setSelectedTrail] = useState(defaultTrail)

	// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ä—Ç—ã
	useEffect(() => {
		const initMap = () => {
			if (!mapInstanceRef.current && mapContainerRef.current) {
				const mapInstance = L.map(mapContainerRef.current).setView(
					selectedTrail.center,
					selectedTrail.zoom
				)

				L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
					attribution: '¬© OpenStreetMap',
					maxZoom: 19,
				}).addTo(mapInstance)

				mapInstanceRef.current = mapInstance
			}
		}

		setTimeout(initMap, 100)

		return () => {
			if (mapInstanceRef.current) {
				mapInstanceRef.current.remove()
				mapInstanceRef.current = null
			}
		}
	}, []) // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–∞—Ä—Ç—É —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑

	// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω—Ç—Ä–∞ –∫–∞—Ä—Ç—ã –ø—Ä–∏ –≤—ã–±–æ—Ä–µ —Ç—Ä–∞—Å—Å—ã
	useEffect(() => {
		if (mapInstanceRef.current && selectedTrail) {
			mapInstanceRef.current.setView(selectedTrail.center, selectedTrail.zoom)
		}
	}, [selectedTrail])

	const handleTrailChange = trail => {
		setSelectedTrail(trail)
	}

	return (
		<Card className={styles.card}>
			<div className={styles.cardHeader}>
				<TrailSelector
					selectedTrail={selectedTrail}
					onTrailChange={handleTrailChange}
				/>
			</div>

			<div ref={mapContainerRef} className={styles.mapContainer}>
				{mapInstanceRef.current && user && (
					<MapClickMenu map={mapInstanceRef.current} user={user} />
				)}
				{mapInstanceRef.current && (
					<TrailMarksDisplay map={mapInstanceRef.current} user={user} />
				)}
				{mapInstanceRef.current && (
					<GpxLayer map={mapInstanceRef.current} />
				)}{' '}
			</div>

			<div className={styles.legend}>
				<h4>–õ–µ–≥–µ–Ω–¥–∞ –º–µ—Ç–æ–∫:</h4>
				<ul>
					<li>‚ö†Ô∏è –û–ø–∞—Å–Ω—ã–π –ø–æ–≤–æ—Ä–æ—Ç</li>
					<li>‚õ∞Ô∏è –ö—Ä—É—Ç–æ–π —Å–∫–ª–æ–Ω</li>
					<li>üåø –í–µ—Ç–∫–∏ –Ω–∞ —Ç—Ä–∞—Å—Å–µ</li>
					<li>üèñÔ∏è –ü–µ—Å–æ–∫/–≥—Ä—É–Ω—Ç</li>
					<li>üöú –°–ª–µ–¥—ã –ª–µ—Å–æ–≤–æ–∑–æ–≤</li>
					<li>‚ùÑÔ∏è –ù–µ–∑–∞—Ç—Ä–æ–ø–ª–µ–Ω–æ</li>
					<li>‚≠ê –ò–¥–µ–∞–ª—å–Ω–æ</li>
					<li>üìç –î—Ä—É–≥–æ–µ</li>
				</ul>
				<div className={styles.legendSubtext}>
					üîí –ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è –º–µ—Ç–∫–∞ | ‚è∞ –í—Ä–µ–º–µ–Ω–Ω–∞—è (24—á)
				</div>
			</div>
		</Card>
	)
}

export default Map
```

## üìÑ src/widgets/Map/ui/TrailSelector.jsx
```
import React from 'react'
import { Select } from 'antd'
import { trails, defaultTrail } from './trailsData'
import styles from './TrailSelector.module.css'

const { Option } = Select

const TrailSelector = ({ selectedTrail, onTrailChange }) => {
	const handleChange = value => {
		const trail = trails.find(t => t.id === value) || defaultTrail
		onTrailChange(trail)
	}

	return (
		<>
			<div className={styles.selectorContainer}>
				<span className={styles.selectorLabel}>–¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ä—Ç—É:</span>
				<Select
					className={styles.selector}
					value={selectedTrail.id}
					onChange={handleChange}
					placeholder='–í—ã–±–µ—Ä–∏—Ç–µ —Ç—Ä–∞—Å—Å—É'
					size='large'
				>
					{trails.map(trail => (
						<Option key={trail.id} value={trail.id}>
							{trail.name}
						</Option>
					))}
				</Select>
			</div>
		</>
	)
}

export default TrailSelector
```

## üìÑ src/widgets/Map/index.js
```
import Map from './ui/Map'
export default Map
```

```
# üéø –ü–û–õ–ù–´–ô –ö–û–ù–¢–ï–ö–°–¢ –ü–†–û–ï–ö–¢–ê "SKITRACK"

## üìã **–ò—Å—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞** (–Ω–∞ –Ω–∞—á–∞–ª–æ –±–µ—Å–µ–¥—ã)
**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–µ–µ –∏ –∑–∞–¥–µ–ø–ª–æ–µ–Ω–æ –Ω–∞ Vercel!**
- **Frontend:** React (Create React App) –Ω–∞ Vercel Ant-design
- **Backend:** Supabase (PostgreSQL + Auth + Storage)
- **–î–æ–º–µ–Ω:** –õ—ã–∂–Ω—ã–π –†–µ–π—Ç–∏–Ω–≥
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:** –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, —Ç–∞–±–ª–∏—Ü–∞ –∑–∞–µ–∑–¥–æ–≤, –ø—Ä–æ—Ñ–∏–ª–∏, –∑–∞–≥—Ä—É–∑–∫–∞ GPX —Ç—Ä–µ–∫–æ–≤, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–µ–∑–¥–æ–≤

## üîó **–°—Å—ã–ª–∫–∏**
- **Frontend:** `https://ski-leaderboard.vercel.app`
- **Supabase:** `https://xsqelqxwthjufdwfdecf.supabase.co`
- **GitHub:** `https://github.com/krik2004/ski-leaderboard`

## üóÉÔ∏è **–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**

### **–¢–∞–±–ª–∏—Ü–∞ `profiles`:**
```sql
CREATE TABLE profiles (
  id UUID REFERENCES auth.users(id) ON DELETE CASCADE PRIMARY KEY,
  username TEXT UNIQUE NOT NULL,
  ski_model TEXT,
  visibility_preference VARCHAR(20) DEFAULT 'public' CHECK (visibility_preference IN ('anonymous', 'public')),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

### **–¢–∞–±–ª–∏—Ü–∞ `lap_times`:**
```sql
CREATE TABLE lap_times (
  id BIGSERIAL PRIMARY KEY,
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE NOT NULL,
  time_seconds INTEGER NOT NULL CHECK (time_seconds > 0),
  user_name TEXT,
  ski_model TEXT,
  gpx_track_url TEXT,
  verified BOOLEAN DEFAULT FALSE,
  comment TEXT,
  date TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

### **Storage bucket:** `gpx-tracks` (–ø—É–±–ª–∏—á–Ω—ã–π)

## üèóÔ∏è **–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ React**
```
ski-leaderboard/
src/App.jsx
src/components/About.jsx
src/components/About.module.css
src/components/AddTimeForm.jsx
src/components/Profile.jsx
src/features/auth/index.js
src/features/auth/ui/Auth.jsx
src/features/auth/ui/Auth.module.css
src/features/auth/ui/index.js
src/features/lap-times/index.js
src/features/lap-times/ui/AddTimeForm.jsx
src/features/lap-times/ui/AddTimeForm.module.css
src/features/lap-times/ui/EditTimeForm.jsx
src/features/profile/index.js
src/features/profile/ui/Profile.jsx
src/features/profile/ui/Profile.module.css
src/index.js
src/lib/supabase.js
src/shared/api/supabase.js
src/styles/App.css
src/styles/base.css
src/styles/components.css
src/styles/utilities.css
src/supabase.js
src/widgets/Leaderboard/index.js
src/widgets/Leaderboard/ui/Leaderboard.jsx
src/widgets/Leaderboard/ui/Leaderboard.module.css
src/widgets/about/index.js
src/widgets/about/ui/About.jsx
src/widgets/about/ui/About.module.css
```

---

## üîÑ **–ß–¢–û –ë–´–õ–û –°–î–ï–õ–ê–ù–û –í –≠–¢–û–ô –ë–ï–°–ï–î–ï**

### üó∫Ô∏è **1. –î–û–ë–ê–í–õ–ï–ù–ê –ò–ù–¢–ï–†–ê–ö–¢–ò–í–ù–ê–Ø –ö–ê–†–¢–ê**

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** Leaflet + OpenStreetMap + react-leaflet@4.2.1

**–ù–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
```
src/widgets/Map/
‚îú‚îÄ‚îÄ index.js
‚îú‚îÄ‚îÄ ui/
‚îÇ   ‚îú‚îÄ‚îÄ Map.jsx                    # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–∞—Ä—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ Map.module.css
‚îÇ   ‚îú‚îÄ‚îÄ GpxLayer.jsx               # –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ GPX —Ç—Ä–µ–∫–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ MapClickMenu.jsx           # –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –º–µ—Ç–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ MapClickMenu.module.css
‚îÇ   ‚îú‚îÄ‚îÄ TrailMarksDisplay.jsx      # –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–µ—Ç–æ–∫ –Ω–∞ –∫–∞—Ä—Ç–µ
‚îÇ   ‚îî‚îÄ‚îÄ TrailMarksLayer.jsx        # (–£—Å—Ç–∞—Ä–µ–≤—à–∏–π) –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
```

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ App.jsx:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∫–ª–∞–¥–∫–∞ "–ö–∞—Ä—Ç–∞" —Å –∏–∫–æ–Ω–∫–æ–π `<EnvironmentOutlined />`
- –ü–µ—Ä–µ–¥–∞—á–∞ `user` –ø—Ä–æ–ø—Å–∞ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `Map`
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–π –≤–∫–ª–∞–¥–∫–∏ –≤ localStorage

### üóÉÔ∏è **2. –°–û–ó–î–ê–ù–ê –ù–û–í–ê–Ø –¢–ê–ë–õ–ò–¶–ê –î–õ–Ø –ú–ï–¢–û–ö**

```sql
CREATE TABLE trail_marks (
  id BIGSERIAL PRIMARY KEY,
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
  type VARCHAR(20) NOT NULL CHECK (type IN ('permanent', 'temporary')),
  category VARCHAR(50) NOT NULL,
  geometry geometry(LineString, 4326) NOT NULL,
  description TEXT,
  expiry_time TIMESTAMP WITH TIME ZONE,
  confirmed_count INTEGER DEFAULT 0,
  created_by_username TEXT,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- RLS –ø–æ–ª–∏—Ç–∏–∫–∏:
ALTER TABLE trail_marks ENABLE ROW LEVEL SECURITY;
CREATE POLICY "–í—Å–µ –≤–∏–¥—è—Ç –º–µ—Ç–∫–∏" ON trail_marks FOR SELECT USING (true);
CREATE POLICY "–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –¥–æ–±–∞–≤–ª—è—é—Ç –º–µ—Ç–∫–∏" ON trail_marks FOR INSERT WITH CHECK (auth.uid() IS NOT NULL);
CREATE POLICY "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–∏ –º–µ—Ç–∫–∏" ON trail_marks FOR UPDATE USING (auth.uid() = user_id);
CREATE POLICY "–£–¥–∞–ª—è—Ç—å —Å–≤–æ–∏ –º–µ—Ç–∫–∏" ON trail_marks FOR DELETE USING (auth.uid() = user_id);
```

**–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –º–µ—Ç–æ–∫:**
- `dangerous_turn` - –û–ø–∞—Å–Ω—ã–π –ø–æ–≤–æ—Ä–æ—Ç
- `steep_slope` - –ö—Ä—É—Ç–æ–π —Å–∫–ª–æ–Ω  
- `branches` - –í–µ—Ç–∫–∏ –Ω–∞ —Ç—Ä–∞—Å—Å–µ
- `sand` - –ü–µ—Å–æ–∫/–≥—Ä—É–Ω—Ç
- `loggers` - –°–ª–µ–¥—ã –ª–µ—Å–æ–≤–æ–∑–æ–≤
- `untrodden` - –ù–µ–∑–∞—Ç—Ä–æ–ø–ª–µ–Ω–æ
- `perfect` - –ò–¥–µ–∞–ª—å–Ω–æ
- `other` - –î—Ä—É–≥–æ–µ

### üéØ **3. –†–ï–ê–õ–ò–ó–û–í–ê–ù –§–£–ù–ö–¶–ò–û–ù–ê–õ –î–û–ë–ê–í–õ–ï–ù–ò–Ø –ú–ï–¢–û–ö**

**–î–≤–∞ —Å–ø–æ—Å–æ–±–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è:**
1. **–¢–æ—á–∫–∞** - –æ–¥–∏–Ω–æ—á–Ω–∞—è –º–µ—Ç–∫–∞
2. **–£—á–∞—Å—Ç–æ–∫ —Ç—Ä–∞—Å—Å—ã** - —Ä–∏—Å–æ–≤–∞–Ω–∏–µ –ª–∏–Ω–∏–∏ (2+ —Ç–æ—á–µ–∫)

**–ü—Ä–æ—Ü–µ—Å—Å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è:**
1. –ö–ª–∏–∫ –Ω–∞ –∫–∞—Ä—Ç—É ‚Üí –≤—Å–ø–ª—ã–≤–∞—é—â–µ–µ –º–µ–Ω—é
2. –í—ã–±–æ—Ä —Ç–∏–ø–∞ –º–µ—Ç–∫–∏ (—Ç–æ—á–∫–∞/—É—á–∞—Å—Ç–æ–∫)
3. –í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ
4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ –∫–∞—Ä—Ç–µ

**–§–æ—Ä–º–∞—Ç —Ö—Ä–∞–Ω–µ–Ω–∏—è geometry:** PostGIS LineString –≤ –±–∏–Ω–∞—Ä–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ EWKB

### ‚ö° **4. –û–¢–û–ë–†–ê–ñ–ï–ù–ò–ï –°–£–©–ï–°–¢–í–£–Æ–©–ò–• –ú–ï–¢–û–ö**

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç `TrailMarksDisplay.jsx`:**
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç –º–µ—Ç–∫–∏ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `trail_marks`
- –ü–∞—Ä—Å–∏—Ç –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç PostGIS (EWKB) ‚Üí GeoJSON ‚Üí –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã Leaflet
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ª–∏–Ω–∏–∏ —Å —Ä–∞–∑–Ω—ã–º–∏ —Å—Ç–∏–ª—è–º–∏:
  - **–ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ:** —Å–ø–ª–æ—à–Ω—ã–µ –ª–∏–Ω–∏–∏
  - **–í—Ä–µ–º–µ–Ω–Ω—ã–µ:** –ø—É–Ω–∫—Ç–∏—Ä–Ω—ã–µ –ª–∏–Ω–∏–∏ (—Å—Ä–æ–∫ –∂–∏–∑–Ω–∏ 24—á)
- Popup —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π: –∫–∞—Ç–µ–≥–æ—Ä–∏—è, –æ–ø–∏—Å–∞–Ω–∏–µ, –∞–≤—Ç–æ—Ä, –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è

### üé® **5. –°–¢–ò–õ–ò –ò –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨**

**Map.module.css:**
- –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤—ã—Å–æ—Ç–∞ –∫–∞—Ä—Ç—ã: 500px (–¥–µ—Å–∫—Ç–æ–ø), 400px (–º–æ–±–∏–ª—å–Ω—ã–µ)
- –£–±—Ä–∞–Ω–∞ –∏–∫–æ–Ω–∫–∞ —Ñ–ª–∞–≥–∞ –£–∫—Ä–∞–∏–Ω—ã –∏–∑ –∞—Ç—Ä–∏–±—É—Ü–∏–∏
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω —á–µ—Ä–µ–∑ –º–µ–¥–∏–∞-–∑–∞–ø—Ä–æ—Å—ã

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è App.jsx:**
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–π –≤–∫–ª–∞–¥–∫–∏ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã –Ω–∞ —Ç–æ—á–∫–µ `[52.416925, 103.738906]` (–õ–ë–ö)

---

## ‚ö†Ô∏è **–¢–ï–ö–£–©–ò–ï –ü–†–û–ë–õ–ï–ú–´ –ò –ò–• –°–¢–ê–¢–£–°**

### üî¥ **–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï:**
1. **–ú–µ—Ç–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å–æ —Å–º–µ—â–µ–Ω–∏–µ–º**
   - **–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ –±–∏–Ω–∞—Ä–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ PostGIS (EWKB)
   - **–î–∞–Ω–Ω—ã–µ –≤ –ë–î:** `"0102000020E610000002000000010000D0DCED5940F829B03C69344A40B32E6E73DEED59405C878C836C344A40"`
   - **–§–æ—Ä–º–∞—Ç:** EWKB (Extended Well-Known Binary), –∞ –Ω–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–π LineString

2. **–û—à–∏–±–∫–∞ 400 –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –º–µ—Ç–æ–∫**
   - **–û—à–∏–±–∫–∞:** `"Could not find a relationship between 'trail_marks' and 'st_asgeojson'"`
   - **–ü—Ä–∏—á–∏–Ω–∞:** Supabase REST API –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç SQL —Ñ—É–Ω–∫—Ü–∏–∏ –≤ select
   - **–†–µ—à–µ–Ω–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–æ:** –°–æ–∑–¥–∞—Ç—å RPC —Ñ—É–Ω–∫—Ü–∏—é `get_geometry_as_geojson`

### üü° **–°–†–ï–î–ù–ï–ô –í–ê–ñ–ù–û–°–¢–ò:**
3. **RLS –æ—Ç–∫–ª—é—á–µ–Ω –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã `trail_marks`**
   - **–°—Ç–∞—Ç—É—Å:** "Data is publicly accessible via API as RLS is disabled"
   - **–†–∏—Å–∫:** –õ—é–±–æ–π –º–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å/–ø–∏—Å–∞—Ç—å/—É–¥–∞–ª—è—Ç—å –º–µ—Ç–∫–∏
   - **–†–µ—à–µ–Ω–∏–µ:** –í–∫–ª—é—á–∏—Ç—å RLS (SQL –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω)

4. **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–∏—Å–æ–≤–∞–Ω–∏—è –º–µ—Ç–æ–∫ –Ω–µ—Å—Ç–∞–±–∏–ª–µ–Ω**
   - **–ü—Ä–æ–±–ª–µ–º–∞:** `handleDrawingClick is not defined`
   - **–°—Ç–∞—Ç—É—Å:** –ß–∞—Å—Ç–∏—á–Ω–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ, –Ω–æ –Ω—É–∂–Ω–∞ –¥–æ—Ä–∞–±–æ—Ç–∫–∞

### üü¢ **–ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï:**
5. **–ö–∞—Ä—Ç–∞ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∞—Å—å –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö** ‚úÖ
   - **–ü—Ä–∏—á–∏–Ω–∞:** –ö–æ–Ω—Ñ–ª–∏–∫—Ç CSS —Å—Ç–∏–ª–µ–π –≤—ã—Å–æ—Ç—ã
   - **–†–µ—à–µ–Ω–∏–µ:** –£–±—Ä–∞–Ω—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ –º–µ–¥–∏–∞-–∑–∞–ø—Ä–æ—Å—ã

6. **–§–ª–∞–≥ –£–∫—Ä–∞–∏–Ω—ã –≤ –∞—Ç—Ä–∏–±—É—Ü–∏–∏** ‚úÖ
   - **–†–µ—à–µ–Ω–∏–µ:** CSS —Å–∫—Ä—ã—Ç–∏–µ `.leaflet-attribution-flag`

---

## üõ†Ô∏è **–ì–û–¢–û–í–´–ï –†–ï–®–ï–ù–ò–Ø –î–õ–Ø –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø**

### **1. RPC –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –ü–†–ï–û–ë–†–ê–ó–û–í–ê–ù–ò–Ø GEOJSON**
```sql
CREATE OR REPLACE FUNCTION get_geometry_as_geojson(geom_id bigint)
RETURNS json AS $$
DECLARE
  result json;
BEGIN
  SELECT ST_AsGeoJSON(geometry)::json
  INTO result
  FROM trail_marks
  WHERE id = geom_id;
  
  RETURN result;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;
```

### **2. –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô –ó–ê–ü–†–û–° –í `TrailMarksDisplay.jsx`**
```javascript
// –í–º–µ—Å—Ç–æ:
const { data, error } = await supabase
  .from('trail_marks')
  .select(`*, geometry:st_asgeojson(geometry)`)
  .order('created_at', { ascending: false });

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
const { data, error } = await supabase
  .from('trail_marks')
  .select('*')
  .order('created_at', { ascending: false });

// –î–ª—è –∫–∞–∂–¥–æ–π –º–µ—Ç–∫–∏ –æ—Ç–¥–µ–ª—å–Ω–æ:
const { data: geoData } = await supabase.rpc(
  'get_geometry_as_geojson', 
  { geom_id: mark.id }
);
```

### **3. –ü–ê–†–°–ò–ù–ì WKB –ù–ê –ö–õ–ò–ï–ù–¢–ï (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)**
```javascript
const parseWkbGeometry = (wkbHex) => {
  // –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ hex —Å—Ç—Ä–æ–∫–∏ EWKB –≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã [lat, lng]
  // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∞ –≤ –±–µ—Å–µ–¥–µ
};
```

---

## üì± **–¢–ï–ö–£–©–ò–ô –ò–ù–¢–ï–†–§–ï–ô–°**

### **–í–ö–õ–ê–î–ö–ò:**
```
–¢–∞–±–ª–∏—Ü–∞ (üèÜ) | –ö–∞—Ä—Ç–∞ (üó∫Ô∏è) | –î–æ–±–∞–≤–∏—Ç—å (‚ûï) | –û –ø—Ä–æ–µ–∫—Ç–µ (‚ÑπÔ∏è) | –ü—Ä–æ—Ñ–∏–ª—å (üë§)
```

### **–ö–ê–†–¢–ê –°–û–î–ï–†–ñ–ò–¢:**
1. **GPX —Ç—Ä–µ–∫–∏** –∑–∞–µ–∑–¥–æ–≤ (—Ü–≤–µ—Ç –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–æ–∑—Ä–∞—Å—Ç–∞)
2. **–ú–µ—Ç–∫–∏ —Ç—Ä–∞—Å—Å—ã** (–ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ/–≤—Ä–µ–º–µ–Ω–Ω—ã–µ)
3. **–ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è** –º–µ—Ç–æ–∫ (FloatButton –≤ —É–≥–ª—É)
4. **–õ–µ–≥–µ–Ω–¥–∞** —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ–º —Ü–≤–µ—Ç–æ–≤ –∏ —Ç–∏–ø–æ–≤
5. **–°—á—ë—Ç—á–∏–∫ –º–µ—Ç–æ–∫** "üìç –ú–µ—Ç–æ–∫ –Ω–∞ –∫–∞—Ä—Ç–µ: X"

### **–ü–†–û–¶–ï–°–° –î–û–ë–ê–í–õ–ï–ù–ò–Ø –ú–ï–¢–ö–ò:**
1. –ö–ª–∏–∫ –Ω–∞ –∫–∞—Ä—Ç—É ‚Üí –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é
2. –í—ã–±–æ—Ä "–¢–æ—á–∫—É" –∏–ª–∏ "–£—á–∞—Å—Ç–æ–∫ —Ç—Ä–∞—Å—Å—ã"
3. –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã (—Ç–∏–ø, –∫–∞—Ç–µ–≥–æ—Ä–∏—è, –æ–ø–∏—Å–∞–Ω–∏–µ)
4. –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ –∫–∞—Ä—Ç–µ

---

## üîÆ **–ü–õ–ê–ù –î–ê–õ–¨–ù–ï–ô–®–ï–ô –†–ê–ó–†–ê–ë–û–¢–ö–ò**

### **–í–´–°–û–ö–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢:**
1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç** –º–µ—Ç–æ–∫
2. **–í–∫–ª—é—á–∏—Ç—å RLS** –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã `trail_marks`
3. **–°—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å** –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–∏—Å–æ–≤–∞–Ω–∏—è –º–µ—Ç–æ–∫

### **–°–†–ï–î–ù–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢:**
4. **–î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ** –º–µ—Ç–æ–∫ –¥—Ä—É–≥–∏–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
5. **–°–∏—Å—Ç–µ–º–∞ "—Å—Ç–∞—Ä–µ–Ω–∏—è"** –º–µ—Ç–æ–∫ (–∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 24—á)
6. **–ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è** –º–µ—Ç–æ–∫ –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ

### **–ù–ò–ó–ö–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢:**
7. **–¢–µ–ø–ª–æ–≤–∞—è –∫–∞—Ä—Ç–∞** –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –Ω–∞ —Ç—Ä–∞—Å—Å–µ
8. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** –ø–æ –º–µ—Ç–∫–∞–º
9. **–ú–æ–±–∏–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è

---

## üíæ **–ö–õ–Æ–ß–ï–í–´–ï –ù–ê–°–¢–†–û–ô–ö–ò PRODUCTION**

### **Supabase:**
- **Project URL:** `https://xsqelqxwthjufdwfdecf.supabase.co`
- **Auth Redirect URLs:** `https://ski-leaderboard.vercel.app/auth/callback`
- **Email confirmation:** –≤–∫–ª—é—á–µ–Ω–æ
- **Storage bucket:** `gpx-tracks` (–ø—É–±–ª–∏—á–Ω—ã–π —Å –ø–æ–ª–∏—Ç–∏–∫–∞–º–∏)

### **–í–µ—Ä—Å–∏–∏ –ø–∞–∫–µ—Ç–æ–≤:**
```
leaflet: ^1.9.4
react-leaflet: ^4.2.1 (–∏–∑-–∑–∞ React 18)
leaflet-gpx: ^1.7.0
```

### **–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ü–µ–Ω—Ç—Ä–∞ –∫–∞—Ä—Ç—ã:**
```javascript
[52.416925, 103.738906] // –¶–µ–Ω—Ç—Ä —Ç—Ä–∞—Å—Å—ã –õ–ë–ö, –∑—É–º 15
```

---

## üÜò **–ß–¢–û –ù–£–ñ–ù–û –î–õ–Ø –ü–û–õ–ù–û–ì–û –ö–û–ù–¢–ï–ö–°–¢–ê –í –ù–û–í–û–ô –ë–ï–°–ï–î–ï?**

**–ß—Ç–æ–±—ã –Ω–æ–≤—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –º–æ–≥ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É, –µ–º—É –Ω—É–∂–Ω–∞:**

1. **–≠—Ç–∞ —Å–≤–æ–¥–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞** (—É–∂–µ –µ—Å—Ç—å ‚úÖ)
2. **–ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ —Ñ–∞–π–ª–æ–≤** (–º–æ–∂–Ω–æ –¥–∞—Ç—å –ø–æ –∑–∞–ø—Ä–æ—Å—É):
   - `src/widgets/Map/ui/Map.jsx`
   - `src/widgets/Map/ui/TrailMarksDisplay.jsx`
   - `src/widgets/Map/ui/MapClickMenu.jsx`
   - `src/App.jsx` (—á–∞—Å—Ç—å —Å —Ç–∞–±–∞–º–∏)
3. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã `trail_marks`** (—É–∂–µ –µ—Å—Ç—å ‚úÖ)
4. **–ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö** –∏–∑ `trail_marks` (—É–∂–µ –µ—Å—Ç—å ‚úÖ)

**–ì–æ—Ç–æ–≤ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –≤ –Ω–æ–≤–æ–π –±–µ—Å–µ–¥–µ!** –ß—Ç–æ –±—É–¥–µ–º –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ?